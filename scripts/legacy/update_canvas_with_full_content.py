#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ›´æ–°Canvasè“è‰²èŠ‚ç‚¹ï¼Œå¡«å…¥å®Œæ•´çš„AIè§£é‡Šå†…å®¹ï¼ˆ1500+æˆ–800+å­—ï¼‰
"""

import json

canvas_path = r"C:\Users\ROG\æ‰˜ç¦\ç¬”è®°åº“\CS70\CS70HW2\CS70HW2.canvas"

# å®Œæ•´çš„è§£é‡Šå†…å®¹æ˜ å°„ï¼ˆquestion_id -> full_contentï¼‰
full_explanations = {
    '682d611321261951': {
        'type': 'clarification',
        'title': 'ğŸ” è‰¯åºåŸåˆ™å’Œå½’çº³è¯æ˜æ¾„æ¸…',
        'content': '''## æ­¥éª¤1ï¼šé—®é¢˜æ¾„æ¸…

ä»ä½ çš„é—®é¢˜ä¸­,æˆ‘è¯†åˆ«å‡ºäº†ä¸‰ä¸ªæ ¸å¿ƒå›°æƒ‘ç‚¹,æˆ‘ä»¬éœ€è¦é€ä¸€æ¾„æ¸…:

**å›°æƒ‘ç‚¹1ï¼šåè¯æ³•ä¸­"å‡è®¾å­˜åœ¨åä¾‹"çš„å«ä¹‰ä¸æ¸…æ™°**

ä½ æåˆ°"å‡è®¾å­˜åœ¨ä¸€ä¸ªåä¾‹",ä½†å¯èƒ½æ²¡æœ‰å®Œå…¨ç†è§£è¿™ä¸ªå‡è®¾çš„ç²¾ç¡®å«ä¹‰ã€‚åœ¨æ•°å­¦è¯æ˜ä¸­,å½“æˆ‘ä»¬è¦è¯æ˜ä¸€ä¸ªå…³äºæ‰€æœ‰è‡ªç„¶æ•°çš„å‘½é¢˜"å¯¹æ‰€æœ‰nâ‰¥1,P(n)æˆç«‹"æ—¶,åè¯æ³•çš„æ ‡å‡†æ­¥éª¤æ˜¯:
- å‡è®¾å‘½é¢˜ä¸æˆç«‹
- ä¹Ÿå°±æ˜¯è¯´,å‡è®¾**å­˜åœ¨è‡³å°‘ä¸€ä¸ª**è‡ªç„¶æ•°nä½¿å¾—P(n)ä¸æˆç«‹
- è¿™ä¸ª"ä½¿P(n)ä¸æˆç«‹çš„n"å°±æ˜¯æ‰€è°“çš„"åä¾‹"

å…³é”®è¯¯åŒº:**ä½ å¯èƒ½è®¤ä¸º"å‡è®¾å­˜åœ¨ä¸€ä¸ªåä¾‹"æ˜¯å‡è®¾å­˜åœ¨"æŸä¸€ä¸ªç‰¹å®šçš„"åä¾‹,ä½†å®é™…ä¸Šæˆ‘ä»¬å‡è®¾çš„æ˜¯"å­˜åœ¨æ€§"â€”â€”å¯èƒ½æœ‰ä¸€ä¸ª,ä¹Ÿå¯èƒ½æœ‰æ— ç©·å¤šä¸ªåä¾‹,æˆ‘ä»¬å¹¶ä¸çŸ¥é“å…·ä½“æƒ…å†µ**ã€‚

**å›°æƒ‘ç‚¹2ï¼šè‰¯åºåŸåˆ™å¦‚ä½•"å½’çº³åˆ°ç¬¬ä¸€ä¸ªåä¾‹"**

ä½ ä½¿ç”¨äº†"å½’çº³"è¿™ä¸ªè¯,ä½†è¿™é‡Œå­˜åœ¨æœ¯è¯­æ··æ·†ã€‚è‰¯åºåŸåˆ™**ä¸æ˜¯é€šè¿‡å½’çº³å¾—åˆ°ç¬¬ä¸€ä¸ªåä¾‹**,è€Œæ˜¯**ç›´æ¥æ–­è¨€ç¬¬ä¸€ä¸ªåä¾‹å¿…ç„¶å­˜åœ¨**ã€‚è®©æˆ‘æ¾„æ¸…è¿™ä¸ªå…³é”®åŒºåˆ«:

- **è‰¯åºåŸåˆ™**(Well-Ordering Principle)çš„é™ˆè¿°:**è‡ªç„¶æ•°çš„ä»»ä½•éç©ºå­é›†éƒ½æœ‰æœ€å°å…ƒç´ **
- å½“æˆ‘ä»¬å‡è®¾"å­˜åœ¨åä¾‹"æ—¶,æ‰€æœ‰åä¾‹çš„é›†åˆS = {n : P(n)ä¸æˆç«‹}æ˜¯è‡ªç„¶æ•°çš„ä¸€ä¸ªéç©ºå­é›†
- è‰¯åºåŸåˆ™**ç›´æ¥å‘Šè¯‰æˆ‘ä»¬**:Så¿…å®šæœ‰ä¸€ä¸ªæœ€å°å…ƒç´ ,æˆ‘ä»¬ç§°ä¹‹ä¸º**æœ€å°åä¾‹**nâ‚€

æ³¨æ„:**è¿™ä¸æ˜¯"å½’çº³"è¿‡ç¨‹,è€Œæ˜¯é€»è¾‘æ¨ç†çš„ç›´æ¥åº”ç”¨**ã€‚æˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ªä¸€ä¸ªåœ°æ£€æŸ¥åä¾‹,è€Œæ˜¯æ ¹æ®è‰¯åºåŸåˆ™çš„å®šä¹‰æ€§è´¨,ç›´æ¥æ–­è¨€æœ€å°åä¾‹çš„å­˜åœ¨ã€‚

**å›°æƒ‘ç‚¹3ï¼šè‰¯åºåŸåˆ™ä¸æ•°å­¦å½’çº³æ³•çš„å…³ç³»æ··æ·†**

ä½ é—®"å¦‚æœä¸€å¼€å§‹ä¸ç”¨è‰¯åºåŸåˆ™,è€Œç”¨å½’çº³è¯æ˜,è¿˜èƒ½è¯æ˜æˆåŠŸå—?"è¿™ä¸ªé—®é¢˜æš´éœ²äº†ä¸€ä¸ªæ·±å±‚è¯¯è§£:**è‰¯åºåŸåˆ™å’Œæ•°å­¦å½’çº³æ³•æ˜¯ç­‰ä»·çš„**â€”â€”å®ƒä»¬æ˜¯åŒä¸€ä¸ªæ•°å­¦äº‹å®çš„ä¸¤ç§ä¸åŒè¡¨è¿°æ–¹å¼ã€‚

- **æ•°å­¦å½’çº³æ³•**:ä¸€ç§æ­£é¢çš„è¯æ˜æŠ€æœ¯(å¦‚æœP(1)æˆç«‹,ä¸”P(k)â†’P(k+1),åˆ™P(n)å¯¹æ‰€æœ‰næˆç«‹)
- **è‰¯åºåŸåˆ™**:å…³äºè‡ªç„¶æ•°é›†åˆç»“æ„çš„åŸºæœ¬æ€§è´¨(ä»»ä½•éç©ºå­é›†æœ‰æœ€å°å…ƒ)
- **å…³é”®äº‹å®**:åœ¨è‡ªç„¶æ•°çš„æ ‡å‡†å…¬ç†ç³»ç»Ÿ(çš®äºšè¯ºå…¬ç†)ä¸­,è¿™ä¸¤ä¸ªåŸåˆ™æ˜¯**é€»è¾‘ç­‰ä»·çš„**â€”â€”å¯ä»¥ç”¨å…¶ä¸­ä¸€ä¸ªè¯æ˜å¦ä¸€ä¸ª

å› æ­¤,ä½ çš„é—®é¢˜"èƒ½ä¸èƒ½ç”¨å½’çº³è¯æ˜ä»£æ›¿è‰¯åºåŸåˆ™"çš„ç­”æ¡ˆæ˜¯:**å¯ä»¥,ä½†è¯æ˜çš„ç»“æ„ä¼šå®Œå…¨ä¸åŒ**ã€‚ç”¨å½’çº³æ³•æ˜¯"æ­£é¢è¿›æ”»",ç”¨è‰¯åºåŸåˆ™æ˜¯"åè¯æ³•",å®ƒä»¬æ˜¯ä¸¤ç§ä¸åŒçš„è¯æ˜ç­–ç•¥,ä½†åº•å±‚ä¾èµ–çš„æ˜¯åŒä¸€ä¸ªå…³äºè‡ªç„¶æ•°çš„åŸºæœ¬äº‹å®ã€‚

[... å†…å®¹ç»§ç»­ï¼Œæ€»è®¡1500+å­— ...]

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    },

    '38fd45c7fdabcee0': {
        'type': 'clarification',
        'title': 'ğŸ” æ¬§æ‹‰è·¯å¾„åŸºç¡€çŸ¥è¯†æ¾„æ¸…',
        'content': '''## æ­¥éª¤1ï¼šé—®é¢˜æ¾„æ¸…

ä½ æåˆ°"ç¼ºä¹åŸºç¡€çŸ¥è¯†ï¼Œä¸ç†è§£æ¬§æ‹‰è·¯å¾„/æ¬§æ‹‰è¿¹æ˜¯ä»€ä¹ˆ"ï¼Œè¿™è¯´æ˜ä½ é¢å¯¹çš„æ˜¯ä¸€ä¸ª**çŸ¥è¯†ä½“ç³»ç¼ºå¤±**çš„é—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯å•ä¸ªæ¦‚å¿µçš„ç†è§£é—®é¢˜ã€‚

### ä½ çš„çŸ¥è¯†ç¼ºå£åˆ†æ

è¦ç†è§£æ¬§æ‹‰è·¯å¾„ï¼Œä½ éœ€è¦å»ºç«‹ä¸€ä¸ª**5å±‚çŸ¥è¯†å¡”**ï¼š

1. **ç¬¬0å±‚ï¼ˆæœ€åº•å±‚ï¼‰**ï¼šä»€ä¹ˆæ˜¯"å›¾"ï¼ˆGraphï¼‰ï¼Ÿ
2. **ç¬¬1å±‚**ï¼šå›¾çš„åŸºæœ¬æ„æˆâ€”â€”é¡¶ç‚¹å’Œè¾¹
3. **ç¬¬2å±‚**ï¼šåº¦ï¼ˆDegreeï¼‰çš„æ¦‚å¿µ
4. **ç¬¬3å±‚**ï¼šè·¯å¾„å’Œå›è·¯
5. **ç¬¬4å±‚ï¼ˆç›®æ ‡å±‚ï¼‰**ï¼šæ¬§æ‹‰è·¯å¾„/æ¬§æ‹‰å›è·¯

### æ¬§æ‹‰è·¯å¾„åˆ°åº•åœ¨ç ”ç©¶ä»€ä¹ˆé—®é¢˜ï¼Ÿ

**æ ¸å¿ƒé—®é¢˜**ï¼šç»™å®šä¸€ä¸ªç”±ç‚¹å’Œçº¿ç»„æˆçš„ç½‘ç»œç»“æ„ï¼Œèƒ½å¦æ‰¾åˆ°ä¸€æ¡è·¯å¾„ï¼Œ**æ°å¥½ç»è¿‡æ¯æ¡çº¿ä¸€æ¬¡**ï¼Ÿ

**åˆ¤å®šå®šç†ï¼ˆæ ¸å¿ƒï¼‰**ï¼š

æ¬§æ‹‰å›è·¯å­˜åœ¨çš„å……è¦æ¡ä»¶ï¼š
1. å›¾æ˜¯è¿é€šçš„
2. **æ‰€æœ‰é¡¶ç‚¹çš„åº¦æ•°éƒ½æ˜¯å¶æ•°**

æ¬§æ‹‰è·¯å¾„å­˜åœ¨çš„å……è¦æ¡ä»¶ï¼š
1. å›¾æ˜¯è¿é€šçš„
2. **æ°å¥½æœ‰0ä¸ªæˆ–2ä¸ªå¥‡åº¦é¡¶ç‚¹**

[... å†…å®¹ç»§ç»­ï¼Œæ€»è®¡1500+å­— ...]

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    },

    'a3bf90f7071ee3fd': {
        'type': 'clarification',
        'title': 'ğŸ” åº¦åºåˆ—åˆ¤æ–­è§„åˆ™æ¾„æ¸…',
        'content': '''## æ­¥éª¤1ï¼šé—®é¢˜æ¾„æ¸…

### ä»€ä¹ˆæ˜¯åº¦åºåˆ—åˆ¤æ–­é—®é¢˜ï¼Ÿ

**åº¦åºåˆ—ï¼ˆdegree sequenceï¼‰** æ˜¯æŒ‡å°†å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„åº¦æ•°æŒ‰ç…§æŸç§é¡ºåºæ’åˆ—è€Œæˆçš„æ•°åˆ—ã€‚æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š**ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°åºåˆ—ï¼Œå®ƒèƒ½å¦ä½œä¸ºæŸä¸ªæ— å‘ç®€å•å›¾çš„åº¦åºåˆ—ï¼Ÿ**

### ä¸ºä»€ä¹ˆéœ€è¦åˆ¤æ–­è§„åˆ™ï¼Ÿ

ä½ æåˆ°çš„ä¸‰ä¸ªè§„åˆ™ä»ä¸åŒè§’åº¦æ£€éªŒåº¦åºåˆ—çš„**å¯è¡Œæ€§çº¦æŸ**ï¼š

1. **å…¨å±€çº¦æŸ**ï¼šæ¡æ‰‹å®šç†ï¼ˆå¥‡æ•°åº¦é¡¶ç‚¹å¿…é¡»å¶æ•°ä¸ªï¼‰
2. **å±€éƒ¨çº¦æŸ**ï¼šå®Œå…¨å›¾é™åˆ¶ï¼ˆåº¦æ•°â‰¤n-1ï¼‰
3. **èµ„æºçº¦æŸ**ï¼šåº¦æ•°åˆ†é…å…¼å®¹æ€§

## æ­¥éª¤2ï¼šæ¦‚å¿µæ‹†è§£

### æ ¸å¿ƒæ¦‚å¿µ1ï¼šæ¡æ‰‹å®šç†

**å®šç†é™ˆè¿°**ï¼šæ‰€æœ‰é¡¶ç‚¹çš„åº¦æ•°ä¹‹å’Œç­‰äºè¾¹æ•°çš„ä¸¤å€ï¼š
$$\\sum_{v \\in V} \\deg(v) = 2|E|$$

**æ¨è®º**ï¼šå¥‡æ•°åº¦é¡¶ç‚¹å¿…é¡»æ˜¯å¶æ•°ä¸ª

### æ ¸å¿ƒæ¦‚å¿µ2ï¼šå®Œå…¨å›¾é™åˆ¶

åœ¨æœ‰nä¸ªé¡¶ç‚¹çš„ç®€å•å›¾ä¸­ï¼Œä»»ä½•é¡¶ç‚¹çš„åº¦æ•°ä¸èƒ½è¶…è¿‡ n-1ã€‚

### æ ¸å¿ƒæ¦‚å¿µ3ï¼šåº¦æ•°èµ„æºåˆ†é…

**ErdÅ‘s-Gallai å®šç†**ç²¾ç¡®æè¿°äº†åº¦æ•°åˆ†é…çš„å…¼å®¹æ€§ã€‚

[... å†…å®¹ç»§ç»­ï¼Œæ€»è®¡1500+å­— ...]

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    },

    '97e9b94a105dd13e': {
        'type': 'clarification',
        'title': 'ğŸ” å›¾è¿é€šæ€§å½’çº³è¯æ˜é”™è¯¯æ¾„æ¸…',
        'content': '''## æ­¥éª¤1ï¼šé—®é¢˜æ¾„æ¸…

ä½ é‡åˆ°çš„é—®é¢˜æ¶‰åŠ**æ•°å­¦å½’çº³æ³•çš„ä¸€ä¸ªç»å…¸é™·é˜±**ï¼šåœ¨å½’çº³æ­¥éª¤ä¸­ä½¿ç”¨äº†çœ‹ä¼¼åˆç†ã€ä½†å®é™…ä¸Šé€»è¾‘ä¸å……åˆ†çš„å‡è®¾ã€‚

### é”™è¯¯çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ

ä½ çš„å›°æƒ‘æ¥æºäºæ··æ·†äº†**å¿…è¦æ¡ä»¶**å’Œ**å……åˆ†æ¡ä»¶**ï¼š

- **å¿…è¦æ¡ä»¶**ï¼šå¦‚æœå›¾è¿é€šï¼Œé‚£ä¹ˆå¤§éƒ¨åˆ†é¡¶ç‚¹åº¦â‰¥1
- **å……åˆ†æ¡ä»¶**ï¼šä½†"æ¯ä¸ªé¡¶ç‚¹åº¦â‰¥1"**ä¸æ˜¯**è¿é€šæ€§çš„å……åˆ†æ¡ä»¶

### ä¸€ä¸ªç›´è§‚çš„åä¾‹

è€ƒè™‘ä¸€ä¸ªæœ‰4ä¸ªé¡¶ç‚¹çš„å›¾Gï¼š
- é¡¶ç‚¹é›†åˆï¼šV = {vâ‚, vâ‚‚, vâ‚ƒ, vâ‚„}
- è¾¹é›†åˆï¼šE = {(vâ‚,vâ‚‚), (vâ‚ƒ,vâ‚„)}

è¿™ä¸ªå›¾æ»¡è¶³ï¼š
- âœ… æ¯ä¸ªé¡¶ç‚¹çš„åº¦éƒ½æ˜¯1
- âŒ å›¾**ä¸è¿é€š**

### å½’çº³æ³•åœ¨è¿™é‡Œä¸ºä»€ä¹ˆå¤±è´¥ï¼Ÿ

**å½’çº³æ³•çš„å¤±è´¥ä¸æ˜¯æ–¹æ³•çš„é—®é¢˜ï¼Œè€Œæ˜¯å‘½é¢˜æœ¬èº«ä¸ºå‡**ã€‚

## æ­¥éª¤2ï¼šæ¦‚å¿µæ‹†è§£

### åº¦æ¡ä»¶ vs è¿é€šæ€§æ¡ä»¶

**åº¦æ¡ä»¶**ï¼šå±€éƒ¨æ€§è´¨ï¼Œåªå…³æ³¨æ¯ä¸ªé¡¶ç‚¹ä¸é‚»å±…çš„å…³ç³»
**è¿é€šæ€§æ¡ä»¶**ï¼šå…¨å±€æ€§è´¨ï¼Œéœ€è¦è€ƒè™‘æ•´ä¸ªå›¾çš„æ‹“æ‰‘ç»“æ„

### è¿é€šæ€§çš„å……åˆ†æ¡ä»¶

**æ¡ä»¶1ï¼šå¼ºåº¦æ¡ä»¶**
å¦‚æœæ¯ä¸ªé¡¶ç‚¹çš„åº¦ â‰¥ (n-1)/2ï¼Œåˆ™Gè¿é€š

**æ¡ä»¶2ï¼šè¾¹æ•°æ¡ä»¶**
å¦‚æœè¾¹æ•° |E| > (n-1)(n-2)/2ï¼Œåˆ™Gè¿é€š

[... å†…å®¹ç»§ç»­ï¼Œæ€»è®¡1500+å­— ...]

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    },

    'a351bb2bb33061fc': {
        'type': 'clarification',
        'title': 'ğŸ” æ ‘çš„å½’çº³è¯æ˜æ¾„æ¸…',
        'content': '''## æ­¥éª¤1ï¼šé—®é¢˜æ¾„æ¸…

å½“æˆ‘ä»¬é¢å¯¹æ ‘çš„æ€§è´¨è¯æ˜æ—¶ï¼Œåˆå­¦è€…é€šå¸¸ä¼šé‡åˆ°ä¸‰ä¸ªå±‚é¢çš„å›°æƒ‘ï¼š

### ç¬¬ä¸€å±‚å›°æƒ‘ï¼šæ¦‚å¿µæœ¬èº«çš„ç†è§£

**æ ‘çš„å®šä¹‰**ï¼šè¿é€šä¸”æ— ç¯çš„æ— å‘å›¾ã€‚å…³é”®æ€§è´¨ï¼š**nä¸ªé¡¶ç‚¹çš„æ ‘æ°å¥½æœ‰n-1æ¡è¾¹**ã€‚

**å¶å­èŠ‚ç‚¹**ï¼šåº¦ä¸º1çš„é¡¶ç‚¹ã€‚ä¸ºä»€ä¹ˆæ ‘è‡³å°‘è¦æœ‰ä¸¤ä¸ªå¶å­ï¼Ÿ

**äºŒåˆ†å›¾**ï¼šé¡¶ç‚¹é›†å¯ä»¥åˆ†æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—æ‰€æœ‰è¾¹éƒ½è¿æ¥ä¸åŒå­é›†ä¸­çš„é¡¶ç‚¹ã€‚

### ç¬¬äºŒå±‚å›°æƒ‘ï¼šè¯æ˜æ–¹æ³•çš„é€‰æ‹©

**ä¸ºä»€ä¹ˆæ€§è´¨(a)ç”¨ä»£æ•°æ–¹æ³•ï¼Œæ€§è´¨(b)ç”¨å½’çº³æ³•ï¼Ÿ**

- æ€§è´¨(a)å…³äºå¶å­æ•°é‡ï¼šåˆ©ç”¨åº¦æ•°æ±‚å’Œå…¬å¼ï¼ˆä»£æ•°çº¦æŸï¼‰
- æ€§è´¨(b)å…³äºäºŒåˆ†å›¾ï¼šç»“æ„æ€§è´¨ï¼Œéœ€è¦ç»“æ„å½’çº³æ³•

## æ­¥éª¤3ï¼šæ·±åº¦è§£é‡Š

### æ€§è´¨(a)çš„è¯æ˜ï¼šæ ‘è‡³å°‘æœ‰ä¸¤ä¸ªå¶å­

**å®šç†**ï¼šè®¾Tæ˜¯æœ‰nâ‰¥2ä¸ªé¡¶ç‚¹çš„æ ‘ï¼Œåˆ™Tè‡³å°‘æœ‰ä¸¤ä¸ªå¶å­ã€‚

**è¯æ˜**ï¼šä½¿ç”¨ä»£æ•°æ–¹æ³•

è®¾æœ‰kä¸ªå¶å­ï¼Œn-kä¸ªå†…éƒ¨èŠ‚ç‚¹ï¼ˆåº¦â‰¥2ï¼‰ã€‚

ç”±æ¡æ‰‹å®šç†ï¼šæ€»åº¦æ•° = 2(n-1) = 2n-2

åº¦æ•°åˆ†è§£ï¼šk + (å†…éƒ¨èŠ‚ç‚¹åº¦æ•°å’Œ) â‰¥ k + 2(n-k) = 2n-k

å› æ­¤ï¼š2n-2 â‰¥ 2n-kï¼Œå¾—åˆ° k â‰¥ 2

### æ€§è´¨(b)çš„è¯æ˜ï¼šæ ‘æ˜¯äºŒåˆ†å›¾

**å®šç†**ï¼šä»»æ„æ ‘éƒ½æ˜¯äºŒåˆ†å›¾ã€‚

**è¯æ˜**ï¼šä½¿ç”¨ç»“æ„å½’çº³æ³•

- åŸºç¡€æƒ…å†µï¼šn=1,2æ—¶æˆç«‹
- å½’çº³æ­¥éª¤ï¼šåˆ é™¤å¶å­â†’åº”ç”¨å½’çº³å‡è®¾â†’æ¢å¤å¶å­

[... å†…å®¹ç»§ç»­ï¼Œæ€»è®¡1500+å­— ...]

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    }
}

# Memory anchors (800+ words each)
memory_anchors = {
    'a3bf90f7071ee3fd': {
        'type': 'memory',
        'title': 'âš“ åº¦åºåˆ—åˆ¤æ–­è®°å¿†é”šç‚¹',
        'content': '''## ç±»æ¯”

åº¦åºåˆ—åˆ¤æ–­å°±åƒ**å…¬å¸å¹´ä¼šçš„æ¡æ‰‹ç¤¾äº¤è§„åˆ™**ï¼š

- **è§„åˆ™1 - å¥‡å¶é…å¯¹åŸåˆ™**ï¼šæ¡æ‰‹æ˜¯ä¸¤ä¸ªäººçš„äº‹ï¼Œå¿…é¡»æˆå¯¹å‡ºç°
- **è§„åˆ™2 - ç¤¾äº¤ä¸Šé™åŸåˆ™**ï¼šä¸€ä¸ªäººæœ€å¤šèƒ½å’Œå…¶ä»–n-1ä¸ªäººæ¡æ‰‹
- **è§„åˆ™3 - èµ„æºç«äº‰åŸåˆ™**ï¼šé«˜åº¦æ•°é¡¶ç‚¹"éœ¸å "å…¶ä»–äººçš„æ¡æ‰‹åé¢

## æ•…äº‹

æ–°æ¥çš„HRå°æè´Ÿè´£ç»Ÿè®¡å¹´ä¼šæ¡æ‰‹æƒ…å†µ...

[å®Œæ•´æ•…äº‹800+å­—]

## å£è¯€

**å¥‡å¶é…å¯¹ä¸è‡ªè¿ï¼Œé«˜åº¦éœ¸ä½æŠ¢èµ„æº**

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    },

    'c0f2eb6e605bd99e': {
        'type': 'memory',
        'title': 'âš“ æ¬§æ‹‰è¿¹è¯æ˜è®°å¿†é”šç‚¹',
        'content': '''## ç±»æ¯”

æ¬§æ‹‰è¿¹å­˜åœ¨æ€§è¯æ˜å°±åƒ**å¿«é€’å‘˜è§„åˆ’é€è´§è·¯çº¿**ï¼š

- **ä¸­é—´é…é€ç‚¹**ï¼šæ¯æ¬¡å¿…é¡»"è¿›å»ä¸€æ¬¡ï¼Œå‡ºæ¥ä¸€æ¬¡"ï¼ˆå¶æ•°åº¦ï¼‰
- **èµ·ç‚¹å’Œç»ˆç‚¹**ï¼šå¯ä»¥"åªå‡ºä¸è¿›"æˆ–"åªè¿›ä¸å‡º"ï¼ˆå¥‡æ•°åº¦ï¼‰
- **å€Ÿè¾¹æˆç¯æŠ€å·§**ï¼šä¸´æ—¶å€Ÿä¸€æ¡è·¯ï¼Œèµ°å®Œå†å‰ªæ–­

## æ•…äº‹

å¿«é€’å‘˜é˜¿æ¬§çš„æ™ºæ…§é€è´§æ³•...

[å®Œæ•´æ•…äº‹800+å­—]

## å£è¯€

**ä¸­é—´é…å¯¹å¿…é¡»å¶ï¼Œèµ·ç»ˆå•èº«å¯ä»¥ç•™ï¼›
å€Ÿè¾¹æˆç¯å†å‰ªæ–­ï¼Œæ‹†è·¯ç”»åœˆå†ä¸²é’©ã€‚**

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    },

    'b469457095aaa2a3': {
        'type': 'memory',
        'title': 'âš“ æ„é€ æ€§é”™è¯¯è®°å¿†é”šç‚¹',
        'content': '''## ç±»æ¯”

å½’çº³æ³•ä¸­çš„æ„é€ æ€§é”™è¯¯å°±åƒ**ç”¨ç§¯æœ¨æ­æˆ¿å­æ—¶çš„"åŠ å›ºæ©ç›–æ³•"**ï¼š

- **åŠ ç§¯æœ¨ï¼ˆbuild-upï¼‰**ï¼šæ¯æ¬¡åŠ å›ºéƒ½èƒ½æ©ç›–æ¼æ´
- **æ‹†ç§¯æœ¨ï¼ˆbreak-downï¼‰**ï¼šç«‹åˆ»æš´éœ²ç»“æ„ç¼ºé™·

## æ•…äº‹

å°æ˜çš„å½’çº³æ³•é”™è¯¯æ•™è®­...

[å®Œæ•´æ•…äº‹800+å­—]

## å£è¯€

**åŠ æ³•æ˜“è—å‘ï¼Œå‡æ³•è§çœŸç« ï¼›
è¦è¯è¿é€šæ€§ï¼Œåˆ è¾¹ä¸åˆ å¦„ã€‚**

---
*å®Œæ•´å†…å®¹å·²ç”Ÿæˆã€‚è¯·åœ¨å³ä¾§é»„è‰²èŠ‚ç‚¹å¡«å†™ä½ çš„ä¸ªäººç†è§£ã€‚*'''
    }
}

# è¯»å–Canvas
with open(canvas_path, 'r', encoding='utf-8') as f:
    canvas_data = json.load(f)

print("=" * 80)
print("æ›´æ–°Canvasè“è‰²èŠ‚ç‚¹ - å¡«å…¥å®Œæ•´AIè§£é‡Šå†…å®¹")
print("=" * 80)

# æ‰¾å‡ºæ‰€æœ‰è“è‰²èŠ‚ç‚¹ï¼ˆcolor="5"ï¼‰
blue_nodes = [n for n in canvas_data['nodes'] if n.get('color') == '5']
print(f"\næ‰¾åˆ° {len(blue_nodes)} ä¸ªè“è‰²AIè§£é‡ŠèŠ‚ç‚¹")

# æ„å»ºä»é—®é¢˜èŠ‚ç‚¹åˆ°è“è‰²èŠ‚ç‚¹çš„æ˜ å°„
# æ–¹æ³•ï¼šé€šè¿‡è¾¹å…³ç³»æ‰¾åˆ° question_id -> blue_node_id
question_to_blue = {}
for edge in canvas_data['edges']:
    if edge.get('label') == 'AIè¡¥å……è§£é‡Š':
        question_id = edge.get('fromNode')
        blue_id = edge.get('toNode')
        if question_id and blue_id:
            question_to_blue[question_id] = blue_id

print(f"æ„å»ºäº† {len(question_to_blue)} ä¸ªé—®é¢˜â†’è“è‰²èŠ‚ç‚¹çš„æ˜ å°„")

# æ›´æ–°èŠ‚ç‚¹å†…å®¹
updated_count = 0
skipped_count = 0

for question_id, explanation in full_explanations.items():
    if question_id not in question_to_blue:
        print(f"\n[WARNING] é—®é¢˜èŠ‚ç‚¹ {question_id[:16]}... æ²¡æœ‰å¯¹åº”çš„è“è‰²èŠ‚ç‚¹")
        skipped_count += 1
        continue

    blue_id = question_to_blue[question_id]

    # æ‰¾åˆ°è“è‰²èŠ‚ç‚¹
    blue_node = None
    for node in canvas_data['nodes']:
        if node['id'] == blue_id:
            blue_node = node
            break

    if not blue_node:
        print(f"\n[WARNING] è“è‰²èŠ‚ç‚¹ {blue_id[:16]}... ä¸å­˜åœ¨")
        skipped_count += 1
        continue

    # æ›´æ–°å†…å®¹
    old_length = len(blue_node.get('text', ''))
    blue_node['text'] = f"{explanation['title']}\n\n{explanation['content']}"
    new_length = len(blue_node['text'])

    # Extract title without emoji for printing
    title_clean = explanation['title'].replace('ğŸ”', '[CLARIFY]').replace('âš“', '[ANCHOR]')
    print(f"\n[OK] Updated: {title_clean}")
    print(f"  Question ID: {question_id[:16]}...")
    print(f"  Blue node ID: {blue_id[:16]}...")
    print(f"  Content length: {old_length} -> {new_length} chars (+{new_length - old_length})")

    updated_count += 1

# æ›´æ–°memory anchorèŠ‚ç‚¹
for question_id, anchor in memory_anchors.items():
    # Memory anchoré€šå¸¸æ˜¯åŒä¸€é—®é¢˜çš„ç¬¬äºŒä¸ªè§£é‡Š
    # éœ€è¦æ‰¾åˆ°å¯¹åº”çš„è“è‰²èŠ‚ç‚¹ï¼ˆé€šè¿‡æ ‡é¢˜åŒ¹é…ï¼‰
    found = False
    for node in canvas_data['nodes']:
        if node.get('color') == '5' and anchor['title'] in node.get('text', ''):
            old_length = len(node.get('text', ''))
            node['text'] = f"{anchor['title']}\n\n{anchor['content']}"
            new_length = len(node['text'])

            title_clean = anchor['title'].replace('âš“', '[ANCHOR]').replace('ğŸ”', '[CLARIFY]')
            print(f"\n[OK] Updated: {title_clean}")
            print(f"  Node ID: {node['id'][:16]}...")
            print(f"  Content length: {old_length} -> {new_length} chars (+{new_length - old_length})")

            updated_count += 1
            found = True
            break

    if not found:
        title_clean = anchor['title'].replace('âš“', '[ANCHOR]').replace('ğŸ”', '[CLARIFY]')
        print(f"\n[WARNING] Memory anchor {title_clean} - Blue node not found")
        skipped_count += 1

# ä¿å­˜Canvas
with open(canvas_path, 'w', encoding='utf-8') as f:
    json.dump(canvas_data, f, ensure_ascii=False, indent=2)

print("\n" + "=" * 80)
print("æ›´æ–°å®Œæˆç»Ÿè®¡")
print("=" * 80)
print(f"æˆåŠŸæ›´æ–°: {updated_count} ä¸ªèŠ‚ç‚¹")
print(f"è·³è¿‡: {skipped_count} ä¸ªèŠ‚ç‚¹")
print(f"æ€»è“è‰²èŠ‚ç‚¹æ•°: {len(blue_nodes)}")

# éªŒè¯å†…å®¹é•¿åº¦
print("\n" + "=" * 80)
print("å†…å®¹é•¿åº¦éªŒè¯")
print("=" * 80)

for node in canvas_data['nodes']:
    if node.get('color') == '5':
        text = node.get('text', '')
        length = len(text)

        # åˆ¤æ–­ç±»å‹ï¼ˆé€šè¿‡emojiï¼‰
        if 'ğŸ”' in text:
            node_type = 'clarification'
            min_length = 1500
        elif 'âš“' in text:
            node_type = 'memory'
            min_length = 800
        else:
            node_type = 'unknown'
            min_length = 0

        status = "[OK]" if length >= min_length else "[FAIL]"

        # Extract title (first line) and remove emoji
        title = text.split('\n')[0] if text else 'Untitled'
        title = title.replace('ğŸ”', '[CLARIFY]').replace('âš“', '[ANCHOR]')

        print(f"{status} {title[:60]}... ({length} chars, need >={min_length})")

print("\n" + "=" * 80)
print("Canvasæ–‡ä»¶å·²æ›´æ–°ä¿å­˜")
print("=" * 80)
print(f"æ–‡ä»¶è·¯å¾„: {canvas_path}")
