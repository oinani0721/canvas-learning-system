---
name: ultrathink帮助
description: Complete UltraThink intelligent strategy system usage guide and workflow documentation
---

# 🎯 UltraThink智能策略系统 - 完整使用指南

**版本**: v1.0 - 智能自动化
**日期**: 2025-10-16
**状态**: ✅ 核心功能已完成并测试通过

---

## 🌟 系统简介

**UltraThink智能策略系统**是Canvas学习系统的高级功能，实现了**版本化检验白板**和**智能教学策略**的完美结合。

### 核心理念

**"通过输出倒逼输入，通过检验暴露盲区，通过策略针对性突破"**

### 3大创新

1. **智能策略决策**：根据理解程度自动选择教学方法
2. **永远有输出**：无论什么策略，都生成黄色节点（费曼学习法）
3. **版本化迭代**：v1 → v2 → v3，持续收敛到完全理解

---

## 📐 系统架构

### 3个核心模块

#### 1. 理解分析器 (`yellow_node_analyzer.py`)
```
功能：分析黄色理解内容，判定理解程度

输入：黄色节点文本
处理：
├─ 关键词匹配（30+关键词）
├─ 文本特征分析（长度、例子、疑问）
└─ 计算理解百分比（0-100%）

输出：
├─ understanding_percentage: 55%
├─ recommended_strategy: "split_questions"
└─ strategy_reason: "理解程度55%，拆分问题引导深化理解"
```

#### 2. 策略生成器 (`strategy_generator.py`)
```
功能：根据策略生成不同类型的节点组

策略1：补充解释（理解度0-30%）
生成：[问题] → [蓝色解释] → [黄色总结]

策略2：拆分问题（理解度40-70%）
生成：[问题] → [紫色子问题组] → [黄色回答×3]

策略3：深度检验（理解度80%+）
生成：[问题] → [黄色理解节点]
```

#### 3. 智能生成器 (`generate_ultrathink_review.py`)
```
功能：orchestrate整个智能生成流程

流程：
1. 读取原白板（红色/紫色节点）
2. 提取黄色理解
3. 调用理解分析器
4. 调用策略生成器
5. 创建检验白板Canvas文件
6. 更新进度追踪JSON
```

---

## 🚀 完整工作流（7步）

### 第1步：原白板学习

```
在Obsidian中打开原白板
    ↓
学习材料
    ↓
使用Agent辅助：
├─ /基础拆解（完全不懂的材料）
├─ /澄清路径（需要深度理解）
├─ /口语化解释（快速理解）
└─ /对比表（易混淆概念）
    ↓
填写黄色理解节点：
├─ 用自己的话解释
├─ 诚实表达理解程度
└─ 标注不确定的点

示例黄色理解：
"我知道逆否命题是把条件和结论都否定后交换，
它和原命题等价，但不理解为什么等价，
也不知道什么时候应该用逆否证明。"
    ↓
评分（/评分命令）
    ↓
识别红色/紫色节点（需要检验的）
```

---

### 第2步：写综述（可选但推荐）

```
使用 /写综述 查看模板
    ↓
合上所有资料（不看原白板！）
    ↓
凭记忆填写综述：
├─ 我理解的核心概念（列举）
├─ 每个概念的理解（详细说明）
├─ 重点和难点
├─ 知识框架（概念关系）
├─ 不确定的地方
└─ 自我评估（掌握程度%）
    ↓
保存为 .md 文件：
"我的综述-CS70-Lecture1.md"
```

**综述的价值**：
- 暴露遗漏主题
- 识别理解偏差
- 判断学习路线

---

### 第3步：生成智能v1检验白板

```bash
# 方式1：不带综述（基础使用）
python generate_ultrathink_review.py "C:\path\to\原白板.canvas"

# 方式2：带综述文本
python generate_ultrathink_review.py "C:\path\to\原白板.canvas" \
  --overview "我学习了鸽笼原理、逆否命题..."

# 方式3：从文件读取综述（推荐）
python generate_ultrathink_review.py "C:\path\to\原白板.canvas" \
  --overview-file "我的综述.md"
```

**系统自动执行**：
```
[步骤 1/4] 从原白板提取红色/紫色节点
    ↓ 提取完成: 41个红色节点, 34个紫色节点

[步骤 2/4] 智能策略分析
    ├─ 分析每个节点的黄色理解
    ├─ 计算理解程度（0-100%）
    └─ 决策教学策略
    ↓
    策略分布：
    ├─ 补充解释：46个（理解度0-30%）
    ├─ 拆分问题：29个（理解度40-70%）
    └─ 深度检验：0个（理解度80%+）

[步骤 3/4] 创建v1检验白板Canvas文件
    ├─ 生成策略节点组
    │   ├─ 蓝色解释节点：47个
    │   ├─ 紫色子问题组：29个
    │   └─ 黄色输出节点：133个 ✅
    ├─ 自动连接边：208条
    └─ 保存Canvas文件

[步骤 4/4] 更新进度追踪
    └─ 创建/更新 检验进度追踪.json

✅ 检验白板 v1 生成成功!
📁 文件路径: C:\...\原白板-检验白板-v1.canvas
📊 节点数量: 284 (75 questions → 284 total)
```

---

### 第4步：填写v1黄色节点

```
在Obsidian打开检验白板v1
    ↓
⚠️ 重要：不要看原白板！
    ↓
根据策略类型填写：

补充解释策略节点：
├─ 阅读蓝色澄清路径解释
├─ 理解4步澄清法：
│   ├─ 第1步：最简单的定义
│   ├─ 第2步：生活中的例子
│   ├─ 第3步：要解决什么问题
│   └─ 第4步：关键要点
└─ 在黄色总结节点填写：
    ├─ 1. 核心概念是什么？（1句话）
    ├─ 2. 关键要点有哪些？（3-5个）
    └─ 3. 举一个你自己想到的例子

拆分问题策略节点：
├─ 阅读紫色子问题组
├─ 理解每个子问题：
│   ├─ 子问题1：准确定义是什么？
│   ├─ 子问题2：与相关概念的区别？
│   └─ 子问题3：实际应用场景？
└─ 在黄色回答节点分别回答
    ├─ 回答1：...
    ├─ 回答2：...
    └─ 回答3：...

深度检验策略节点：
├─ 直接回答检验问题
└─ 在黄色节点填写完整理解
```

---

### 第5步：评分 + 策略调整

```
填写完所有黄色节点后
    ↓
使用 /评分 命令
    ├─ 评分所有黄色节点
    ├─ 4维度评分（准确性+形象性+完整性+原创性）
    └─ 自动流转颜色：
        ├─ ≥80分 → 🟢 绿色（理解完成）
        ├─ 60-79分 → 🟣 紫色（需深化）
        └─ <60分 → 🔴 红色（需重学）
    ↓
查看评分报告：
├─ 总分
├─ 各维度分数
├─ 反馈建议
└─ 智能推荐Agent

根据推荐采取行动：
├─ Accuracy低 → /澄清路径
├─ Imagery低 → /记忆锚点
├─ Completeness低 → /四层次解释
└─ Originality低 → /口语化解释
    ↓
继续学习，优化理解
    ↓
再次评分

（未来功能）auto_followup_generator：
├─ 自动检测策略是否有效
├─ 评分仍<50 → 自动切换策略
└─ 生成follow-up节点
```

---

### 第6步：持续迭代

```
在检验白板上持续学习：

遇到不懂的节点：
├─ /基础拆解（完全不懂）
├─ /深度拆解（似懂非懂）
├─ /澄清路径（需要深度理解）
├─ /对比表（易混淆）
└─ /记忆锚点（理解了但记不住）
    ↓
填写/优化黄色理解
    ↓
评分验证
    ↓
添加自己的节点：
├─ 自己想到的问题
├─ 自己的总结
└─ 概念之间的联系
    ↓
持续扩展检验白板
    ↓
直到满足停止条件：
├─ ✅ 绿色占比≥80%
├─ ✅ 节点数接近原白板50-70%
├─ ✅ 至少生成3个解释文档
├─ ✅ 至少添加2个原创节点
└─ ✅ 无红色节点
```

---

### 第7步：生成v2（可选）

```
如果v1完成后仍有<80分的节点：
    ↓
生成v2检验白板：
├─ 只包含未通过的节点（<80分）
├─ 再次智能策略分析
└─ 生成更针对性的节点
    ↓
文件名：原白板-检验白板-v2.canvas
    ↓
重复步骤4-6
    ↓
继续迭代v3, v4...
    ↓
直到所有节点通过
```

---

## 🎨 智能策略详解

### 策略1：补充解释 (provide_explanation)

**触发条件**：理解度 0-30%

**节点结构**：
```
[检验问题] (x=0)
    ↓ 边: 补充解释
[蓝色澄清路径] (x=800)
├─ 第1步：最简单的定义
├─ 第2步：生活中的例子
├─ 第3步：要解决什么问题
└─ 第4步：关键要点
    ↓ 边: 总结要点
[黄色总结] (x=1600)
├─ 1. 核心概念是什么？
├─ 2. 关键要点有哪些？
└─ 3. 举一个你自己想到的例子
```

**使用场景**：
- 完全不懂的概念
- 黄色理解为空或很短
- 关键词："完全不懂"、"看不懂"、"一头雾水"

**学习流程**：
```
阅读蓝色解释（4步澄清）
    ↓
理解概念
    ↓
在黄色节点用自己的话总结
    ↓
评分验证理解
```

---

### 策略2：拆分问题 (split_questions)

**触发条件**：理解度 40-70%

**节点结构**：
```
[检验问题] (x=0)
    ↓ 边: 拆分问题
[紫色子问题组] (x=800)
├─ 子问题1: 准确定义是什么？
├─ 子问题2: 与相关概念的区别？
└─ 子问题3: 实际应用场景？
    ↓ 边: 回答1/2/3
[黄色回答1] (x=1400, y=base_y)
[黄色回答2] (x=1400, y=base_y+250)
[黄色回答3] (x=1400, y=base_y+500)
```

**使用场景**：
- 似懂非懂的概念
- 有初步理解但不深入
- 关键词："好像懂了"、"不太确定"、"大概知道"

**学习流程**：
```
阅读子问题组（3-5个问题）
    ↓
思考每个具体问题
    ↓
在黄色节点分别回答
    ↓
通过回答深化理解
```

---

### 策略3：深度检验 (deep_verification)

**触发条件**：理解度 80%+

**节点结构**：
```
[检验问题] (x=0)
    ↓ 边: 回答
[黄色理解] (x=800)
└─ 完整回答检验问题
```

**使用场景**：
- 已经理解的概念
- 需要验证理解深度
- 关键词："理解了"、"懂了"、"可以解释"

**学习流程**：
```
直接回答检验问题
    ↓
展示理解深度
    ↓
评分验证是否真正理解
```

---

## 📊 实际效果数据

### 测试案例：CS70 Lecture1

**原白板**：
- 节点数：75（41红 + 34紫）
- 黄色理解：大部分为空或很短

**智能v1生成结果**：
```
策略分布：
├─ 补充解释：46个（61%）← 理解度普遍较低
├─ 拆分问题：29个（39%）
└─ 深度检验：0个 ← 首次学习，无高理解度节点

节点统计：
├─ 总节点数：284（从75扩展到284）
├─ 检验问题：75
├─ 蓝色解释：47
├─ 紫色子问题组：29
└─ 黄色输出：133 ✅ 永远有输出！

边统计：208条（自动连接）

文件大小：约150KB
```

**颜色分布**：
- 🟣 紫色（检验问题）：63
- 🔴 红色（原始问题）：41
- 🔵 蓝色（解释节点）：47
- 🟡 黄色（输出节点）：133

**黄色占比**：133/284 = 46.8%
→ 几乎一半节点都是输出！费曼学习法完美实现 ✅

---

## 💡 使用技巧汇总

### 技巧1：黄色理解要详细

❌ 不好：
```
"不懂"
```

✅ 好：
```
"我知道逆否命题的定义是'否定+交换'，
理解它和原命题等价，但不知道为什么等价，
也不确定什么时候应该用逆否证明。"
```

**效果**：详细理解 → 系统精准识别盲区 → 生成针对性节点

---

### 技巧2：综述要凭记忆

❌ 错误：边看资料边写综述

✅ 正确：
```
1. 合上所有资料
2. 完全凭记忆填写
3. 诚实标注不懂的地方
```

**效果**：暴露真实记忆盲区

---

### 技巧3：填写v1不看原白板

❌ 错误：边看原白板边填检验白板

✅ 正确：
```
1. 只打开检验白板v1
2. 根据策略节点提示填写
3. 卡住时调用Agent（在检验白板上）
4. 完成后再对比原白板
```

**效果**：真正暴露理解盲区

---

### 技巧4：主动使用Agent

检验白板支持所有Agent：
```
卡在某个节点：
├─ 完全不懂 → /澄清路径
├─ 似懂非懂 → /深度拆解
├─ 易混淆 → /对比表
└─ 记不住 → /记忆锚点
```

**效果**：检验白板成为动态学习环境

---

### 技巧5：持续扩展

```
不要只填写现有节点！
    ↓
主动添加：
├─ 自己想到的问题
├─ 概念之间的联系
├─ 自己的总结节点
└─ 例题和应用
    ↓
目标：检验白板节点数接近原白板50-70%
```

**效果**：从被动检验→主动构建知识体系

---

## 🆘 常见问题 FAQ

### Q1: 必须写综述吗？

**A**: 不是必须，但强烈推荐

- **不带综述**：系统只分析黄色理解（局部信息）
  - 优点：快速生成
  - 缺点：无法识别遗漏主题

- **带综述**：系统分析覆盖率+理解偏差（全局信息）
  - 优点：更针对性的问题
  - 缺点：需要额外15-60分钟

**建议**：第一次可以不写，熟悉后推荐写

---

### Q2: 智能v1和传统检验白板有什么区别？

**A**:

| 特性 | 传统检验白板 | 智能v1 |
|------|-------------|-------|
| 节点类型 | 只有问题 | 问题+策略节点（解释/子问题） |
| 黄色节点 | 手动添加 | 自动生成（永远包含） |
| 策略 | 无 | 智能决策（3种策略） |
| 学习路径 | 需要手动调用Agent | 自动提供学习路径 |
| 适合场景 | 已经理解较好 | 任何理解水平 |

**建议**：初学者用智能v1，熟练后可以用传统

---

### Q3: 生成的策略不合适怎么办？

**A**: 3种方法

1. **手动调整**：删除/修改策略节点
2. **重新生成**：优化黄色理解后重新生成
3. **强制策略**：使用 `/强制策略` 命令（未来功能）

**原因**：系统根据黄色理解决策，如果理解不准确，策略可能不准

---

### Q4: 评分后分数很低怎么办？

**A**: 查看评分报告的智能推荐

```
评分报告：
├─ 总分：42分（红色）
├─ 弱项维度：
│   ├─ Accuracy: 8分 ← 理解有误
│   └─ Completeness: 12分 ← 不完整
└─ 智能推荐：
    └─ /澄清路径 （深度理解）

按照推荐：
1. 使用 /澄清路径 重新学习
2. 阅读生成的1500+词澄清文档
3. 重新填写理解
4. 再次评分
```

---

### Q5: 什么时候停止迭代？

**A**: 满足以下至少3个条件

- ✅ 绿色节点占比≥80%
- ✅ 检验白板节点数接近原白板50-70%
- ✅ 至少生成3个解释文档
- ✅ 至少添加2个原创节点
- ✅ 无红色节点

**补充**：
- 如果是考试复习：80%绿色即可
- 如果是深度学习：建议100%绿色

---

### Q6: 可以在检验白板上使用所有Agent吗？

**A**: 可以！检验白板支持所有12个Agent：

**拆解系列**：
- /基础拆解
- /深度拆解
- /问题拆解

**解释系列**：
- /口语化解释
- /澄清路径
- /对比表
- /记忆锚点
- /四层次解释
- /例题教学

**评分和检验**：
- /评分
- /生成检验问题

**核心**：检验白板不是静态的测试，而是动态的学习环境！

---

## 🎓 最佳实践总结

### ✅ 原白板学习阶段

1. ✅ 认真填写黄色理解（详细+诚实）
2. ✅ 用自己的话，不要复制粘贴
3. ✅ 标注不确定的点
4. ✅ 评分识别红/紫节点

### ✅ 生成智能v1阶段

1. ✅ （推荐）先写综述
2. ✅ 使用 `--overview-file` 参数
3. ✅ 检查策略分布是否合理

### ✅ 填写检验白板阶段

1. ✅ 不看原白板！
2. ✅ 根据策略节点提示填写
3. ✅ 卡住时调用Agent
4. ✅ 主动添加自己的节点

### ✅ 评分和迭代阶段

1. ✅ 评分所有黄色节点
2. ✅ 根据推荐使用Agent
3. ✅ <80分必须改进
4. ✅ 持续迭代直到通过

### ❌ 常见错误

- ❌ 黄色理解为空或太简单
- ❌ 综述边看资料边写
- ❌ 填检验白板边看原白板
- ❌ 评分后不采取行动
- ❌ 只填一遍就不管了

---

## 📁 相关文件位置

```
C:\Users\ROG\托福\
├── yellow_node_analyzer.py       ✅ 理解分析器
├── strategy_generator.py         ✅ 策略生成器
├── generate_ultrathink_review.py ✅ 智能生成器
├── auto_followup_generator.py    ✅ 自动决策器
├── overview_template.md          ✅ 综述模板
├── ULTRATHINK_INTELLIGENT_STRATEGY_COMPLETE.md  ✅ 完成报告
└── 笔记库\
    └── CS70\
        ├── CS70 Lecture1.canvas                    📘 原白板
        ├── CS70 Lecture1-检验白板-v1.canvas         ✅ 智能v1
        ├── CS70 Lecture1-检验白板-v2.canvas         ✅ 迭代v2
        └── 检验进度追踪.json                         ✅ 进度追踪
```

---

## 🔗 相关斜杠命令

- `/智能v1` - 生成智能策略v1检验白板
- `/写综述` - 查看综述模板和使用说明
- `/评分` - 4维度评分黄色理解节点
- `/基础拆解` - 拆解完全不懂的材料
- `/深度拆解` - 深度拆解似懂非懂的概念
- `/澄清路径` - 生成1500+词深度澄清文档
- `/记忆锚点` - 生成类比、故事和记忆口诀
- `/对比表` - 区分易混淆概念

查看所有Agent：`/canvas-agents`

---

## 📞 获取帮助

- **完整文档**：`ULTRATHINK_INTELLIGENT_STRATEGY_COMPLETE.md`
- **综述模板**：`overview_template.md`
- **测试案例**：`笔记库\CS70\CS70 Lecture1-检验白板-v1.canvas`

---

**UltraThink智能策略系统已完全可用！开始你的智能学习之旅吧！** 🚀
