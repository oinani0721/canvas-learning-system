---
name: undo-layout
description: 撤销最近的Canvas布局优化，恢复到优化前的状态
tools: Read, Write, Edit
model: sonnet
---

# Canvas布局撤销命令

## 用法

```bash
/undo-layout [Canvas文件路径] [选项]
```

## 功能

撤销最近的布局优化操作，恢复Canvas到之前的状态：

1. **快照恢复** - 从布局快照恢复节点位置
2. **操作历史** - 支持查看和恢复多个历史版本
3. **安全撤销** - 验证文件完整性后再执行恢复
4. **备份保护** - 撤销前自动创建当前状态备份

## 参数

- `Canvas文件路径`: 要撤销优化的Canvas文件路径（必需）
- `--snapshot-id, -s`: 指定要恢复的快照ID（可选，默认恢复最新快照）
- `--list, -l`: 列出所有可用的布局快照
- `--no-backup`: 跳过撤销前的备份创建

## 示例

```bash
# 撤销最近的布局优化
/undo-layout 离散数学.canvas

# 恢复到指定快照
/undo-layout 离散数学.canvas --snapshot-id snap-20250121-143000

# 列出所有快照
/undo-layout 离散数学.canvas --list
```

## 输出格式

```
Canvas布局撤销完成
📁 文件: 离散数学.canvas
📸 恢复快照: snap-20250121-143000
⏱️ 耗时: 0.3秒

恢复统计:
• 节点位置恢复: 25个
• 布局状态: 已恢复到优化前
• 文件完整性: ✅ 验证通过

备份信息:
📸 新备份ID: snap-20250121-143100
💾 如需重做优化，可使用 /optimize-layout
```

## 快照列表格式

```
可用布局快照 - 离散数学.canvas
📸 snap-20250121-143000 | 布局优化前自动备份 | 2025-01-21 14:30:00
📸 snap-20250121-142000 | 手动创建快照 | 2025-01-21 14:20:00
📸 snap-20250121-141000 | 聚类优化前备份 | 2025-01-21 14:10:00

使用 /undo-layout 离散数学.canvas --snapshot-id [快照ID] 恢复
```

## 注意事项

- 最多保留10个布局快照， older快照会被自动清理
- 撤销操作会创建当前状态的备份
- 确保Canvas文件未被其他程序占用
- 恢复操作完成后建议检查布局是否符合预期