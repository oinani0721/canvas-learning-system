{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "https://canvas-learning-system.com/schemas/canvas-node.schema.json",
  "title": "Canvas Node",
  "description": "Obsidian Canvas节点数据定义 - 支持text, file, group, link四种类型",
  "type": "object",
  "required": ["id", "type", "x", "y"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$",
      "description": "节点唯一标识，UUID格式",
      "examples": ["a1b2c3d4-e5f6-7890-abcd-ef1234567890"]
    },
    "type": {
      "type": "string",
      "enum": ["text", "file", "group", "link"],
      "description": "节点类型: text(文本节点), file(文件节点), group(分组节点), link(链接节点)"
    },
    "text": {
      "type": "string",
      "description": "文本内容，当type=text时必填",
      "examples": ["这是一个概念节点"]
    },
    "file": {
      "type": "string",
      "description": "文件路径，当type=file时必填，相对路径",
      "examples": ["笔记库/oral-explanation-20251104120000.md"]
    },
    "url": {
      "type": "string",
      "format": "uri",
      "description": "链接URL，当type=link时必填",
      "examples": ["https://example.com"]
    },
    "x": {
      "type": "integer",
      "description": "节点X坐标位置",
      "examples": [100]
    },
    "y": {
      "type": "integer",
      "description": "节点Y坐标位置",
      "examples": [200]
    },
    "width": {
      "type": "integer",
      "default": 250,
      "minimum": 50,
      "description": "节点宽度",
      "examples": [250]
    },
    "height": {
      "type": "integer",
      "default": 60,
      "minimum": 30,
      "description": "节点高度",
      "examples": [60]
    },
    "color": {
      "type": "string",
      "enum": ["1", "2", "3", "5", "6"],
      "description": "节点颜色，Obsidian颜色代码: 1=红色(未理解), 2=橙色(部分), 3=黄色(个人理解), 5=绿色(AI验证), 6=紫色(已深入)",
      "examples": ["1"]
    }
  },
  "allOf": [
    {
      "if": {
        "properties": {
          "type": {
            "const": "text"
          }
        }
      },
      "then": {
        "required": ["text"]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "file"
          }
        }
      },
      "then": {
        "required": ["file"]
      }
    },
    {
      "if": {
        "properties": {
          "type": {
            "const": "link"
          }
        }
      },
      "then": {
        "required": ["url"]
      }
    }
  ],
  "examples": [
    {
      "id": "abc123-def456-789012",
      "type": "text",
      "text": "这是一个概念节点",
      "x": 100,
      "y": 200,
      "width": 250,
      "height": 60,
      "color": "1"
    },
    {
      "id": "xyz789-uvw456-123abc",
      "type": "file",
      "file": "笔记库/oral-explanation.md",
      "x": 500,
      "y": 300,
      "width": 300,
      "height": 400
    }
  ],
  "additionalProperties": false
}
