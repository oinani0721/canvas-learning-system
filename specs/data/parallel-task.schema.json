{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://canvas-learning.com/schemas/parallel-task.schema.json",
  "x-source-verification": {
    "verified_at": "2025-11-25T19:15:00Z",
    "sources": [
      {"type": "context7", "library_id": "/json-schema-org/json-schema-spec", "topic": "draft-07 schema validation"},
      {"type": "prd", "section": "FR2.1", "epic": "Epic 10, Epic 11"}
    ]
  },
  "title": "å¹¶è¡Œå¤„ç†ä»»åŠ¡",
  "description": "æ™ºèƒ½å¹¶è¡Œå¤„ç†ç³»ç»Ÿçš„ä»»åŠ¡å®šä¹‰ (Epic 10). Context7 Verified: /json-schema-org/json-schema-spec (draft-07)",
  "type": "object",
  "properties": {
    "task_id": {
      "type": "string",
      "format": "uuid",
      "description": "ä»»åŠ¡å”¯ä¸€æ ‡è¯†"
    },
    "canvas_path": {
      "type": "string",
      "description": "Canvasæ–‡ä»¶è·¯å¾„"
    },
    "status": {
      "type": "string",
      "enum": ["pending", "running", "completed", "partial_failure", "failed", "cancelled"],
      "description": "ä»»åŠ¡çŠ¶æ€"
    },
    "groups": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/NodeGroup"
      },
      "description": "èŠ‚ç‚¹åˆ†ç»„åˆ—è¡¨"
    },
    "total_nodes": {
      "type": "integer",
      "minimum": 0,
      "description": "æ€»èŠ‚ç‚¹æ•°"
    },
    "completed_nodes": {
      "type": "integer",
      "minimum": 0,
      "description": "å·²å®ŒæˆèŠ‚ç‚¹æ•°"
    },
    "failed_nodes": {
      "type": "integer",
      "minimum": 0,
      "description": "å¤±è´¥èŠ‚ç‚¹æ•°"
    },
    "progress_percent": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "è¿›åº¦ç™¾åˆ†æ¯”"
    },
    "started_at": {
      "type": "string",
      "format": "date-time",
      "description": "å¼€å§‹æ—¶é—´"
    },
    "completed_at": {
      "type": "string",
      "format": "date-time",
      "description": "å®Œæˆæ—¶é—´"
    },
    "execution_time_ms": {
      "type": "integer",
      "description": "æ‰§è¡Œæ—¶é—´(ms)"
    },
    "error_message": {
      "type": "string",
      "description": "é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰"
    }
  },
  "definitions": {
    "NodeGroup": {
      "type": "object",
      "description": "èŠ‚ç‚¹åˆ†ç»„å®šä¹‰ - ä¸OpenAPI parallel-api.openapi.yml#NodeGroupå¯¹é½ (Story 33.4 Task 0.1)",
      "properties": {
        "group_id": {
          "type": "string",
          "description": "åˆ†ç»„ID (e.g., 'group-1')",
          "examples": ["group-1", "group-2"]
        },
        "group_name": {
          "type": "string",
          "description": "åˆ†ç»„åç§°ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰",
          "examples": ["å¯¹æ¯”ç±»æ¦‚å¿µ", "å®šä¹‰ç±»æ¦‚å¿µ"]
        },
        "group_emoji": {
          "type": "string",
          "description": "åˆ†ç»„å›¾æ ‡",
          "examples": ["ğŸ“Š", "ğŸ“–", "ğŸ”¬"]
        },
        "nodes": {
          "type": "array",
          "description": "åˆ†ç»„å†…çš„èŠ‚ç‚¹åˆ—è¡¨ï¼ˆåŒ…å«node_idå’Œtextï¼‰",
          "items": {
            "type": "object",
            "properties": {
              "node_id": {
                "type": "string",
                "description": "èŠ‚ç‚¹ID"
              },
              "text": {
                "type": "string",
                "description": "èŠ‚ç‚¹æ–‡æœ¬å†…å®¹"
              }
            },
            "required": ["node_id", "text"]
          }
        },
        "recommended_agent": {
          "type": "string",
          "description": "æ¨èAgentç±»å‹",
          "enum": [
            "basic-decomposition",
            "deep-decomposition",
            "oral-explanation",
            "clarification-path",
            "comparison-table",
            "memory-anchor",
            "four-level-explanation",
            "example-teaching"
          ]
        },
        "confidence": {
          "type": "number",
          "description": "æ¨èç½®ä¿¡åº¦",
          "minimum": 0,
          "maximum": 1,
          "examples": [0.85, 0.72]
        },
        "priority": {
          "type": "string",
          "description": "ä¼˜å…ˆçº§",
          "enum": ["urgent", "high", "medium", "low"],
          "default": "medium"
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "åˆ†ç»„å…³é”®è¯ï¼ˆtop-3é«˜é¢‘è¯ï¼‰",
          "examples": [["é€†å¦å‘½é¢˜", "å……åˆ†æ¡ä»¶", "é€»è¾‘"]]
        },
        "status": {
          "type": "string",
          "enum": ["pending", "running", "completed", "failed"],
          "default": "pending"
        }
      },
      "required": ["group_id", "group_name", "nodes", "recommended_agent"]
    }
  },
  "required": ["task_id", "canvas_path", "status", "groups"]
}
