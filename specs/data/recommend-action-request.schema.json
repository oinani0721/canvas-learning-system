{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://canvas-learning.com/schemas/recommend-action-request.json",
  "x-source-verification": {
    "verified_at": "2026-01-20T04:45:00Z",
    "sources": [
      {"type": "story", "ref": "31.3", "ac": ["31.3.1", "31.3.2"]},
      {"type": "schema", "ref": "scoring-response.schema.json", "topic": "0-100 score scale"}
    ]
  },
  "title": "Recommend Action Request Schema",
  "description": "Story 31.3: Request schema for intelligent action recommendation based on score and history",
  "type": "object",
  "required": ["score", "node_id", "canvas_name"],
  "properties": {
    "score": {
      "type": "integer",
      "description": "Current total score (0-100 scale, consistent with scoring-response.schema.json)",
      "minimum": 0,
      "maximum": 100,
      "examples": [45, 70, 85]
    },
    "node_id": {
      "type": "string",
      "description": "Canvas node ID being evaluated",
      "minLength": 1,
      "examples": ["node-abc123", "yellow-001"]
    },
    "canvas_name": {
      "type": "string",
      "description": "Canvas file name",
      "minLength": 1,
      "examples": ["math.canvas", "discrete-math.canvas"]
    },
    "include_history": {
      "type": "boolean",
      "description": "Whether to include historical score analysis in recommendation",
      "default": true
    },
    "concept": {
      "type": "string",
      "description": "Concept name (optional, used for history lookup)",
      "examples": ["contrapositive", "set theory"]
    }
  },
  "examples": [
    {
      "score": 45,
      "node_id": "node-001",
      "canvas_name": "test.canvas",
      "include_history": true
    },
    {
      "score": 75,
      "node_id": "yellow-abc",
      "canvas_name": "discrete-math.canvas",
      "include_history": true,
      "concept": "contrapositive"
    }
  ]
}
