# Canvas学习系统v2.0 用户使用手册

**版本**: v2.0
**更新日期**: 2025-01-22
**适用对象**: Canvas学习系统所有用户

---

## 📖 目录

1. [系统概述](#系统概述)
2. [快速开始](#快速开始)
3. [基础操作](#基础操作)
4. [高级功能](#高级功能)
5. [颜色系统详解](#颜色系统详解)
6. [学习流程指南](#学习流程指南)
7. [故障排除](#故障排除)
8. [最佳实践](#最佳实践)

---

## 🎯 系统概述

Canvas学习系统v2.0是基于Obsidian Canvas的AI辅助学习平台，采用**费曼学习法**理念，通过**12个专业化Sub-agents**协作完成深度学习循环。

### 核心理念

**"通过输出倒逼输入，通过检验暴露盲区"**

- **输出驱动**: 强制用户用自己的话解释概念
- **多Agent协作**: 提供拆解、解释、评分、检验功能
- **颜色流转**: 可视化学习进度 (红→紫→绿)
- **无纸化检验**: 自动生成检验白板，实现知识复现

### 系统特色

- ✅ **零门槛使用**: 无需编程知识，自然语言操作
- ✅ **智能辅助**: 12个专业Agent提供个性化学习支持
- ✅ **可视化进度**: 颜色系统直观显示学习状态
- ✅ **科学方法**: 基于费曼学习法和认知科学原理
- ✅ **性能优化**: v2.0版本大幅提升响应速度和稳定性

---

## 🚀 快速开始

### 环境要求

- **操作系统**: Windows 10+, macOS 10.15+, Ubuntu 18.04+
- **Python**: 3.9+ (推荐3.11+)
- **Obsidian**: 1.4.0+ with Canvas插件
- **内存**: 最少4GB，推荐8GB+
- **磁盘空间**: 最少5GB，推荐10GB+

### 安装步骤

1. **下载项目文件**
   ```bash
   # 克隆或复制项目到本地
   cd /path/to/your/directory
   ```

2. **运行配置向导**
   ```bash
   python scripts/setup_wizard.py
   ```
   按照向导提示完成系统配置

3. **部署系统**
   ```bash
   python scripts/deploy_production.py
   ```

4. **启动Obsidian**
   - 打开Obsidian应用
   - 加载包含Canvas文件的笔记库
   - 确保Canvas插件已启用

### 验证安装

运行质量验证测试：
```bash
python simple_quality_test.py
```

看到"质量等级: 优秀"表示安装成功。

---

## 📚 基础操作

### 创建学习Canvas

1. **新建Canvas文件**
   - 在Obsidian中按 `Ctrl+N` (Windows) 或 `Cmd+N` (Mac)
   - 选择"Canvas"类型
   - 命名文件，例如：`数学分析.canvas`

2. **添加学习节点**
   - 双击Canvas空白区域创建节点
   - 输入学习内容或问题
   - 设置节点颜色（见颜色系统说明）

### 调用AI助手

使用自然语言命令调用AI助手：

```bash
# 基本格式
"[Canvas文件名] + 操作命令"

# 示例
"@数学分析.canvas 拆解'极限'这个红色节点"
"@离散数学.canvas 评分所有黄色节点"
"@线性代数.canvas 生成口语化解释'特征向量'"
```

### 常用命令

| 命令类型 | 示例 | 功能 |
|---------|------|------|
| 拆解命令 | `拆解这个红色节点` | 将复杂概念分解为基础问题 |
| 评分命令 | `评分所有黄色节点` | 对理解进行4维评分 |
| 解释命令 | `生成口语化解释'概念'` | 生成AI解释文档 |
| 检验命令 | `生成检验白板` | 创建无纸化检验Canvas |

---

## 🎨 颜色系统详解

Canvas学习系统使用颜色编码表示学习状态：

| 颜色代码 | 视觉颜色 | 含义 | 使用场景 | 处理建议 |
|---------|---------|------|---------|---------|
| `"1"` | 🔴 红色 | 不理解/未通过 | 完全不懂的问题 | 使用basic-decomposition拆解 |
| `"2"` | 🟢 绿色 | 完全理解/已通过 | 掌握的知识 | 可以进入检验环节 |
| `"3"` | 🟣 紫色 | 似懂非懂/待检验 | 部分理解的概念 | 使用deep-decomposition深度拆解 |
| `"5"` | 🔵 蓝色 | AI补充解释 | AI生成的解释 | 作为学习参考 |
| `"6"` | 🟡 黄色 | 个人理解输出区 | 用户自己的解释 | 必须与每个问题配套 |

### 颜色流转路径

```
🔴 红色 (完全不懂)
  ↓ 基础拆解 + 填写理解
🟣 紫色 (似懂非懂, 60-79分)
  ↓ 深度拆解 + 补充解释 + 优化理解
🟢 绿色 (完全理解, 80分+)
```

### 设置节点颜色

1. **在Obsidian中**
   - 右键点击节点
   - 选择"颜色"
   - 选择对应颜色

2. **通过AI命令**
   - AI会自动根据评分结果设置颜色
   - 评分≥80分：绿色
   - 评分60-79分：紫色
   - 评分<60分：保持红色

---

## 🎓 学习流程指南

### 新手学习流程

#### 第一步：添加学习内容

1. **创建红色节点**
   ```
   @数学分析.canvas 添加红色节点"极限的严格定义"
   ```

2. **设置节点颜色为红色**
   - 表示这是完全不懂的概念

#### 第二步：基础拆解

1. **调用基础拆解Agent**
   ```
   @数学分析.canvas 拆解"极限的严格定义"这个红色节点
   ```

2. **AI生成引导性问题**
   - 通常生成3-7个基础问题
   - 问题类型：定义型、实例型、对比型、探索型

#### 第三步：填写个人理解

1. **添加黄色节点**
   - 在每个问题下方添加黄色节点
   - 用自己的话回答问题
   - **重要**：不能抄袭或简单复述

#### 第四步：评分验证

1. **调用评分Agent**
   ```
   @数学分析.canvas 评分所有黄色节点
   ```

2. **4维度评分**
   - **准确性** (25分): 理解是否正确
   - **具象性** (25分): 是否有具体例子
   - **完整性** (25分): 理解是否全面
   - **原创性** (25分): 是否有自己的见解

3. **颜色自动流转**
   - ≥80分：绿色 (完全理解)
   - 60-79分：紫色 (似懂非懂)
   - <60分：保持红色 (继续学习)

#### 第五步：补充学习

根据评分结果选择相应操作：

**如果评分<60分 (红色)**：
```
@数学分析.canvas 重新拆解"极限的严格定义"，更细一些
```

**如果评分60-79分 (紫色)**：
```
@数学分析.canvas 深度拆解"极限的严格定义"
@数学分析.canvas 生成澄清路径"极限的严格定义"
@数学分析.canvas 生成口语化解释"极限的严格定义"
```

### 进阶学习技巧

#### 使用多种解释Agent

1. **口语化解释** 🗣️
   ```
   @数学分析.canvas 生成口语化解释"极限"
   ```
   - 800-1200词的教授式讲解
   - 包含背景、核心、例子、误区

2. **四层次解释** 🎯
   ```
   @数学分析.canvas 生成四层次解释"极限"
   ```
   - 新手→进阶→专家→创新四个层次

3. **对比表** 📊
   ```
   @数学分析.canvas 生成对比表:极限 vs 连续
   ```
   - 区分易混淆概念

4. **记忆锚点** ⚓
   ```
   @数学分析.canvas 生成记忆锚点"极限"
   ```
   - 生动类比、故事、口诀

#### 批量操作

1. **批量评分**
   ```
   @数学分析.canvas 评分所有黄色节点
   ```

2. **批量拆解**
   ```
   @数学分析.canvas 拆解所有红色节点
   ```

### 检验白板使用

#### 创建检验白板

1. **生成检验白板**
   ```
   @数学分析.canvas 生成检验白板
   ```

2. **系统自动操作**
   - 提取所有红色和紫色节点
   - 生成检验问题
   - 创建新的Canvas文件
   - 文件名格式：`原文件名-检验白板-日期.canvas`

#### 检验学习流程

1. **填写理解 (不看原资料)**
   - 打开检验白板
   - 逐个填写黄色节点
   - 暴露理解盲区

2. **动态学习**
   - 在检验白板上使用所有AI命令
   - 填写理解 → 评分 → 拆解 → 解释 → 重复

3. **停止条件** (满足3个即可):
   - ✅ 绿色占比 ≥ 80%
   - ✅ 节点数量接近原白板的50-70%
   - ✅ 至少生成3个解释文档
   - ✅ 至少添加2个原创节点
   - ✅ 无红色节点

---

## 🛠️ 高级功能

### 个性化配置

#### 调整评分标准

编辑 `config/performance_benchmarks.yaml`:
```yaml
scoring:
  accuracy_threshold: 20      # 准确性分数线
  imagery_threshold: 18       # 具象性分数线
  completeness_threshold: 22  # 完整性分数线
  originality_threshold: 19   # 原创性分数线
```

#### 自定义节点样式

编辑 `config/production.yaml`:
```yaml
canvas:
  default_font_size: 14
  node_spacing_x: 400
  node_spacing_y: 200
  theme: "default"  # default, dark, high_contrast
```

### 性能优化

#### 启用缓存模式

```yaml
deployment:
  cache_size: 512        # 缓存大小(MB)
  performance_mode: true # 性能优化模式
```

#### 并行处理配置

```yaml
deployment:
  max_workers: 10        # 最大并发Agent数
  enable_caching: true   # 启用结果缓存
```

### 监控和诊断

#### 查看系统状态

```bash
python scripts/system_monitor.py
```

#### 运行性能测试

```bash
python -m pytest tests/performance/ -v
```

#### 生成质量报告

```bash
python simple_quality_test.py
```

---

## 🔧 故障排除

### 常见问题

#### Q1: AI命令不响应

**症状**: 输入命令后没有反应

**解决方案**:
1. 检查Canvas文件是否正确保存
2. 确认文件名格式正确：`@文件名.后缀 命令`
3. 检查Python环境是否正常运行
4. 查看错误日志：`logs/error_log.log`

#### Q2: 评分结果不合理

**症状**: 评分分数与预期不符

**解决方案**:
1. 确保黄色节点内容是原创的
2. 检查是否包含具体例子
3. 确保理解表述清晰完整
4. 尝试重新评分

#### Q3: 系统响应缓慢

**症状**: AI命令执行时间过长

**解决方案**:
1. 检查系统资源使用情况
2. 启用性能优化模式
3. 增加缓存大小
4. 减少并发Agent数量

#### Q4: 文件保存失败

**症状**: Canvas文件无法保存

**解决方案**:
1. 检查文件权限
2. 确保磁盘空间充足
3. 检查文件是否被其他程序占用
4. 尝试另存为新文件

### 错误代码

| 错误代码 | 含义 | 解决方案 |
|---------|------|---------|
| E001 | Canvas文件不存在 | 检查文件路径和名称 |
| E002 | 节点ID重复 | 重新创建节点 |
| E003 | 权限不足 | 检查文件权限设置 |
| E004 | 内存不足 | 重启系统或增加内存 |
| E005 | 网络连接失败 | 检查网络设置 |

### 获取帮助

1. **查看日志**
   - 系统日志: `logs/system_monitoring.log`
   - 错误日志: `logs/error_log.log`
   - 性能日志: `logs/performance.log`

2. **运行诊断工具**
   ```bash
   python scripts/diagnostic_tool.py
   ```

3. **重置系统**
   ```bash
   python scripts/reset_system.py
   ```

---

## 💡 最佳实践

### 学习习惯建议

#### 1. 每日学习节奏

- **新手**: 每天处理2-3个红色节点
- **进阶**: 每天处理5-8个节点，混合颜色
- **专家**: 每天进行一次检验白板练习

#### 2. 理解填写原则

- **用自己的话**: 避免直接复制原文
- **具体化**: 包含至少一个具体例子
- **联系实际**: 结合已有知识或经验
- **承认不足**: 诚实标记不懂的部分

#### 3. 颜色管理策略

- **红色节点**: 优先处理，不要积累超过10个
- **黄色节点**: 及时填写，不要拖延
- **紫色节点**: 主动深化理解，不要满足于表面
- **绿色节点**: 定期检验，防止遗忘

### Canvas组织技巧

#### 1. 节点布局

```
[红色问题节点] → [黄色理解节点] → [蓝色AI解释]
      ↓
[生成的子问题] → [黄色理解] → [蓝色解释]
```

#### 2. 主题分组

- 按章节或主题分组节点
- 使用箭头连接相关概念
- 留出足够的空白区域

#### 3. 版本管理

- 定期备份Canvas文件
- 保存不同学习阶段的版本
- 使用日期标记重要版本

### 系统优化建议

#### 1. 性能优化

- 定期清理缓存：`python scripts/clear_cache.py`
- 优化配置参数
- 监控系统资源使用

#### 2. 质量保证

- 定期运行质量测试
- 检查学习进度统计
- 调整学习策略

#### 3. 数据安全

- 启用自动备份
- 定期导出重要数据
- 设置合理的备份间隔

---

## 📞 技术支持

### 联系方式

- **项目文档**: `docs/` 目录
- **问题反馈**: 通过GitHub Issues
- **更新日志**: `CHANGELOG.md`

### 系统信息查询

```bash
# 查看系统版本
python scripts/version_info.py

# 查看配置状态
python scripts/config_status.py

# 查看性能统计
python scripts/performance_stats.py
```

---

## 📄 附录

### A. 快速参考卡

#### 常用命令速查

| 操作 | 命令示例 |
|------|---------|
| 基础拆解 | `@文件.canvas 拆解"概念"` |
| 深度拆解 | `@文件.canvas 深度拆解"概念"` |
| 评分 | `@文件.canvas 评分所有黄色节点` |
| 口语解释 | `@文件.canvas 生成口语化解释"概念"` |
| 澄清路径 | `@文件.canvas 生成澄清路径"概念"` |
| 对比表 | `@文件.canvas 生成对比表:概念1 vs 概念2` |
| 记忆锚点 | `@文件.canvas 生成记忆锚点"概念"` |
| 四层次解释 | `@文件.canvas 生成四层次解释"概念"` |
| 例题教学 | `@文件.canvas 生成例题教学"概念"` |
| 检验白板 | `@文件.canvas 生成检验白板` |

#### 评分标准速查

| 分数范围 | 颜色 | 含义 | 建议操作 |
|---------|------|------|---------|
| 80-100 | 🟢 绿色 | 完全理解 | 进入检验环节 |
| 60-79 | 🟣 紫色 | 似懂非懂 | 深度拆解+补充解释 |
| 0-59 | 🔴 红色 | 不理解 | 重新基础拆解 |

### B. 学习资源

#### 推荐学习流程

1. **预习阶段**: 添加红色节点，标记不懂概念
2. **学习阶段**: 拆解→理解→评分→补充学习的循环
3. **检验阶段**: 创建检验白板，无纸化复现
4. **巩固阶段**: 定期回顾，防止遗忘

#### 学习效果评估标准

- **优秀**: 90%以上绿色节点，能独立创建检验白板
- **良好**: 70%以上绿色节点，能完成大部分理解任务
- **及格**: 50%以上绿色节点，基本掌握核心概念
- **需改进**: 50%以下绿色节点，需要重新学习方法

---

**最后更新**: 2025-01-22
**文档版本**: v2.0
**维护团队**: Canvas学习系统开发团队