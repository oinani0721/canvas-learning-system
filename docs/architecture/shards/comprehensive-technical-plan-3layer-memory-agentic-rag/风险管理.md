# 风险管理

### 风险矩阵

| 风险 | 概率 | 影响 | 缓解措施 | 应急方案 |
|------|------|------|---------|---------|
| **R1: LanceDB迁移数据丢失** | 低 (10%) | 高 | 迁移前备份ChromaDB | 从备份恢复 |
| **R2: Agentic RAG延迟超标** | 中 (30%) | 中 | 缓存 + 索引优化 | 降级为Simple RAG |
| **R3: Cohere API成本超预算** | 低 (15%) | 中 | CostMonitor监控 | 切换Pure Local |
| **R4: Neo4j性能瓶颈** | 中 (25%) | 高 | 索引优化 + 硬件升级 | 限制图遍历深度 |
| **R5: FSRS算法不准确** | 中 (30%) | 低 | A/B测试验证 | 使用固定间隔 |

### 质量门禁

**必须满足的条件才能上线**:
- ✅ 回归测试100%通过 (360/360)
- ✅ P95延迟 <400ms
- ✅ 检验白板准确率 ≥80% (目标85%)
- ✅ 成本监控正常 (预测年度成本 <$60)
- ✅ 24小时稳定运行无崩溃

### 回滚预案

**触发条件**:
- 准确率下降 >10% (vs 上线前)
- P95延迟 >600ms
- 每日成本 >$0.5

**回滚步骤**:
1. 切换到Simple RAG模式 (保留Agentic RAG代码)
2. 恢复ChromaDB备份 (如果LanceDB有问题)
3. 关闭Cohere API调用 (使用Pure Local)
4. 回退到Git上一个稳定版本

**回滚时间**: <4小时

---
