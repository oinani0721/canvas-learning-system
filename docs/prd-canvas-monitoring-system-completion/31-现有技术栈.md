# 3.1 现有技术栈

## 3.1.1 语言与运行时

- **Python 3.12.7**（已安装并验证）
- **编码要求**：所有Python文件必须声明`# -*- coding: utf-8 -*-`
- **虚拟环境**：建议使用venv或conda隔离依赖

## 3.1.2 核心框架与库

**已安装依赖**：

| 库名 | 版本 | 用途 |
|------|------|------|
| watchdog | 4.0+ | 文件系统监控 |
| psutil | 5.9+ | 系统性能监控 |
| asyncio | 标准库 | 异步处理核心 |
| threading | 标准库 | 防抖管理器 |
| sqlite3 | 标准库 | 冷数据存储 |
| json | 标准库 | 热数据存储和Canvas解析 |
| pytest | 7.0+ | 测试框架 |

## 3.1.3 现有架构

**Canvas Learning System架构**：

```
canvas_utils.py (~150KB)
├── Layer 1: CanvasJSONOperator
│   ├── read_canvas(file_path) -> dict
│   ├── write_canvas(file_path, data) -> bool
│   ├── add_node(data, node) -> str
│   ├── find_node_by_id(data, node_id) -> dict
│   └── add_edge(data, edge) -> str
│
├── Layer 2: CanvasBusinessLogic
│   ├── v1.1布局算法（黄色节点对齐）
│   ├── extract_verification_nodes(data) -> list
│   ├── cluster_questions_by_topic(questions) -> dict
│   └── generate_review_canvas_file(...)
│
└── Layer 3: CanvasOrchestrator
    ├── generate_verification_questions_with_agent(...)
    └── 完整操作工作流
```

**监控系统现有架构**：

```
canvas_progress_tracker/
├── __init__.py
├── canvas_monitor_engine.py
│   ├── CanvasMonitorEngine (核心引擎)
│   ├── DebounceManager (防抖管理器)
│   ├── CanvasFileHandler (文件事件处理器)
│   ├── _detect_canvas_changes() ✅ 已实现但未调用
│   └── callback lists ✅ 存在但为空
│
└── system_integration.py (空文件)
```

**12个AI Agents**：

位置：`.claude/agents/`
- canvas-orchestrator.md
- basic-decomposition.md
- deep-decomposition.md
- oral-explanation.md
- clarification-path.md
- comparison-table.md
- memory-anchor.md
- four-level-explanation.md
- example-teaching.md
- scoring-agent.md
- verification-question-agent.md
- question-decomposition.md

---
