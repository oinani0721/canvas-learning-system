# Sub-agentåˆ›å»ºæŒ‡å—

**ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-10-14
**é€‚ç”¨èŒƒå›´**: Canvaså­¦ä¹ ç³»ç»Ÿçš„13ä¸ªSub-agentå®šä¹‰æ–‡ä»¶

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
3. [Agentå®šä¹‰æ–‡ä»¶è§„èŒƒ](#agentå®šä¹‰æ–‡ä»¶è§„èŒƒ)
4. [å‘½åè§„èŒƒ](#å‘½åè§„èŒƒ)
5. [YAML Frontmatterè§„èŒƒ](#yaml-frontmatterè§„èŒƒ)
6. [è¾“å…¥è¾“å‡ºæ ¼å¼è§„èŒƒ](#è¾“å…¥è¾“å‡ºæ ¼å¼è§„èŒƒ)
7. [System Promptç¼–å†™æŒ‡å—](#system-promptç¼–å†™æŒ‡å—)
8. [å·¥å…·æƒé™é€‰æ‹©æŒ‡å—](#å·¥å…·æƒé™é€‰æ‹©æŒ‡å—)
9. [éªŒè¯å’Œæµ‹è¯•](#éªŒè¯å’Œæµ‹è¯•)
10. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¦‚è¿°

Canvaså­¦ä¹ ç³»ç»Ÿé‡‡ç”¨13ä¸ªä¸“ä¸šSub-agentæ¶æ„ï¼Œæ¯ä¸ªAgentè´Ÿè´£ç‰¹å®šçš„å­¦ä¹ æ”¯æŒåŠŸèƒ½ã€‚æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•ä½¿ç”¨ç»Ÿä¸€çš„æ¨¡æ¿åˆ›å»ºAgentå®šä¹‰æ–‡ä»¶ã€‚

### Agentæ¶æ„

```
ç”¨æˆ·è¾“å…¥ â†’ Canvas-Orchestratorï¼ˆä¸»æ§Agentï¼‰
            â†“
  â”œâ†’ 3ä¸ªæ‹†è§£Agentï¼ˆbasic/deep/problem-decompositionï¼‰
  â”œâ†’ 6ä¸ªè§£é‡ŠAgentï¼ˆoral/clarification/comparison/memory/four-level/exampleï¼‰
  â”œâ†’ 1ä¸ªè¯„åˆ†Agentï¼ˆscoring-agentï¼‰
  â”œâ†’ 1ä¸ªæ£€éªŒAgentï¼ˆreview-verificationï¼‰
  â””â†’ 1ä¸ªå·¥å…·Agentï¼ˆcanvas-operationsï¼‰
```

**é‡è¦åŸåˆ™**ï¼š
- Sub-agentsä¹‹é—´ä¸ç›´æ¥ç›¸äº’è°ƒç”¨
- æ‰€æœ‰è°ƒç”¨éƒ½é€šè¿‡Canvas-Orchestratoråè°ƒ
- æ¯ä¸ªAgentæœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºJSONæ ¼å¼

---

## å¿«é€Ÿå¼€å§‹

### 5æ­¥åˆ›å»ºæ–°Agent

1. **å¤åˆ¶æ¨¡æ¿æ–‡ä»¶**
   ```bash
   cp .bmad-core/templates/sub-agent-template.md .claude/agents/{agent-name}.md
   ```

2. **å¡«å……å ä½ç¬¦**
   - æ›¿æ¢æ‰€æœ‰ `{{å ä½ç¬¦}}` ä¸ºå®é™…å†…å®¹
   - ç¡®ä¿æ–‡ä»¶åä¸ `name:` å­—æ®µä¸€è‡´

3. **å®šä¹‰è¾“å…¥è¾“å‡ºæ ¼å¼**
   - ä½¿ç”¨JSONæ ¼å¼ï¼ˆsnake_caseå‘½åï¼‰
   - æ˜ç¡®æ ‡æ³¨å¿…éœ€å­—æ®µå’Œå¯é€‰å­—æ®µ

4. **ç¼–å†™System Prompt**
   - åŒ…å«ï¼šä»»åŠ¡ã€è§„åˆ™ã€ç¤ºä¾‹ã€è´¨é‡æ ‡å‡†
   - è‡³å°‘æä¾›1ä¸ªå®Œæ•´çš„è¾“å…¥/è¾“å‡ºç¤ºä¾‹

5. **éªŒè¯å’Œæµ‹è¯•**
   ```bash
   # éªŒè¯YAMLæ ¼å¼
   python scripts/validate_agent_yaml.py .claude/agents/{agent-name}.md

   # éªŒè¯Markdownè¯­æ³•
   markdownlint .claude/agents/{agent-name}.md
   ```

---

## Agentå®šä¹‰æ–‡ä»¶è§„èŒƒ

### æ–‡ä»¶ä½ç½®

```
.claude/agents/{agent-name}.md
```

**ç¤ºä¾‹**ï¼š
- `.claude/agents/basic-decomposition.md`
- `.claude/agents/scoring-agent.md`
- `.claude/agents/canvas-operations.md`

### æ–‡ä»¶ç»“æ„

```markdown
---
# YAML Frontmatter
name: agent-name
description: "One-line description"
tools: Read, Write, Edit
model: sonnet
---

# Agentä¸­æ–‡åç§°

## Role
[è§’è‰²æè¿°ï¼Œ2-3å¥è¯]

## Input Format
[JSONæ ¼å¼çš„è¾“å…¥å®šä¹‰]

## Output Format
[JSONæ ¼å¼çš„è¾“å‡ºå®šä¹‰]

## System Prompt

### ä½ çš„ä»»åŠ¡
[ä»»åŠ¡æè¿°]

### è§„åˆ™
[è¡Œä¸ºè§„åˆ™åˆ—è¡¨]

### ç¤ºä¾‹
[å®Œæ•´çš„è¾“å…¥/è¾“å‡ºç¤ºä¾‹]

### è´¨é‡æ ‡å‡†
[è¾“å‡ºè´¨é‡è¯„åˆ¤æ ‡å‡†]
```

---

## å‘½åè§„èŒƒ

### æ–‡ä»¶åè§„èŒƒ

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
|------|------|------|
| **æ ¼å¼** | kebab-case | `basic-decomposition.md` |
| **ä½¿ç”¨** | å°å†™å­—æ¯ + è¿å­—ç¬¦ï¼ˆ-ï¼‰ | `scoring-agent.md` |
| **ç¦æ­¢** | ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€å¤§å†™å­—æ¯ã€ç©ºæ ¼ | âŒ `Basic_Decomposition.md` |

### YAML nameå­—æ®µ

```yaml
---
name: basic-decomposition  # å¿…é¡»ä¸æ–‡ä»¶åä¸€è‡´ï¼ˆå»æ‰.mdï¼‰
---
```

### è°ƒç”¨æ—¶åç§°

```
"Use the basic-decomposition subagent to ..."
```

**âš ï¸ å…³é”®çº¦æŸ**ï¼š
- æ–‡ä»¶åã€YAML nameå­—æ®µã€è°ƒç”¨æ—¶åç§°å¿…é¡»å®Œå…¨ä¸€è‡´
- ä½¿ç”¨è¿å­—ç¬¦ï¼ˆ-ï¼‰è€Œéä¸‹åˆ’çº¿ï¼ˆ_ï¼‰
- å…¨éƒ¨å°å†™å­—æ¯

---

## YAML Frontmatterè§„èŒƒ

### å¿…éœ€å­—æ®µ

```yaml
---
name: agent-name           # Agentåç§°ï¼ˆkebab-caseï¼‰
description: "ç®€çŸ­æè¿°"     # <80å­—ç¬¦ï¼Œè¯´æ˜æ ¸å¿ƒåŠŸèƒ½
tools: Read, Write, Edit   # æ ¹æ®Agentéœ€æ±‚é€‰æ‹©
model: sonnet             # ä½¿ç”¨ claude-sonnet-4.5
---
```

### å­—æ®µè¯´æ˜

#### `name` - Agentåç§°

- **æ ¼å¼**ï¼škebab-caseï¼ˆå°å†™å­—æ¯ + è¿å­—ç¬¦ï¼‰
- **è¦æ±‚**ï¼šå¿…é¡»ä¸æ–‡ä»¶åä¸€è‡´ï¼ˆå»æ‰ `.md` åç¼€ï¼‰
- **ç¤ºä¾‹**ï¼š`basic-decomposition`, `scoring-agent`

#### `description` - ç®€çŸ­æè¿°

- **é•¿åº¦**ï¼š<80å­—ç¬¦
- **å†…å®¹**ï¼šç®€æ´æ˜äº†åœ°è¯´æ˜Agentçš„æ ¸å¿ƒåŠŸèƒ½
- **è¯­è¨€**ï¼šè‹±æ–‡
- **ç¤ºä¾‹**ï¼š
  - `"Decomposes difficult materials into basic guiding questions"`
  - `"Evaluates user understanding quality with scoring rubric"`
  - `"Creates verification canvas for spaced repetition review"`

#### `tools` - å·¥å…·æƒé™

- **æ ¼å¼**ï¼šé€—å·åˆ†éš”çš„å·¥å…·åˆ—è¡¨
- **å¯é€‰å€¼**ï¼š`Read`, `Write`, `Edit`, `Bash`
- **é€‰æ‹©æŒ‡å—**ï¼šå‚è§ [å·¥å…·æƒé™é€‰æ‹©æŒ‡å—](#å·¥å…·æƒé™é€‰æ‹©æŒ‡å—)

#### `model` - æ¨¡å‹é€‰æ‹©

- **å›ºå®šå€¼**ï¼š`sonnet`
- **è¯´æ˜**ï¼šä½¿ç”¨ claude-sonnet-4.5 æ¨¡å‹

---

## è¾“å…¥è¾“å‡ºæ ¼å¼è§„èŒƒ

### JSONæ ¼å¼è§„èŒƒ

**ä¸€è‡´æ€§åŸåˆ™**ï¼š
- ä½¿ç”¨snake_caseå‘½åï¼ˆå¦‚ `sub_questions`, `user_understanding`ï¼‰
- å¸ƒå°”å€¼ä½¿ç”¨true/falseï¼ˆå°å†™ï¼‰
- å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·
- ä¸ä½¿ç”¨å°¾éƒ¨é€—å·

### è¾“å…¥æ ¼å¼å®šä¹‰

```json
{
  "field_name": "value",
    // å­—æ®µè¯´æ˜ï¼šè§£é‡Šå­—æ®µå«ä¹‰
    // ç±»å‹ï¼šstring|number|boolean|array|object
    // å¿…éœ€æ€§ï¼šå¿…éœ€|å¯é€‰
    // é»˜è®¤å€¼ï¼šï¼ˆå¦‚æœæœ‰ï¼‰
}
```

**å­—æ®µè¯´æ˜è¡¨æ ¼**ï¼š

| å­—æ®µå | ç±»å‹ | å¿…éœ€æ€§ | è¯´æ˜ |
|--------|------|--------|------|
| `field_name` | string | å¿…éœ€ | å­—æ®µç”¨é€”è¯´æ˜ |

### è¾“å‡ºæ ¼å¼å®šä¹‰

```json
{
  "output_field": [
    {
      "nested_field": "value"
    }
  ]
}
```

**è¾“å‡ºå­—æ®µè¯´æ˜è¡¨æ ¼**ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `output_field` | array | å­—æ®µç”¨é€”è¯´æ˜ |

### JSONè¾“å‡ºçº¦æŸ

**âš ï¸ é‡è¦çº¦æŸ**ï¼š
- åªè¿”å›JSONæ ¼å¼çš„æ•°æ®ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡æœ¬
- ä¸è¦ä½¿ç”¨Markdownä»£ç å—ï¼ˆ` ```json `ï¼‰åŒ…è£¹JSON
- ç¡®ä¿JSONæ ¼å¼æ­£ç¡®ï¼ˆå­—æ®µåä½¿ç”¨åŒå¼•å·ï¼Œå¸ƒå°”å€¼å°å†™true/falseï¼Œæ— å°¾éƒ¨é€—å·ï¼‰
- æ‰€æœ‰å­—æ®µåä½¿ç”¨snake_caseå‘½å

---

## System Promptç¼–å†™æŒ‡å—

### æ ‡å‡†ç»“æ„

System Promptå¿…é¡»åŒ…å«ä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ï¼š

```markdown
## System Prompt

### ä½ çš„ä»»åŠ¡
[2-3å¥è¯æ˜ç¡®Agentçš„èŒè´£]

### è§„åˆ™
1. [è§„åˆ™1 - å…·ä½“ã€å¯æ“ä½œçš„çº¦æŸ]
2. [è§„åˆ™2 - å…·ä½“ã€å¯æ“ä½œçš„çº¦æŸ]
...

### ç¤ºä¾‹

**è¾“å…¥ç¤ºä¾‹**:
```json
{...}
```

**è¾“å‡ºç¤ºä¾‹**:
```json
{...}
```

**ç¤ºä¾‹è¯´æ˜**ï¼š
[è§£é‡Šç¤ºä¾‹å±•ç¤ºäº†ä»€ä¹ˆåœºæ™¯]

### è´¨é‡æ ‡å‡†
- [æ ‡å‡†1 - å¯éªŒè¯çš„è¾“å‡ºè´¨é‡è¦æ±‚]
- [æ ‡å‡†2 - å¯éªŒè¯çš„è¾“å‡ºè´¨é‡è¦æ±‚]
...
```

### 1. ä½ çš„ä»»åŠ¡

**å†…å®¹**ï¼š2-3å¥è¯æ˜ç¡®Agentçš„èŒè´£

**è¦ç‚¹**ï¼š
- è¯´æ˜è¾“å…¥æ˜¯ä»€ä¹ˆï¼Œè¾“å‡ºæ˜¯ä»€ä¹ˆ
- æ˜ç¡®æœåŠ¡å¯¹è±¡ï¼ˆç”¨æˆ·/å…¶ä»–Agent/ç³»ç»Ÿï¼‰
- å¼ºè°ƒæ ¸å¿ƒç›®æ ‡

**ç¤ºä¾‹**ï¼š
```markdown
### ä½ çš„ä»»åŠ¡

å°†ç”¨æˆ·æä¾›çš„éš¾æ‡‚ææ–™æ‹†è§£ä¸º3-7ä¸ªç®€å•ã€å¼•å¯¼æ€§çš„å­é—®é¢˜ã€‚æ¯ä¸ªé—®é¢˜åº”è¯¥æ˜“äºå›ç­”ï¼Œå¸®åŠ©ç”¨æˆ·ä»"å®Œå…¨ä¸ç†è§£"é€æ­¥è¿‡æ¸¡åˆ°"æœ‰åˆæ­¥ç†è§£"ã€‚è¾“å‡ºç»“æœå°†ç”¨äºåœ¨Canvasç™½æ¿ä¸Šåˆ›å»ºé—®é¢˜èŠ‚ç‚¹ã€‚
```

### 2. è§„åˆ™

**å†…å®¹**ï¼š5-10æ¡å…·ä½“çš„è¡Œä¸ºè§„åˆ™å’Œçº¦æŸ

**è¦ç‚¹**ï¼š
- ä½¿ç”¨ç¼–å·åˆ—è¡¨ï¼ˆ1, 2, 3...ï¼‰
- è§„åˆ™åº”å…·ä½“ã€å¯æ“ä½œã€å¯éªŒè¯
- æ¶µç›–ï¼šå†…å®¹è¦æ±‚ã€æ ¼å¼è¦æ±‚ã€æ•°é‡é™åˆ¶ã€è¯­è¨€é£æ ¼ç­‰

**ç¤ºä¾‹**ï¼š
```markdown
### è§„åˆ™

1. **é—®é¢˜æ•°é‡**ï¼šç”Ÿæˆ3-7ä¸ªå­é—®é¢˜ï¼ˆæ ¹æ®ææ–™å¤æ‚åº¦ï¼‰
2. **éš¾åº¦å±‚æ¬¡**ï¼šåŸºç¡€é—®é¢˜ï¼Œæ˜“äºå›ç­”ï¼Œé¿å…ä¸“ä¸šæœ¯è¯­
3. **å¼•å¯¼æ€§**ï¼šé—®é¢˜é€æ­¥é€’è¿›ï¼Œä¸è·³è·ƒï¼Œç¬¦åˆè®¤çŸ¥è§„å¾‹
4. **è¯­è¨€é£æ ¼**ï¼šç®€å•æ˜äº†ï¼Œå£è¯­åŒ–ï¼Œç¬¦åˆä¸­æ–‡ä¹ æƒ¯
5. **é—®é¢˜ç±»å‹**ï¼šä¼˜å…ˆä½¿ç”¨å®šä¹‰å‹ã€å®ä¾‹å‹é—®é¢˜ï¼Œé¿å…æŠ½è±¡æ¦‚å¿µ
6. **æç¤ºå¼•å¯¼**ï¼šä¸ºéš¾ç‚¹é—®é¢˜æä¾›"ğŸ’¡ æç¤º"ï¼Œä½†ä¸ç›´æ¥ç»™å‡ºç­”æ¡ˆ
7. **è¦†ç›–æ ¸å¿ƒ**ï¼šç¡®ä¿æ‰€æœ‰æ ¸å¿ƒæ¦‚å¿µéƒ½æœ‰å¯¹åº”é—®é¢˜
```

### 3. ç¤ºä¾‹

**å†…å®¹**ï¼šè‡³å°‘1ä¸ªå®Œæ•´çš„è¾“å…¥/è¾“å‡ºç¤ºä¾‹

**è¦ç‚¹**ï¼š
- ä½¿ç”¨çœŸå®çš„ã€å…·æœ‰ä»£è¡¨æ€§çš„æ•°æ®
- è¾“å…¥å’Œè¾“å‡ºå¿…é¡»å®Œæ•´ã€æ ¼å¼æ­£ç¡®
- ç¤ºä¾‹åº”å±•ç¤ºAgentçš„å…¸å‹ä½¿ç”¨åœºæ™¯
- æ·»åŠ "ç¤ºä¾‹è¯´æ˜"è§£é‡Šç¤ºä¾‹çš„ç›®çš„

**ç¤ºä¾‹**ï¼š
```markdown
### ç¤ºä¾‹

**è¾“å…¥ç¤ºä¾‹**:
```json
{
  "material_content": "é€†å¦å‘½é¢˜ï¼šå¦‚æœåŸå‘½é¢˜æ˜¯'è‹¥påˆ™q'ï¼Œåˆ™é€†å¦å‘½é¢˜æ˜¯'è‹¥éqåˆ™ép'ã€‚",
  "topic": "é€†å¦å‘½é¢˜",
  "user_understanding": null
}
```

**è¾“å‡ºç¤ºä¾‹**:
```json
{
  "sub_questions": [
    {
      "text": "åŸå‘½é¢˜'è‹¥påˆ™q'æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ",
      "type": "å®šä¹‰å‹",
      "difficulty": "åŸºç¡€",
      "guidance": "ğŸ’¡ æç¤ºï¼šä»æ—¥å¸¸ç”Ÿæ´»çš„å› æœå…³ç³»æƒ³èµ·"
    }
  ],
  "total_count": 1,
  "has_guidance": true
}
```

**ç¤ºä¾‹è¯´æ˜**ï¼š
è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•æ‹†è§£"é€†å¦å‘½é¢˜"è¿™ä¸ªæŠ½è±¡çš„é€»è¾‘å­¦æ¦‚å¿µï¼Œä»åŸºæœ¬æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥å¼•å¯¼ç†è§£ã€‚
```

### 4. è´¨é‡æ ‡å‡†

**å†…å®¹**ï¼š5-8æ¡è¾“å‡ºè´¨é‡çš„è¯„åˆ¤æ ‡å‡†

**è¦ç‚¹**ï¼š
- ä½¿ç”¨æ¸…å•å½¢å¼ï¼ˆ- [æ ‡å‡†]ï¼‰
- æ ‡å‡†åº”å¯éªŒè¯ã€å¯é‡åŒ–ï¼ˆå°½å¯èƒ½ï¼‰
- æ¶µç›–ï¼šå‡†ç¡®æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€æ ¼å¼æ­£ç¡®æ€§ç­‰

**ç¤ºä¾‹**ï¼š
```markdown
### è´¨é‡æ ‡å‡†

- é—®é¢˜æ¸…æ™°æ˜“æ‡‚ï¼Œæ— æ­§ä¹‰
- å¼•å¯¼æ€§å¼ºï¼Œç¬¦åˆè®¤çŸ¥è§„å¾‹
- è¦†ç›–ææ–™çš„æ ¸å¿ƒæ¦‚å¿µ
- æœ‰å…·ä½“çš„ç”Ÿæ´»åŒ–ç¤ºä¾‹æˆ–ç±»æ¯”
- éš¾åº¦é€‚ä¸­ï¼Œç”¨æˆ·èƒ½å¤Ÿå›ç­”
- é—®é¢˜ä¹‹é—´æœ‰é€»è¾‘é€’è¿›å…³ç³»
- æç¤ºæ°å½“ï¼Œä¸ç›´æ¥ç»™å‡ºç­”æ¡ˆ
- JSONæ ¼å¼æ­£ç¡®ï¼Œå­—æ®µå®Œæ•´
```

---

## å·¥å…·æƒé™é€‰æ‹©æŒ‡å—

### å¯ç”¨å·¥å…·

| å·¥å…· | ç”¨é€” | è¯´æ˜ |
|------|------|------|
| **Read** | è¯»å–æ–‡ä»¶ | è¯»å–Canvasæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€ç¬”è®°æ–‡ä»¶ |
| **Write** | åˆ›å»ºæ–‡ä»¶ | åˆ›å»ºæ–°çš„.mdç¬”è®°æ–‡ä»¶ |
| **Edit** | ç¼–è¾‘æ–‡ä»¶ | ç¼–è¾‘ç°æœ‰æ–‡ä»¶å†…å®¹ |
| **Bash** | æ‰§è¡Œè„šæœ¬ | è°ƒç”¨canvas_utils.py Pythonè„šæœ¬ |

### Agentç±»å‹ä¸æƒé™å¯¹åº”

| Agentç±»å‹ | æ¨ètools | è¯´æ˜ | ç¤ºä¾‹Agent |
|----------|----------|------|----------|
| **ä¸»æ§Agent** | Read, Write, Edit, Bash | éœ€è¦å®Œæ•´æƒé™åè°ƒæ‰€æœ‰æ“ä½œ | canvas-orchestrator |
| **æ‹†è§£Agent** | Read | åªéœ€è¯»å–Canvasç†è§£ä¸Šä¸‹æ–‡ | basic-decomposition, deep-decomposition |
| **è§£é‡ŠAgent** | Read, Write | éœ€è¦åˆ›å»º.mdç¬”è®°æ–‡ä»¶ | oral-explanation, memory-anchor |
| **è¯„åˆ†Agent** | Read | åªéœ€è¯»å–é»„è‰²èŠ‚ç‚¹å†…å®¹è¯„ä¼° | scoring-agent |
| **æ£€éªŒAgent** | Read, Write | éœ€è¦åˆ›å»ºæ£€éªŒç™½æ¿Canvasæ–‡ä»¶ | review-verification |
| **å·¥å…·Agent** | Read, Write, Edit, Bash | éœ€è¦å®Œæ•´æƒé™æ“ä½œCanvas | canvas-operations |

### æƒé™é€‰æ‹©åŸåˆ™

1. **æœ€å°æƒé™åŸåˆ™**ï¼šåªæˆäºˆAgentå®Œæˆä»»åŠ¡æ‰€å¿…éœ€çš„æƒé™
2. **å®‰å…¨ä¼˜å…ˆ**ï¼šé¿å…æˆäºˆä¸å¿…è¦çš„Writeã€Editã€Bashæƒé™
3. **èŒè´£åŒ¹é…**ï¼šæ ¹æ®Agentçš„èŒè´£ç¡®å®šæƒé™éœ€æ±‚

**ç¤ºä¾‹**ï¼š
- âœ… åŸºç¡€æ‹†è§£Agentåªéœ€è¦ `Read`ï¼ˆè¯»å–ææ–™å†…å®¹ï¼‰
- âœ… å£è¯­åŒ–è§£é‡ŠAgentéœ€è¦ `Read, Write`ï¼ˆè¯»å–ææ–™ï¼Œåˆ›å»ºè§£é‡Šç¬”è®°ï¼‰
- âŒ ä¸è¦ç»™è¯„åˆ†Agentæˆäºˆ `Write` æƒé™ï¼ˆå®ƒä¸éœ€è¦åˆ›å»ºæ–‡ä»¶ï¼‰

---

## éªŒè¯å’Œæµ‹è¯•

### æ ¼å¼éªŒè¯

#### 1. YAML Frontmatteræ ¼å¼éªŒè¯

ä½¿ç”¨Pythonè„šæœ¬éªŒè¯YAMLæ ¼å¼ï¼š

```bash
python scripts/validate_agent_yaml.py .claude/agents/{agent-name}.md
```

**éªŒè¯å†…å®¹**ï¼š
- [ ] `name` ä¸æ–‡ä»¶åä¸€è‡´ï¼ˆkebab-caseï¼‰
- [ ] `description` ç®€æ´æ˜äº†ï¼ˆ<80å­—ç¬¦ï¼‰
- [ ] `tools` åˆ—è¡¨æ ¼å¼æ­£ç¡®
- [ ] `model` è®¾ç½®ä¸º `sonnet`

#### 2. Markdownè¯­æ³•æ£€æŸ¥

ä½¿ç”¨markdownlintå·¥å…·ï¼š

```bash
markdownlint .claude/agents/{agent-name}.md
```

**éªŒè¯å†…å®¹**ï¼š
- [ ] ç« èŠ‚æ ‡é¢˜å±‚çº§æ­£ç¡®
- [ ] ä»£ç å—è¯­æ³•é«˜äº®æ­£ç¡®
- [ ] JSONç¤ºä¾‹æ ¼å¼æ­£ç¡®

#### 3. JSONæ ¼å¼éªŒè¯

ä½¿ç”¨åœ¨çº¿JSONéªŒè¯å·¥å…·ï¼ˆå¦‚ [jsonlint.com](https://jsonlint.com/)ï¼‰ï¼š
- å¤åˆ¶è¾“å…¥/è¾“å‡ºç¤ºä¾‹çš„JSON
- éªŒè¯JSONæ ¼å¼æ­£ç¡®æ€§

### å†…å®¹å®Œæ•´æ€§æ£€æŸ¥

ä½¿ç”¨ä»¥ä¸‹æ¸…å•éªŒè¯Agentå®šä¹‰æ–‡ä»¶çš„å®Œæ•´æ€§ï¼š

- [ ] YAML frontmatteråŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
- [ ] Roleéƒ¨åˆ†æ¸…æ™°æè¿°AgentèŒè´£ï¼ˆ2-3å¥è¯ï¼‰
- [ ] Input Formatå®šä¹‰æ¸…æ™°ï¼ˆJSONæ ¼å¼ï¼Œå­—æ®µè¯´æ˜è¡¨æ ¼ï¼‰
- [ ] Output Formatå®šä¹‰æ¸…æ™°ï¼ˆJSONæ ¼å¼ï¼Œå­—æ®µè¯´æ˜è¡¨æ ¼ï¼‰
- [ ] ç‰¹åˆ«å¼ºè°ƒäº†JSONè¾“å‡ºçº¦æŸï¼ˆâš ï¸ é‡è¦çº¦æŸéƒ¨åˆ†ï¼‰
- [ ] System PromptåŒ…å«å››ä¸ªéƒ¨åˆ†ï¼šä»»åŠ¡ã€è§„åˆ™ã€ç¤ºä¾‹ã€è´¨é‡æ ‡å‡†
- [ ] è‡³å°‘æä¾›1ä¸ªå®Œæ•´çš„è¾“å…¥/è¾“å‡ºç¤ºä¾‹
- [ ] ç¤ºä¾‹æ•°æ®çœŸå®ã€å…·æœ‰ä»£è¡¨æ€§
- [ ] ç¤ºä¾‹åŒ…å«"ç¤ºä¾‹è¯´æ˜"è§£é‡Š

### å®é™…æµ‹è¯•

#### 1. åˆ›å»ºæµ‹è¯•Agent

ä½¿ç”¨æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæµ‹è¯•Agentï¼ŒéªŒè¯æ¨¡æ¿å¯ç”¨æ€§ï¼š

```bash
cp .bmad-core/templates/sub-agent-template.md .claude/agents/test-agent.md
# å¡«å……å ä½ç¬¦
# éªŒè¯èƒ½å¦æ­£å¸¸ä½¿ç”¨
```

#### 2. è°ƒç”¨æµ‹è¯•

åœ¨Canvas-Orchestratorä¸­å°è¯•è°ƒç”¨æ–°åˆ›å»ºçš„Agentï¼š

```
"Use the test-agent subagent to [task description]

Input: {...}

Expected output: {...}"
```

éªŒè¯ï¼š
- [ ] Agentèƒ½å¤Ÿè¢«æ­£ç¡®è¯†åˆ«
- [ ] è¾“å…¥æ ¼å¼æ­£ç¡®è§£æ
- [ ] è¾“å‡ºæ ¼å¼ç¬¦åˆå®šä¹‰
- [ ] è¾“å‡ºä¸ºçº¯JSONï¼ˆä¸åŒ…å«Markdownä»£ç å—ï¼‰

---

## å¸¸è§é—®é¢˜

### Q1: æ–‡ä»¶åå’ŒYAML nameå­—æ®µä¸ä¸€è‡´ä¼šæ€æ ·ï¼Ÿ

**A**: Claude Codeæ— æ³•è¯†åˆ«Agentï¼Œè°ƒç”¨å¤±è´¥ã€‚

**è§£å†³æ–¹æ³•**ï¼š
- ç¡®ä¿æ–‡ä»¶åï¼ˆå»æ‰.mdï¼‰ä¸YAML nameå­—æ®µå®Œå…¨ä¸€è‡´
- éƒ½ä½¿ç”¨kebab-caseæ ¼å¼ï¼ˆå°å†™å­—æ¯ + è¿å­—ç¬¦ï¼‰

### Q2: Agentè¿”å›çš„JSONè¢«Markdownä»£ç å—åŒ…è£¹æ€ä¹ˆåŠï¼Ÿ

**A**: è¿™è¿åäº†è¾“å‡ºæ ¼å¼çº¦æŸï¼Œä¼šå¯¼è‡´Canvas-Orchestratorè§£æå¤±è´¥ã€‚

**è§£å†³æ–¹æ³•**ï¼š
- åœ¨"Output Format"ç« èŠ‚æ˜ç¡®å¼ºè°ƒï¼š
  > âš ï¸ é‡è¦çº¦æŸ: åªè¿”å›JSONï¼Œä¸è¦ä½¿ç”¨Markdownä»£ç å—ï¼ˆ` ```json `ï¼‰åŒ…è£¹JSON
- åœ¨"System Prompt"ç« èŠ‚çš„"è§„åˆ™"ä¸­é‡ç”³æ­¤çº¦æŸ

### Q3: å¦‚ä½•é€‰æ‹©åˆé€‚çš„toolsæƒé™ï¼Ÿ

**A**: å‚è€ƒ [å·¥å…·æƒé™é€‰æ‹©æŒ‡å—](#å·¥å…·æƒé™é€‰æ‹©æŒ‡å—)ã€‚

**åŸåˆ™**ï¼š
- åªæˆäºˆAgentå®Œæˆä»»åŠ¡æ‰€å¿…éœ€çš„æƒé™
- æ‹†è§£Agenté€šå¸¸åªéœ€è¦ `Read`
- è§£é‡ŠAgentéœ€è¦ `Read, Write`ï¼ˆåˆ›å»ºç¬”è®°æ–‡ä»¶ï¼‰
- ä¸»æ§Agentå’Œå·¥å…·Agentéœ€è¦å®Œæ•´æƒé™

### Q4: descriptionå­—æ®µè¶…è¿‡80å­—ç¬¦æ€ä¹ˆåŠï¼Ÿ

**A**: ç®€åŒ–æè¿°ï¼Œä¿æŒç®€æ´æ˜äº†ã€‚

**ç¤ºä¾‹**ï¼š
- âŒ `"This agent decomposes difficult and confusing materials into multiple simple, guiding questions to help users understand"`ï¼ˆè¶…è¿‡80å­—ç¬¦ï¼‰
- âœ… `"Decomposes difficult materials into basic guiding questions"`ï¼ˆç¬¦åˆè¦æ±‚ï¼‰

### Q5: è¾“å…¥/è¾“å‡ºæ ¼å¼ä¸­çš„å­—æ®µå‘½åæœ‰ä»€ä¹ˆè¦æ±‚ï¼Ÿ

**A**: å¿…é¡»ä½¿ç”¨snake_caseå‘½åï¼ˆå°å†™å­—æ¯ + ä¸‹åˆ’çº¿ï¼‰ã€‚

**ç¤ºä¾‹**ï¼š
- âœ… `sub_questions`, `user_understanding`, `total_count`
- âŒ `subQuestions`ï¼ˆcamelCaseï¼‰, `SubQuestions`ï¼ˆPascalCaseï¼‰

### Q6: å¦‚ä½•ä¸ºAgentæä¾›å¤šä¸ªè¾“å…¥/è¾“å‡ºç¤ºä¾‹ï¼Ÿ

**A**: åœ¨"System Prompt"çš„"ç¤ºä¾‹"éƒ¨åˆ†å¯ä»¥æä¾›å¤šä¸ªç¤ºä¾‹ã€‚

**æ ¼å¼**ï¼š
```markdown
### ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šç®€å•ææ–™**

**è¾“å…¥ç¤ºä¾‹**:
```json
{...}
```

**è¾“å‡ºç¤ºä¾‹**:
```json
{...}
```

**ç¤ºä¾‹è¯´æ˜**ï¼š[è§£é‡Š]

---

**ç¤ºä¾‹2ï¼šå¤æ‚ææ–™**

**è¾“å…¥ç¤ºä¾‹**:
```json
{...}
```

**è¾“å‡ºç¤ºä¾‹**:
```json
{...}
```

**ç¤ºä¾‹è¯´æ˜**ï¼š[è§£é‡Š]
```

### Q7: Agentå®šä¹‰æ–‡ä»¶éœ€è¦ç‰ˆæœ¬æ§åˆ¶å—ï¼Ÿ

**A**: æ˜¯çš„ã€‚å»ºè®®åœ¨æ–‡ä»¶é¡¶éƒ¨æˆ–åº•éƒ¨æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯ã€‚

**ç¤ºä¾‹**ï¼š
```markdown
<!--
ç‰ˆæœ¬: v1.0
æœ€åæ›´æ–°: 2025-10-14
ä½œè€…: Canvas Learning System Team
-->
```

---

## é™„å½•

### å‚è€ƒèµ„æ–™

- **æ¨¡æ¿æ–‡ä»¶**ï¼š`.bmad-core/templates/sub-agent-template.md`
- **ç¤ºä¾‹Agent**ï¼š`.bmad-core/templates/basic-decomposition-example.md`
- **æ¶æ„æ–‡æ¡£**ï¼š`docs/architecture/sub-agent-templates.md`
- **ç¼–ç è§„èŒƒ**ï¼š`docs/architecture/coding-standards.md#Markdownç¼–ç è§„èŒƒ`
- **è°ƒç”¨åè®®**ï¼š`docs/architecture/sub-agent-calling-protocol.md`

### 13ä¸ªAgentæ¸…å•

| # | Agentåç§° | æ–‡ä»¶å | ç±»å‹ | ç”¨é€” |
|---|----------|--------|------|------|
| 1 | Canvas Orchestrator | `canvas-orchestrator.md` | ä¸»æ§ | åè°ƒæ‰€æœ‰Sub-agent |
| 2 | Basic Decomposition | `basic-decomposition.md` | æ‹†è§£ | åŸºç¡€æ‹†è§£ |
| 3 | Deep Decomposition | `deep-decomposition.md` | æ‹†è§£ | æ·±åº¦æ‹†è§£ |
| 4 | Problem Decomposition | `problem-decomposition.md` | æ‹†è§£ | é—®é¢˜æ‹†è§£ |
| 5 | Oral Explanation | `oral-explanation.md` | è§£é‡Š | å£è¯­åŒ–è§£é‡Š |
| 6 | Clarification Path | `clarification-path.md` | è§£é‡Š | æ¾„æ¸…è·¯å¾„ |
| 7 | Comparison Table | `comparison-table.md` | è§£é‡Š | å¯¹æ¯”è¡¨ |
| 8 | Memory Anchor | `memory-anchor.md` | è§£é‡Š | è®°å¿†é”šç‚¹ |
| 9 | Four Level Explanation | `four-level-explanation.md` | è§£é‡Š | å››å±‚æ¬¡è§£ç­” |
| 10 | Example Teaching | `example-teaching.md` | è§£é‡Š | ä¾‹é¢˜æ•™å­¦ |
| 11 | Scoring Agent | `scoring-agent.md` | è¯„åˆ† | è¯„ä¼°ç†è§£è´¨é‡ |
| 12 | Review Verification | `review-verification.md` | æ£€éªŒ | æ— çº¸åŒ–æ£€éªŒ |
| 13 | Canvas Operations | `canvas-operations.md` | å·¥å…· | Canvaså·¥å…· |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-10-14
**ç»´æŠ¤è€…**: Dev Agent (James)
