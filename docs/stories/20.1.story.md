# Story 20.1: å¤šProvideræ¶æ„è®¾è®¡

---
document_type: "Story"
version: "1.0.0"
last_modified: "2025-12-11"
status: "draft"
epic_id: "20"
story_id: "20.1"
priority: "P0"
estimated_hours: 4

authors:
  - name: "SM Agent"
    role: "Scrum Master"

reviewers:
  - name: "PO Agent"
    role: "Product Owner"
    approved: false

compatible_with:
  epic: "20"
  architecture: "v1.0"
  api_spec: "v1.0"

changes_from_previous:
  - "Initial Story created from Epic 20"
---

## Status

- [x] Draft
- [ ] Ready for Dev
- [ ] In Progress
- [ ] QA Review
- [ ] Done

## Story Overview

**ç”¨æˆ·æ•…äº‹**:
```
ä½œä¸ºç³»ç»Ÿç®¡ç†å‘˜
æˆ‘å¸Œæœ›èƒ½å¤Ÿé…ç½®å¤šä¸ªAI Provider
ä»¥ä¾¿åœ¨ä¸€ä¸ªProviderä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨Provider
```

**ä¸šåŠ¡ä»·å€¼**:
- æ¶ˆé™¤å•ç‚¹æ•…éšœé£é™©
- æé«˜ç³»ç»Ÿå¯ç”¨æ€§
- æ”¯æŒå¤šAIæœåŠ¡å•†æ¥å…¥

## Acceptance Criteria

- [ ] **AC-20.1.1**: æ”¯æŒé…ç½®è‡³å°‘3ä¸ªProvider (Google, OpenAI, Anthropic)
  - æ¯ä¸ªProvideræœ‰ç‹¬ç«‹çš„é…ç½®æ¨¡å‹
  - é…ç½®åŒ…å«: name, api_key, base_url, model, priority

- [ ] **AC-20.1.2**: æ¯ä¸ªProviderå¯ç‹¬ç«‹é…ç½®APIå¯†é’¥å’Œç«¯ç‚¹
  - APIå¯†é’¥é€šè¿‡ç¯å¢ƒå˜é‡è¯»å–
  - æ”¯æŒè‡ªå®šä¹‰base_urlï¼ˆç”¨äºä»£ç†æˆ–è‡ªæ‰˜ç®¡ï¼‰
  - æ¨¡å‹åç§°å¯é…ç½®

- [ ] **AC-20.1.3**: æ”¯æŒè®¾ç½®Providerä¼˜å…ˆçº§é¡ºåº
  - priorityå­—æ®µä¸ºæ•´æ•°ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜
  - ç›¸åŒä¼˜å…ˆçº§æ—¶æŒ‰é…ç½®é¡ºåº

- [ ] **AC-20.1.4**: é…ç½®å˜æ›´æ— éœ€é‡å¯æœåŠ¡
  - é€šè¿‡Settings reloadæœºåˆ¶å®ç°çƒ­æ›´æ–°
  - é…ç½®å˜æ›´åæ–°è¯·æ±‚ä½¿ç”¨æ–°é…ç½®

## Dev Notes (CRITICAL - Must be complete)

### Technical Context

**é—®é¢˜èƒŒæ™¯**:
Canvas Learning Systemåç«¯å½“å‰ä½¿ç”¨å•ä¸€AI Provideré…ç½®ï¼Œå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
1. å¤–éƒ¨APIä¾èµ– - ä½¿ç”¨éå®˜æ–¹APIç«¯ç‚¹å¯èƒ½ä¸ç¨³å®š
2. å•ç‚¹æ•…éšœ - Providerä¸å¯ç”¨æ—¶æ•´ä¸ªç³»ç»Ÿç˜«ç—ª
3. æ— æ•…éšœè½¬ç§»èƒ½åŠ›

**è§£å†³æ–¹æ¡ˆ**:
å®ç°å¤šProvideræ¶æ„ï¼Œæ”¯æŒGoogleã€OpenAIã€Anthropicç­‰å¤šä¸ªAIæœåŠ¡å•†ï¼Œé€šè¿‡å·¥å‚æ¨¡å¼å’Œä¼˜å…ˆçº§æœºåˆ¶å®ç°æ™ºèƒ½åˆ‡æ¢ã€‚

### ç°æœ‰ä»£ç åˆ†æ

**å½“å‰config.pyä½ç½®**: `backend/app/config.py`

**å½“å‰é…ç½®ç»“æ„** (éœ€è¦æ‰©å±•):
```python
# å½“å‰config.pyæ²¡æœ‰AI Provideré…ç½®
# éœ€è¦æ·»åŠ å¤šProvideré…ç½®æ”¯æŒ
```

**éœ€è¦æ–°å»ºçš„æ–‡ä»¶**:
- `backend/app/clients/__init__.py` - å®¢æˆ·ç«¯æ¨¡å—åˆå§‹åŒ–
- `backend/app/clients/base_provider.py` - ProvideråŸºç±»å®šä¹‰
- `backend/app/clients/google_provider.py` - Google AI Provider
- `backend/app/clients/openai_provider.py` - OpenAI Provider
- `backend/app/clients/anthropic_provider.py` - Anthropic Provider

### API Endpoints

æœ¬Storyä¸æ¶‰åŠæ–°APIç«¯ç‚¹ï¼Œä¸“æ³¨äºProvideré…ç½®å’ŒåŸºç±»å®ç°ã€‚

### Data Models

**ProviderConfig Schema** (éœ€æ–°å¢åˆ°config.py):
```python
# âœ… Verified from Context7:/websites/fastapi_tiangolo (topic: settings BaseSettings pydantic-settings)
from pydantic import BaseModel, Field
from typing import Optional, List
from enum import Enum

class ProviderType(str, Enum):
    """AI Providerç±»å‹æšä¸¾"""
    GOOGLE = "google"
    OPENAI = "openai"
    ANTHROPIC = "anthropic"
    CUSTOM = "custom"

class ProviderConfig(BaseModel):
    """å•ä¸ªProvideré…ç½®"""
    name: str = Field(..., description="Provideråç§°")
    provider_type: ProviderType = Field(..., description="Providerç±»å‹")
    api_key: str = Field(..., description="APIå¯†é’¥")
    base_url: Optional[str] = Field(default=None, description="è‡ªå®šä¹‰APIç«¯ç‚¹")
    model: str = Field(..., description="æ¨¡å‹åç§°")
    priority: int = Field(default=10, description="ä¼˜å…ˆçº§(æ•°å­—è¶Šå°è¶Šé«˜)")
    enabled: bool = Field(default=True, description="æ˜¯å¦å¯ç”¨")
    timeout: int = Field(default=30, description="è¯·æ±‚è¶…æ—¶ç§’æ•°")
```

**AIProviderSettings** (éœ€æ–°å¢åˆ°Settingsç±»):
```python
# æ·»åŠ åˆ° backend/app/config.py Settingsç±»ä¸­
AI_PROVIDERS_JSON: str = Field(
    default="[]",
    description="AI Providersé…ç½®JSONå­—ç¬¦ä¸²"
)

@property
def ai_providers(self) -> List[ProviderConfig]:
    """è§£æAI Providersé…ç½®"""
    import json
    try:
        configs = json.loads(self.AI_PROVIDERS_JSON)
        return [ProviderConfig(**c) for c in configs]
    except (json.JSONDecodeError, ValidationError):
        return []
```

### SDD References

**OpenAPI**: `specs/api/fastapi-backend-api.openapi.yml` (ç°æœ‰å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼ŒStory 20.4å°†æ‰©å±•)

**JSON Schema** (éœ€æ–°å¢):
- éœ€è¦åˆ›å»º: `specs/data/provider-config.schema.json`

### ADR References

**ç›¸å…³ADR**:
- `docs/architecture/decisions/0002-langgraph-agents.md` - Agentç³»ç»Ÿæ¶æ„å†³ç­–
- å»ºè®®æ–°å¢: ADR-011-multi-provider-architecture.md

### Implementation Guidelines

#### æ­¥éª¤1: åˆ›å»ºclientsç›®å½•å’ŒåŸºç±»

**æ–‡ä»¶**: `backend/app/clients/__init__.py`
```python
"""AI Provider clients module."""
from .base_provider import AIProvider, ProviderHealth
from .google_provider import GoogleProvider
from .openai_provider import OpenAIProvider
from .anthropic_provider import AnthropicProvider

__all__ = [
    "AIProvider",
    "ProviderHealth",
    "GoogleProvider",
    "OpenAIProvider",
    "AnthropicProvider",
]
```

**æ–‡ä»¶**: `backend/app/clients/base_provider.py`
```python
# âœ… Verified from Context7:/websites/fastapi_tiangolo (topic: abstract base class)
from abc import ABC, abstractmethod
from dataclasses import dataclass
from datetime import datetime
from typing import Optional, Dict, Any
from enum import Enum

class ProviderStatus(str, Enum):
    """Providerå¥åº·çŠ¶æ€"""
    HEALTHY = "healthy"
    UNHEALTHY = "unhealthy"
    UNKNOWN = "unknown"

@dataclass
class ProviderHealth:
    """Providerå¥åº·çŠ¶æ€æ•°æ®ç±»"""
    status: ProviderStatus
    latency_ms: Optional[float] = None
    last_check: Optional[datetime] = None
    error: Optional[str] = None
    consecutive_failures: int = 0

class AIProvider(ABC):
    """AI ProvideræŠ½è±¡åŸºç±»

    æ‰€æœ‰AI Providerå¿…é¡»å®ç°æ­¤æ¥å£ã€‚

    Attributes:
        name: Provideråç§°
        model: ä½¿ç”¨çš„æ¨¡å‹åç§°
        priority: ä¼˜å…ˆçº§(æ•°å­—è¶Šå°è¶Šé«˜)
    """

    def __init__(
        self,
        name: str,
        api_key: str,
        model: str,
        base_url: Optional[str] = None,
        priority: int = 10,
        timeout: int = 30
    ):
        self.name = name
        self.api_key = api_key
        self.model = model
        self.base_url = base_url
        self.priority = priority
        self.timeout = timeout
        self._health = ProviderHealth(status=ProviderStatus.UNKNOWN)

    @property
    def health(self) -> ProviderHealth:
        """è·å–å½“å‰å¥åº·çŠ¶æ€"""
        return self._health

    @abstractmethod
    async def complete(
        self,
        messages: list[Dict[str, Any]],
        **kwargs
    ) -> Dict[str, Any]:
        """æ‰§è¡ŒAIè¡¥å…¨è¯·æ±‚

        Args:
            messages: æ¶ˆæ¯åˆ—è¡¨ [{"role": "user", "content": "..."}]
            **kwargs: é¢å¤–å‚æ•°

        Returns:
            è¡¥å…¨ç»“æœå­—å…¸
        """
        pass

    @abstractmethod
    async def health_check(self) -> ProviderHealth:
        """æ‰§è¡Œå¥åº·æ£€æŸ¥

        Returns:
            ProviderHealthå®ä¾‹
        """
        pass

    def __repr__(self) -> str:
        return f"<{self.__class__.__name__}(name={self.name}, model={self.model}, priority={self.priority})>"
```

#### æ­¥éª¤2: å®ç°Google Provider

**æ–‡ä»¶**: `backend/app/clients/google_provider.py`
```python
# âœ… Verified from Context7 - google-generativeai SDK pattern
import time
from typing import Dict, Any, Optional
from datetime import datetime

from .base_provider import AIProvider, ProviderHealth, ProviderStatus

class GoogleProvider(AIProvider):
    """Google Generative AI Provider

    æ”¯æŒGeminiç³»åˆ—æ¨¡å‹ã€‚
    """

    DEFAULT_BASE_URL = "https://generativelanguage.googleapis.com/v1beta"

    def __init__(
        self,
        name: str,
        api_key: str,
        model: str = "gemini-2.0-flash-exp",
        base_url: Optional[str] = None,
        priority: int = 1,
        timeout: int = 30
    ):
        super().__init__(
            name=name,
            api_key=api_key,
            model=model,
            base_url=base_url or self.DEFAULT_BASE_URL,
            priority=priority,
            timeout=timeout
        )

    async def complete(
        self,
        messages: list[Dict[str, Any]],
        **kwargs
    ) -> Dict[str, Any]:
        """æ‰§è¡ŒGoogle AIè¡¥å…¨è¯·æ±‚"""
        # å®ç°å°†åœ¨Story 20.2ä¸­å®Œæˆ
        # è¿™é‡Œåªå®šä¹‰æ¥å£
        raise NotImplementedError("Complete method will be implemented in Story 20.2")

    async def health_check(self) -> ProviderHealth:
        """æ‰§è¡ŒGoogle Providerå¥åº·æ£€æŸ¥"""
        start_time = time.time()
        try:
            # ç®€å•çš„APIå¯è¾¾æ€§æ£€æŸ¥
            # å®é™…å®ç°å°†åœ¨Story 20.4ä¸­å®Œæˆ
            latency_ms = (time.time() - start_time) * 1000
            self._health = ProviderHealth(
                status=ProviderStatus.UNKNOWN,
                latency_ms=latency_ms,
                last_check=datetime.utcnow(),
                consecutive_failures=0
            )
        except Exception as e:
            self._health = ProviderHealth(
                status=ProviderStatus.UNHEALTHY,
                last_check=datetime.utcnow(),
                error=str(e),
                consecutive_failures=self._health.consecutive_failures + 1
            )
        return self._health
```

#### æ­¥éª¤3: å®ç°OpenAI Provider

**æ–‡ä»¶**: `backend/app/clients/openai_provider.py`
```python
# âœ… Verified from Context7 - OpenAI SDK pattern
import time
from typing import Dict, Any, Optional
from datetime import datetime

from .base_provider import AIProvider, ProviderHealth, ProviderStatus

class OpenAIProvider(AIProvider):
    """OpenAI Provider

    æ”¯æŒGPTç³»åˆ—æ¨¡å‹ã€‚
    """

    DEFAULT_BASE_URL = "https://api.openai.com/v1"

    def __init__(
        self,
        name: str,
        api_key: str,
        model: str = "gpt-4o",
        base_url: Optional[str] = None,
        priority: int = 2,
        timeout: int = 30
    ):
        super().__init__(
            name=name,
            api_key=api_key,
            model=model,
            base_url=base_url or self.DEFAULT_BASE_URL,
            priority=priority,
            timeout=timeout
        )

    async def complete(
        self,
        messages: list[Dict[str, Any]],
        **kwargs
    ) -> Dict[str, Any]:
        """æ‰§è¡ŒOpenAIè¡¥å…¨è¯·æ±‚"""
        raise NotImplementedError("Complete method will be implemented in Story 20.2")

    async def health_check(self) -> ProviderHealth:
        """æ‰§è¡ŒOpenAI Providerå¥åº·æ£€æŸ¥"""
        start_time = time.time()
        try:
            latency_ms = (time.time() - start_time) * 1000
            self._health = ProviderHealth(
                status=ProviderStatus.UNKNOWN,
                latency_ms=latency_ms,
                last_check=datetime.utcnow(),
                consecutive_failures=0
            )
        except Exception as e:
            self._health = ProviderHealth(
                status=ProviderStatus.UNHEALTHY,
                last_check=datetime.utcnow(),
                error=str(e),
                consecutive_failures=self._health.consecutive_failures + 1
            )
        return self._health
```

#### æ­¥éª¤4: å®ç°Anthropic Provider

**æ–‡ä»¶**: `backend/app/clients/anthropic_provider.py`
```python
# âœ… Verified from Context7 - Anthropic SDK pattern
import time
from typing import Dict, Any, Optional
from datetime import datetime

from .base_provider import AIProvider, ProviderHealth, ProviderStatus

class AnthropicProvider(AIProvider):
    """Anthropic Provider

    æ”¯æŒClaudeç³»åˆ—æ¨¡å‹ã€‚
    """

    DEFAULT_BASE_URL = "https://api.anthropic.com/v1"

    def __init__(
        self,
        name: str,
        api_key: str,
        model: str = "claude-3-5-sonnet-20241022",
        base_url: Optional[str] = None,
        priority: int = 3,
        timeout: int = 30
    ):
        super().__init__(
            name=name,
            api_key=api_key,
            model=model,
            base_url=base_url or self.DEFAULT_BASE_URL,
            priority=priority,
            timeout=timeout
        )

    async def complete(
        self,
        messages: list[Dict[str, Any]],
        **kwargs
    ) -> Dict[str, Any]:
        """æ‰§è¡ŒAnthropicè¡¥å…¨è¯·æ±‚"""
        raise NotImplementedError("Complete method will be implemented in Story 20.2")

    async def health_check(self) -> ProviderHealth:
        """æ‰§è¡ŒAnthropic Providerå¥åº·æ£€æŸ¥"""
        start_time = time.time()
        try:
            latency_ms = (time.time() - start_time) * 1000
            self._health = ProviderHealth(
                status=ProviderStatus.UNKNOWN,
                latency_ms=latency_ms,
                last_check=datetime.utcnow(),
                consecutive_failures=0
            )
        except Exception as e:
            self._health = ProviderHealth(
                status=ProviderStatus.UNHEALTHY,
                last_check=datetime.utcnow(),
                error=str(e),
                consecutive_failures=self._health.consecutive_failures + 1
            )
        return self._health
```

#### æ­¥éª¤5: æ‰©å±•config.pyé…ç½®

**ä¿®æ”¹æ–‡ä»¶**: `backend/app/config.py`

åœ¨Settingsç±»ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®:
```python
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AI Provider Settings (Epic 20 - Multi-Provider Architecture)
# [Source: docs/prd/EPIC-20-BACKEND-STABILITY-MULTI-PROVIDER.md]
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AI_PROVIDERS_JSON: str = Field(
    default='[]',
    description="AI Providersé…ç½®JSONå­—ç¬¦ä¸²ï¼Œæ ¼å¼: [{name, provider_type, api_key, base_url, model, priority}]"
)

# ç¯å¢ƒå˜é‡æ–¹å¼é…ç½®å•ä¸ªProvider (å‘åå…¼å®¹)
AI_PROVIDER_1_NAME: str = Field(default="", description="Provider 1 åç§°")
AI_PROVIDER_1_TYPE: str = Field(default="google", description="Provider 1 ç±»å‹")
AI_PROVIDER_1_API_KEY: str = Field(default="", description="Provider 1 APIå¯†é’¥")
AI_PROVIDER_1_BASE_URL: str = Field(default="", description="Provider 1 è‡ªå®šä¹‰ç«¯ç‚¹")
AI_PROVIDER_1_MODEL: str = Field(default="gemini-2.0-flash-exp", description="Provider 1 æ¨¡å‹")
AI_PROVIDER_1_PRIORITY: int = Field(default=1, description="Provider 1 ä¼˜å…ˆçº§")

AI_PROVIDER_2_NAME: str = Field(default="", description="Provider 2 åç§°")
AI_PROVIDER_2_TYPE: str = Field(default="openai", description="Provider 2 ç±»å‹")
AI_PROVIDER_2_API_KEY: str = Field(default="", description="Provider 2 APIå¯†é’¥")
AI_PROVIDER_2_BASE_URL: str = Field(default="", description="Provider 2 è‡ªå®šä¹‰ç«¯ç‚¹")
AI_PROVIDER_2_MODEL: str = Field(default="gpt-4o", description="Provider 2 æ¨¡å‹")
AI_PROVIDER_2_PRIORITY: int = Field(default=2, description="Provider 2 ä¼˜å…ˆçº§")

AI_PROVIDER_3_NAME: str = Field(default="", description="Provider 3 åç§°")
AI_PROVIDER_3_TYPE: str = Field(default="anthropic", description="Provider 3 ç±»å‹")
AI_PROVIDER_3_API_KEY: str = Field(default="", description="Provider 3 APIå¯†é’¥")
AI_PROVIDER_3_BASE_URL: str = Field(default="", description="Provider 3 è‡ªå®šä¹‰ç«¯ç‚¹")
AI_PROVIDER_3_MODEL: str = Field(default="claude-3-5-sonnet-20241022", description="Provider 3 æ¨¡å‹")
AI_PROVIDER_3_PRIORITY: int = Field(default=3, description="Provider 3 ä¼˜å…ˆçº§")
```

### File Changes Summary

| æ–‡ä»¶è·¯å¾„ | æ“ä½œ | æè¿° |
|---------|------|------|
| `backend/app/config.py` | ä¿®æ”¹ | æ·»åŠ AI Provideré…ç½®å­—æ®µ |
| `backend/app/clients/__init__.py` | æ–°å¢ | å®¢æˆ·ç«¯æ¨¡å—åˆå§‹åŒ– |
| `backend/app/clients/base_provider.py` | æ–°å¢ | ProvideræŠ½è±¡åŸºç±» |
| `backend/app/clients/google_provider.py` | æ–°å¢ | Google AI Provider |
| `backend/app/clients/openai_provider.py` | æ–°å¢ | OpenAI Provider |
| `backend/app/clients/anthropic_provider.py` | æ–°å¢ | Anthropic Provider |

### Key Files (Verified Paths)

**å·²å­˜åœ¨çš„æ–‡ä»¶** (GlobéªŒè¯):
- `backend/app/config.py` âœ…
- `backend/app/api/v1/endpoints/health.py` âœ…
- `backend/app/services/agent_service.py` âœ…

**éœ€è¦åˆ›å»ºçš„ç›®å½•**:
- `backend/app/clients/` (ä¸å­˜åœ¨ï¼Œéœ€åˆ›å»º)

## Testing Requirements

### å•å…ƒæµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `backend/tests/test_providers.py`

```python
# æµ‹è¯•ç”¨ä¾‹æ¦‚è¦

def test_provider_config_model():
    """æµ‹è¯•ProviderConfigæ¨¡å‹éªŒè¯"""
    # AC-20.1.1: æ”¯æŒ3ä¸ªProviderç±»å‹
    pass

def test_provider_priority_ordering():
    """æµ‹è¯•Providerä¼˜å…ˆçº§æ’åº"""
    # AC-20.1.3: ä¼˜å…ˆçº§æ’åºæ­£ç¡®
    pass

def test_provider_base_class_interface():
    """æµ‹è¯•åŸºç±»æ¥å£å®šä¹‰"""
    pass

def test_google_provider_init():
    """æµ‹è¯•Google Provideråˆå§‹åŒ–"""
    pass

def test_openai_provider_init():
    """æµ‹è¯•OpenAI Provideråˆå§‹åŒ–"""
    pass

def test_anthropic_provider_init():
    """æµ‹è¯•Anthropic Provideråˆå§‹åŒ–"""
    pass

def test_settings_ai_providers_parsing():
    """æµ‹è¯•Settingsä¸­Provideré…ç½®è§£æ"""
    # AC-20.1.2: ç‹¬ç«‹é…ç½®APIå¯†é’¥å’Œç«¯ç‚¹
    pass
```

### é›†æˆæµ‹è¯•

**æµ‹è¯•æ–‡ä»¶**: `backend/tests/integration/test_provider_config.py`

```python
def test_env_vars_provider_config():
    """æµ‹è¯•é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®Provider"""
    pass

def test_json_provider_config():
    """æµ‹è¯•é€šè¿‡JSONå­—ç¬¦ä¸²é…ç½®Provider"""
    pass
```

## Dependencies

### ä¸Šæ¸¸ä¾èµ–
- Epic 11: FastAPIåŸºç¡€æ¶æ„ âœ… (å·²å®Œæˆ)

### ä¸‹æ¸¸ä¾èµ–
- Story 20.2: Provideråˆ‡æ¢æœºåˆ¶ (éœ€è¦æœ¬Storyçš„ProvideråŸºç±»)
- Story 20.4: å¥åº·æ£€æŸ¥ (éœ€è¦æœ¬Storyçš„health_checkæ¥å£)

### PythonåŒ…ä¾èµ–
- `pydantic>=2.0` (å·²æœ‰)
- `pydantic-settings>=2.0` (å·²æœ‰)
- æš‚ä¸éœ€è¦é¢å¤–åŒ…

## Tasks / Subtasks

- [ ] **Task 1**: åˆ›å»ºclientsç›®å½•ç»“æ„ (AC: 20.1.1)
  - [ ] 1.1: åˆ›å»º `backend/app/clients/__init__.py`
  - [ ] 1.2: åˆ›å»ºç›®å½•ç»“æ„

- [ ] **Task 2**: å®ç°ProvideråŸºç±» (AC: 20.1.1, 20.1.2)
  - [ ] 2.1: åˆ›å»º `base_provider.py`
  - [ ] 2.2: å®šä¹‰ `AIProvider` æŠ½è±¡åŸºç±»
  - [ ] 2.3: å®šä¹‰ `ProviderHealth` æ•°æ®ç±»
  - [ ] 2.4: å®šä¹‰ `ProviderStatus` æšä¸¾

- [ ] **Task 3**: å®ç°å…·ä½“Provider (AC: 20.1.1)
  - [ ] 3.1: å®ç° `GoogleProvider`
  - [ ] 3.2: å®ç° `OpenAIProvider`
  - [ ] 3.3: å®ç° `AnthropicProvider`

- [ ] **Task 4**: æ‰©å±•config.py (AC: 20.1.2, 20.1.3)
  - [ ] 4.1: æ·»åŠ AI Provideré…ç½®å­—æ®µ
  - [ ] 4.2: æ·»åŠ ç¯å¢ƒå˜é‡é…ç½®æ”¯æŒ (3ä¸ªProvider)
  - [ ] 4.3: æ·»åŠ JSONé…ç½®æ”¯æŒ

- [ ] **Task 5**: ç¼–å†™å•å…ƒæµ‹è¯•
  - [ ] 5.1: æµ‹è¯•ProviderConfigæ¨¡å‹
  - [ ] 5.2: æµ‹è¯•ProvideråŸºç±»
  - [ ] 5.3: æµ‹è¯•å…·ä½“Provideråˆå§‹åŒ–
  - [ ] 5.4: æµ‹è¯•Settingsé…ç½®è§£æ

---

## Definition of Done

- [ ] æ‰€æœ‰ACéªŒæ”¶æ ‡å‡†é€šè¿‡
- [ ] ä»£ç éµå¾ª `docs/architecture/coding-standards.md` è§„èŒƒ
- [ ] æ‰€æœ‰ç±»å‹æ³¨è§£å®Œæ•´
- [ ] æ‰€æœ‰å…¬å…±æ–¹æ³•æœ‰docstring
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ â‰¥ 85%
- [ ] ä»£ç é€šè¿‡ pylint (è¯„åˆ† â‰¥ 8.0)
- [ ] ä»£ç é€šè¿‡ mypy ç±»å‹æ£€æŸ¥
- [ ] æ— å®‰å…¨æ¼æ´ (APIå¯†é’¥ä¸ç¡¬ç¼–ç )

---

**Storyåˆ›å»ºæ—¶é—´**: 2025-12-11T09:00:00Z
**Epicæ¥æº**: EPIC-20-BACKEND-STABILITY-MULTI-PROVIDER.md
**SM Agent**: Bob ğŸƒ
