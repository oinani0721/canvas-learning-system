# Story 21.5.2.3: ç«¯åˆ°ç«¯æµ‹è¯•ä¸éƒ¨ç½²éªŒè¯

## Status
Draft

## Story

**As a** Canvas Learning Systemå¼€å‘è€…,
**I want** å¯¹Contextç¼“å­˜ä¿®å¤è¿›è¡Œå®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•å’Œéƒ¨ç½²éªŒè¯,
**so that** ç¡®ä¿æ‰€æœ‰AgentåŠŸèƒ½åœ¨Canvaså³é”®èœå•ä¸­æ­£å¸¸å·¥ä½œï¼Œä¿®å¤å½»åº•è§£å†³contextä¼ é€’é—®é¢˜ã€‚

## Acceptance Criteria

1. **AC-1**: æ„å»ºæ’ä»¶ (`npm run build`) æ— é”™è¯¯
2. **AC-2**: éƒ¨ç½²åˆ°Obsidianæ’ä»¶ç›®å½•æˆåŠŸ
3. **AC-3**: åœ¨Obsidianä¸­é‡è½½æ’ä»¶æˆåŠŸ
4. **AC-4**: æµ‹è¯•æ‰€æœ‰AgentåŠŸèƒ½ (åŸºç¡€æ‹†è§£ã€å£è¯­åŒ–è§£é‡Šã€å››å±‚æ¬¡è§£é‡Šç­‰) æ­£å¸¸å·¥ä½œ
5. **AC-5**: éªŒè¯æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºæ­£ç¡®çš„`canvas_name` (ä»…æ–‡ä»¶åï¼Œå¦‚`"lecture5.canvas"`)
6. **AC-6**: éªŒè¯åç«¯æ”¶åˆ°æ­£ç¡®çš„å‚æ•° (æ£€æŸ¥bug_log.jsonlæ— "Path traversal detected"é”™è¯¯)

## Tasks / Subtasks

- [ ] Task 1: æ„å»ºæ’ä»¶ (AC: 1)
  - [ ] 1.1 è¿›å…¥æ’ä»¶ç›®å½•: `cd canvas-progress-tracker/obsidian-plugin`
  - [ ] 1.2 æ‰§è¡ŒTypeScriptç±»å‹æ£€æŸ¥: `npm run typecheck`
  - [ ] 1.3 æ‰§è¡Œæ„å»ºå‘½ä»¤: `npm run build`
  - [ ] 1.4 éªŒè¯æ„å»ºäº§ç‰©: `main.js`, `manifest.json`, `styles.css` å­˜åœ¨

- [ ] Task 2: éƒ¨ç½²åˆ°Obsidian (AC: 2, 3)
  - [ ] 2.1 å¤åˆ¶æ„å»ºäº§ç‰©åˆ°Obsidianæ’ä»¶ç›®å½•:
    ```bash
    cp main.js manifest.json styles.css "ç¬”è®°åº“/.obsidian/plugins/canvas-review-system/"
    ```
  - [ ] 2.2 åœ¨Obsidianä¸­é‡è½½æ’ä»¶: `Ctrl+P` â†’ "Reload app without saving"
  - [ ] 2.3 éªŒè¯æ’ä»¶åŠ è½½æˆåŠŸ (æ— æ§åˆ¶å°é”™è¯¯)

- [ ] Task 3: E2EåŠŸèƒ½æµ‹è¯• - CanvasèŠ‚ç‚¹å³é”®èœå• (AC: 4, 5)
  - [ ] 3.1 æ‰“å¼€ä¸€ä¸ªCanvasæ–‡ä»¶ (å¦‚ `test.canvas`)
  - [ ] 3.2 å³é”®ç‚¹å‡»CanvasèŠ‚ç‚¹
  - [ ] 3.3 é€‰æ‹©"åŸºç¡€æ‹†è§£" Agent
  - [ ] 3.4 éªŒè¯æ§åˆ¶å°æ—¥å¿—æ˜¾ç¤ºæ­£ç¡®çš„context:
    - `filePath` åº”ä¸ºCanvasè·¯å¾„ (å¦‚ `"Canvas/test.canvas"`)
    - `nodeId` åº”ä¸ºæœ‰æ•ˆUUID
  - [ ] 3.5 æµ‹è¯•å…¶ä»–AgentåŠŸèƒ½:
    - [ ] å£è¯­åŒ–è§£é‡Š
    - [ ] å››å±‚æ¬¡è§£é‡Š
    - [ ] æ·±åº¦æ‹†è§£
    - [ ] å¯¹æ¯”è¡¨ç”Ÿæˆ

- [ ] Task 4: E2EåŠŸèƒ½æµ‹è¯• - è¾¹ç•Œåœºæ™¯ (AC: 4, 5)
  - [ ] 4.1 æµ‹è¯•åœºæ™¯: å­ç›®å½•ä¸‹çš„Canvasæ–‡ä»¶
    - æ‰“å¼€ `Canvas/Math/lecture5.canvas`
    - å³é”®èŠ‚ç‚¹ â†’ è°ƒç”¨Agent
    - éªŒè¯APIæ”¶åˆ°æ­£ç¡®çš„ `canvas_name="lecture5.canvas"`
  - [ ] 4.2 æµ‹è¯•åœºæ™¯: å¿«é€Ÿè¿ç»­å³é”®ä¸åŒèŠ‚ç‚¹
    - å¿«é€Ÿå³é”®èŠ‚ç‚¹A â†’ å…³é—­èœå• â†’ å³é”®èŠ‚ç‚¹B â†’ è°ƒç”¨Agent
    - éªŒè¯æ¯æ¬¡éƒ½ä½¿ç”¨æ­£ç¡®çš„context
  - [ ] 4.3 æµ‹è¯•åœºæ™¯: Canvaså³é”®ååˆ‡æ¢åˆ°ç¼–è¾‘å™¨å³é”®
    - å³é”®CanvasèŠ‚ç‚¹ â†’ å…³é—­èœå• â†’ æ‰“å¼€Markdownæ–‡ä»¶ â†’ å³é”®ç¼–è¾‘å™¨
    - éªŒè¯ç¼–è¾‘å™¨èœå•æ­£å¸¸å·¥ä½œï¼Œä¸å—Canvasç¼“å­˜å½±å“

- [ ] Task 5: åç«¯æ—¥å¿—éªŒè¯ (AC: 6)
  - [ ] 5.1 æ£€æŸ¥bug_log.jsonl:
    ```bash
    cat backend/data/bug_log.jsonl | grep "Path traversal"
    ```
  - [ ] 5.2 éªŒè¯æ— æ–°çš„"Path traversal detected"é”™è¯¯
  - [ ] 5.3 éªŒè¯Agent APIè°ƒç”¨æˆåŠŸ:
    ```bash
    cat backend/data/bug_log.jsonl | tail -20
    ```
  - [ ] 5.4 ç¡®è®¤APIå‚æ•°ä¸­çš„`canvas_name`æ ¼å¼æ­£ç¡® (ä»…æ–‡ä»¶åï¼Œæ— è·¯å¾„)

- [ ] Task 6: åˆ›å»ºæµ‹è¯•æŠ¥å‘Š (AC: 1-6)
  - [ ] 6.1 è®°å½•æ‰€æœ‰æµ‹è¯•ç»“æœ
  - [ ] 6.2 æˆªå›¾å…³é”®éªŒè¯ç‚¹ (å¯é€‰)
  - [ ] 6.3 æ›´æ–°StoryçŠ¶æ€ä¸ºDone (å¦‚æ‰€æœ‰æµ‹è¯•é€šè¿‡)

## Dev Notes

### ğŸ“‹ æŠ€æœ¯éªŒè¯æŠ¥å‘Š (Step 3.6)

**éªŒè¯å®Œæˆæ—¶é—´**: 2025-12-14
**éªŒè¯æ‰§è¡Œäºº**: SM Agent (Bob)
**Quality GateçŠ¶æ€**: âœ… PASSED

#### æŠ€æœ¯æ ˆæ¸…å•

| æŠ€æœ¯æ ˆ | æŸ¥è¯¢æ–¹å¼ | éªŒè¯çŠ¶æ€ | æ–‡æ¡£ä½ç½® |
|--------|---------|---------|----------|
| TypeScript (Obsidian Plugin) | Skill | âœ… å·²éªŒè¯ | @obsidian-canvas SKILL.md |
| esbuild (Build) | package.json | âœ… å·²éªŒè¯ | canvas-progress-tracker/obsidian-plugin/package.json |
| Jest (Unit Tests) | package.json | âœ… å·²éªŒè¯ | package.json#scripts.test |

#### å‰ç½®Storyä¾èµ–

**âš ï¸ é‡è¦**: æœ¬Story (21.5.2.3) æ˜¯E2Eæµ‹è¯•Storyï¼Œä¾èµ–ä»¥ä¸‹Storiesçš„å®ç°:

| å‰ç½®Story | ä¿®å¤å†…å®¹ | çŠ¶æ€ |
|-----------|----------|------|
| 21.5.2.1 | å®ç°`cachedCanvasContext`å±æ€§å’Œç¼“å­˜è®¾ç½® | éœ€è¦å…ˆå®Œæˆ |
| 21.5.2.2 | æ·»åŠ èœå•å…³é—­æ—¶ç¼“å­˜æ¸…ç† (`menu.onHide`) | éœ€è¦å…ˆå®Œæˆ |

**å¦‚æœå‰ç½®Storiesæœªå®Œæˆ**: Devåº”å…ˆå®Œæˆ21.5.2.1å’Œ21.5.2.2ï¼Œç„¶åå†æ‰§è¡Œæœ¬Storyçš„E2Eæµ‹è¯•ã€‚

### SDDè§„èŒƒå‚è€ƒ (å¿…å¡«)

**æœ¬Storyä¸ºE2Eæµ‹è¯•Storyï¼Œä¸æ¶‰åŠæ–°APIå¼€å‘**

**ç›¸å…³ç°æœ‰APIç«¯ç‚¹** (9ä¸ªAgentç«¯ç‚¹):
- `POST /api/v1/agents/decompose/basic` - åŸºç¡€æ‹†è§£
- `POST /api/v1/agents/decompose/deep` - æ·±åº¦æ‹†è§£
- `POST /api/v1/agents/score` - è¯„åˆ†
- `POST /api/v1/agents/explain/oral` - å£è¯­åŒ–è§£é‡Š
- `POST /api/v1/agents/explain/four-level` - å››å±‚æ¬¡è§£é‡Š
- `POST /api/v1/agents/explain/clarification` - æ¾„æ¸…è·¯å¾„
- `POST /api/v1/agents/explain/comparison` - å¯¹æ¯”è¡¨
- `POST /api/v1/agents/explain/memory` - è®°å¿†é”šç‚¹
- `POST /api/v1/agents/explain/example` - ä¾‹é¢˜æ•™å­¦
  - [Source: backend/app/api/v1/endpoints/agents.py]
  - å‚æ•°: `canvas_name` (å¿…é¡»æ˜¯çº¯æ–‡ä»¶åï¼Œå¦‚ `"test.canvas"`)
  - éªŒè¯: ä¸å…è®¸è·¯å¾„åˆ†éš”ç¬¦ (`/`, `\`)

**å…³é”®å‚æ•°çº¦æŸ**:
- `canvas_name`: å¿…é¡»é€šè¿‡ `extractCanvasFileName()` æå–
- ä¸å…è®¸åŒ…å«è·¯å¾„éå†å­—ç¬¦ (é˜²æ­¢å®‰å…¨æ¼æ´)
- [Source: backend/app/services/agent_service.py#validate_canvas_name]

### ADRå†³ç­–å…³è” (å¿…å¡«)

| ADRç¼–å· | å†³ç­–æ ‡é¢˜ | å¯¹Storyçš„å½±å“ |
|---------|----------|---------------|
| ADR-001 | ä½¿ç”¨Obsidian Canvas | Canvasæ–‡ä»¶ä½¿ç”¨JSONæ ¼å¼ï¼Œé€šè¿‡Obsidian APIè®¿é—® |

**å…³é”®çº¦æŸ** (from ADR-001):
- Canvasæ–‡ä»¶æ˜¯çº¯JSONæ ¼å¼ (`.canvas` æ‰©å±•å)
- é€šè¿‡ `canvasView.file.path` è·å–Canvasæ–‡ä»¶è·¯å¾„
- [Source: ADR-001#Consequences]

**âš ï¸ æ³¨æ„**: ä»¥ä¸‹æ¶æ„å†³ç­–è®°å½•åœ¨æ¶æ„æ–‡æ¡£ä¸­ï¼Œä½†æ— ç‹¬ç«‹ADR:
- Obsidian `getActiveFile()` åœ¨Canvasè§†å›¾ä¸­çš„è¡Œä¸ºé™åˆ¶
  - [Source: docs/prd/EPIC-21.5.2-CONTEXT-CACHE-FIX.md#Obsidian-API-é™åˆ¶]
  - è¯´æ˜: `getActiveFile()` è¿”å›èŠ‚ç‚¹é“¾æ¥çš„æ–‡ä»¶ï¼Œè€ŒéCanvasæ–‡ä»¶æœ¬èº«

### é¡¹ç›®ç»“æ„

**æ’ä»¶æºç ä½ç½®**:
```
canvas-progress-tracker/obsidian-plugin/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ managers/
â”‚       â””â”€â”€ ContextMenuManager.ts    # ä¸»è¦ä¿®æ”¹æ–‡ä»¶ (Story 21.5.2.1/21.5.2.2)
â”œâ”€â”€ package.json                      # æ„å»ºè„šæœ¬
â”œâ”€â”€ esbuild.config.mjs               # esbuildé…ç½®
â”œâ”€â”€ main.js                          # æ„å»ºäº§ç‰©
â”œâ”€â”€ manifest.json                    # æ’ä»¶æ¸…å•
â””â”€â”€ styles.css                       # æ ·å¼æ–‡ä»¶
```

**éƒ¨ç½²ç›®æ ‡ä½ç½®**:
```
ç¬”è®°åº“/.obsidian/plugins/canvas-review-system/
â”œâ”€â”€ main.js
â”œâ”€â”€ manifest.json
â””â”€â”€ styles.css
```

### æ„å»ºå‘½ä»¤

```bash
# è¿›å…¥æ’ä»¶ç›®å½•
cd canvas-progress-tracker/obsidian-plugin

# ç±»å‹æ£€æŸ¥
npm run typecheck

# æ„å»º
npm run build
# âœ… Verified from package.json#scripts.build:
# "build": "tsc -noEmit -skipLibCheck && node esbuild.config.mjs production"

# éƒ¨ç½²
cp main.js manifest.json styles.css "ç¬”è®°åº“/.obsidian/plugins/canvas-review-system/"
```

### æµ‹è¯•åœºæ™¯è¯¦ç»†è¯´æ˜

#### åœºæ™¯1: å³é”®CanvasèŠ‚ç‚¹ â†’ é€‰æ‹©Agent

**é¢„æœŸè¡Œä¸º**:
1. `handleCanvasNodeContextMenu()` æ„å»ºcontextå¹¶ç¼“å­˜åˆ° `cachedCanvasContext`
2. ç”¨æˆ·é€‰æ‹©èœå•é¡¹æ—¶ï¼Œactionè°ƒç”¨ `getCurrentContext()`
3. `getCurrentContext()` è¿”å›ç¼“å­˜çš„context (è€Œé `getActiveFile()` ç»“æœ)
4. APIæ”¶åˆ°æ­£ç¡®çš„ `canvas_name`

**éªŒè¯ç‚¹**:
- æ§åˆ¶å°æ—¥å¿—: `ContextMenuManager: Context cache set - filePath=Canvas/test.canvas`
- APIå‚æ•°: `canvas_name="test.canvas"` (ä»…æ–‡ä»¶å)
- æ— HTTP 500é”™è¯¯

#### åœºæ™¯2: å­ç›®å½•Canvasæ–‡ä»¶

**é¢„æœŸè¡Œä¸º**:
- æ‰“å¼€ `Canvas/Math/lecture5.canvas`
- å³é”®èŠ‚ç‚¹ â†’ Agentè°ƒç”¨
- APIå‚æ•°: `canvas_name="lecture5.canvas"` (æå–æœ€åä¸€éƒ¨åˆ†)

#### åœºæ™¯3: èœå•å…³é—­åç¼“å­˜æ¸…ç†

**é¢„æœŸè¡Œä¸º**:
- å³é”®CanvasèŠ‚ç‚¹ â†’ ç¼“å­˜è®¾ç½®
- å…³é—­èœå• (ä¸é€‰æ‹©ä»»ä½•é¡¹) â†’ ç¼“å­˜æ¸…é™¤ (`menu.onHide()`)
- å³é”®ç¼–è¾‘å™¨ â†’ ä½¿ç”¨ `getActiveFile()` (æ­£å¸¸è¡Œä¸º)

### Testing

**æµ‹è¯•ç±»å‹**: æ‰‹åŠ¨E2Eæµ‹è¯• (Manual End-to-End Testing)

**æµ‹è¯•æ¡†æ¶**: N/A (æœ¬Storyä¸ºæ‰‹åŠ¨éªŒè¯ï¼Œä¸æ¶‰åŠè‡ªåŠ¨åŒ–æµ‹è¯•ä»£ç )

**æµ‹è¯•æ¸…å•**:
| æµ‹è¯•åœºæ™¯ | é¢„æœŸç»“æœ | éªŒè¯æ–¹æ³• |
|----------|----------|----------|
| æ„å»ºæˆåŠŸ | æ— é”™è¯¯ | `npm run build` é€€å‡ºç  0 |
| éƒ¨ç½²æˆåŠŸ | æ’ä»¶åŠ è½½ | Obsidianæ§åˆ¶å°æ— é”™è¯¯ |
| Canvaså³é”®â†’Agent | æ­£ç¡®canvas_name | æ§åˆ¶å°æ—¥å¿— + APIå“åº” |
| å­ç›®å½•Canvas | æ­£ç¡®æå–æ–‡ä»¶å | APIå‚æ•°éªŒè¯ |
| å¿«é€Ÿè¿ç»­å³é”® | æ¯æ¬¡æ­£ç¡®context | æ§åˆ¶å°æ—¥å¿— |
| ç¼–è¾‘å™¨å³é”® | ä¸å—ç¼“å­˜å½±å“ | ç¼–è¾‘å™¨èœå•æ­£å¸¸ |

**åç«¯æ—¥å¿—æ£€æŸ¥**:
```bash
# æ£€æŸ¥æ˜¯å¦æœ‰Path traversalé”™è¯¯
grep "Path traversal" backend/data/bug_log.jsonl

# æ£€æŸ¥æœ€è¿‘çš„APIè°ƒç”¨
tail -20 backend/data/bug_log.jsonl
```

### æŠ€æœ¯çº¦æŸå’Œæ³¨æ„äº‹é¡¹

**ç‰ˆæœ¬çº¦æŸ**:
- Obsidian: â‰¥1.0.0 (CanvasåŠŸèƒ½æ”¯æŒ)
- Node.js: â‰¥18.0.0 (esbuildè¦æ±‚)
- TypeScript: â‰¥5.0.0

**éƒ¨ç½²æ³¨æ„äº‹é¡¹**:
- éƒ¨ç½²åå¿…é¡»åœ¨Obsidianä¸­é‡è½½æ’ä»¶
- ä½¿ç”¨ `Ctrl+P` â†’ "Reload app without saving" æˆ–é‡å¯Obsidian
- æ£€æŸ¥å¼€å‘è€…æ§åˆ¶å° (`Ctrl+Shift+I`) ç¡®è®¤æ— åŠ è½½é”™è¯¯

**å›æ»šè®¡åˆ’**:
- å¦‚æµ‹è¯•å¤±è´¥ï¼Œå¯é€šè¿‡Gitæ¢å¤ `ContextMenuManager.ts` åˆ°ä¿®å¤å‰çŠ¶æ€
- `git checkout HEAD~1 -- canvas-progress-tracker/obsidian-plugin/src/managers/ContextMenuManager.ts`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-14 | 1.0 | Initial story draft with UltraThink analysis | SM Agent (Bob) |

## References

- **Epic**: [docs/prd/EPIC-21.5.2-CONTEXT-CACHE-FIX.md](../prd/EPIC-21.5.2-CONTEXT-CACHE-FIX.md)
- **ADR-001**: [docs/architecture/decisions/0001-use-obsidian-canvas.md](../architecture/decisions/0001-use-obsidian-canvas.md)
- **Coding Standards**: [docs/architecture/coding-standards.md](../architecture/coding-standards.md)
- **Plugin Source**: [canvas-progress-tracker/obsidian-plugin/src/managers/ContextMenuManager.ts](../../canvas-progress-tracker/obsidian-plugin/src/managers/ContextMenuManager.ts)

---

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent_

### Debug Log References
_To be filled by Dev Agent_

### Completion Notes List
_To be filled by Dev Agent_

### File List
_To be filled by Dev Agent_

---

## QA Results

### Review Date: 2025-12-14

### Reviewed By: Quinn (Test Architect)

### Review Type: Pre-Implementation Story Validation (UltraThink Deep Analysis)

### Story Quality Assessment

**æ•´ä½“è¯„ä¼°**: âœ… **ä¼˜ç§€** - Storyç»“æ„å®Œæ•´ï¼Œæµ‹è¯•åœºæ™¯å…¨é¢ï¼ŒæŠ€æœ¯ä¸Šä¸‹æ–‡å……åˆ†

**è¯„å®¡è§¦å‘**: æ·±åº¦è¯„å®¡ (6ä¸ªACs + å®‰å…¨éªŒè¯æ¶‰åŠ)

### Requirements Traceability (Given-When-Then)

| AC | æ˜ å°„ä»»åŠ¡ | è¦†ç›–çŠ¶æ€ |
|----|----------|----------|
| AC-1 (æ„å»ºæˆåŠŸ) | Task 1.3 | âœ… å®Œæ•´ |
| AC-2 (éƒ¨ç½²æˆåŠŸ) | Task 2.1 | âœ… å®Œæ•´ |
| AC-3 (é‡è½½æˆåŠŸ) | Task 2.2-2.3 | âœ… å®Œæ•´ |
| AC-4 (AgentåŠŸèƒ½) | Task 3.3-3.5 | âœ… å®Œæ•´ |
| AC-5 (æ—¥å¿—æ­£ç¡®) | Task 3.4, 4.1-4.3 | âœ… å®Œæ•´ |
| AC-6 (åç«¯å‚æ•°) | Task 5.1-5.4 | âœ… å®Œæ•´ |

**ACè¦†ç›–ç‡**: 100% (6/6)

### Test Architecture Assessment

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| æµ‹è¯•è¦†ç›– | A | 6åœºæ™¯è¦†ç›–æ­£å¸¸+è¾¹ç•Œ |
| æµ‹è¯•å±‚çº§ | A | E2Eçº§åˆ«é€‚åˆ |
| è¾¹ç•Œè¦†ç›– | A | 3ä¸ªè¾¹ç•Œåœºæ™¯ |
| å¯è§‚å¯Ÿæ€§ | A | æ§åˆ¶å°+æ—¥å¿—åŒéªŒè¯ |

### Compliance Check

- Coding Standards: âœ“ N/A (E2Eæµ‹è¯•Story)
- Project Structure: âœ“ é¡¹ç›®ç»“æ„æ¸…æ™°
- Testing Strategy: âœ“ æ‰‹åŠ¨E2Eæµ‹è¯•é€‚åˆé¦–æ¬¡éªŒè¯
- All ACs Testable: âœ“ æ‰€æœ‰ACæœ‰æ˜ç¡®éªŒè¯æ–¹æ³•
- SDD References: âœ“ 9ä¸ªAgentç«¯ç‚¹æ­£ç¡®åˆ—å‡º
- ADR Compliance: âœ“ ADR-001æ­£ç¡®å¼•ç”¨

### NFR Validation

| NFR | çŠ¶æ€ | è¯´æ˜ |
|-----|------|------|
| Security | âœ… PASS | Path traversaléªŒè¯ |
| Reliability | âœ… PASS | ç¼“å­˜æ¸…ç†æœºåˆ¶ |
| Maintainability | âœ… PASS | å›æ»šè®¡åˆ’æä¾› |

### Improvements Checklist

- [x] APIç«¯ç‚¹æ¨¡å¼å·²ä¿®æ­£ä¸ºå®é™…9ä¸ªç«¯ç‚¹
- [x] å‰ç½®Storyä¾èµ–å·²æ˜ç¡®å£°æ˜
- [x] SDDå’ŒADRå¼•ç”¨å·²éªŒè¯
- [ ] (Future) è€ƒè™‘æ·»åŠ Playwrightè‡ªåŠ¨åŒ–E2Eæµ‹è¯•
- [ ] (Future) åˆ›å»ºæµ‹è¯•ç”¨Canvasæ–‡ä»¶æ¨¡æ¿

### Technical Debt Identified

| å€ºåŠ¡é¡¹ | å½±å“ | ä¼˜å…ˆçº§ |
|--------|------|--------|
| æ— è‡ªåŠ¨åŒ–E2Eæµ‹è¯• | ä½ | Nice-to-Have |

### Blocking Conditions

**âš ï¸ å‰ç½®ä¾èµ–**: æœ¬Storyä¾èµ–ä»¥ä¸‹Storieså…ˆå®Œæˆå®ç°:
- Story 21.5.2.1: å®ç°`cachedCanvasContext`å±æ€§
- Story 21.5.2.2: æ·»åŠ `menu.onHide`ç¼“å­˜æ¸…ç†

**Devå¿…é¡»ç¡®è®¤å‰ç½®StoriesçŠ¶æ€åå†æ‰§è¡Œæœ¬Story**

### Gate Status

**Gate**: PASS â†’ docs/qa/gates/21.5.2.3-e2e-testing.yml

### Recommended Status

âœ“ **Ready for Approved** (å¾…å‰ç½®Storieså®Œæˆåå¯åˆ†é…ç»™Devæ‰§è¡Œ)

**Note**: è¿™æ˜¯E2Eæµ‹è¯•Storyï¼Œæ— ä»£ç å®ç°ã€‚Gate PASSè¡¨ç¤ºStoryè®¾è®¡å®Œæ•´ã€å¯æµ‹è¯•ã€å¯æ‰§è¡Œã€‚
