# Story 31.A.8: Mock é™çº§è·¯å¾„æ—¥å¿—é€æ˜åŒ–

## å…ƒæ•°æ®

| å±æ€§ | å€¼ |
|------|------|
| Story ID | 31.A.8 |
| EPIC | EPIC-31 - æ£€éªŒç™½æ¿æ™ºèƒ½å¼•å¯¼ç³»ç»Ÿ |
| ä¼˜å…ˆçº§ | P1 - High |
| çŠ¶æ€ | Done |
| æ¥æº | å¯¹æŠ—æ€§å®¡æ ¸ 2026-02-10 å‘ç° #4/#5 (ğŸŸ¡ Severity) |
| ç±»å‹ | æŠ€æœ¯å€ºåŠ¡ / é™çº§é€æ˜åŒ– |

---

## 0. ä»£ç ç°å®æ£€æŸ¥ç»“æœ (2026-02-10)

> æœ¬ Story æ¥æºäºå¯¹æŠ—æ€§å®¡æ ¸å‘ç°ï¼š
> - #4: `_mock_evaluate_answer()` ä½¿ç”¨å­—ç¬¦é•¿åº¦è¯„åˆ†ï¼Œç”¨æˆ·æ”¶åˆ°çœ‹ä¼¼ç²¾ç¡®çš„åˆ†æ•°ä½†å®Œå…¨åŸºäºç­”æ¡ˆé•¿åº¦
> - #5: `degraded` æ ‡å¿—å·²åœ¨ API å“åº”ä¸­è¿”å› (L708)ï¼Œä½†**æ˜¯å¦**è¢«å‰ç«¯åˆ©ç”¨æ¥æé†’ç”¨æˆ·éœ€éªŒè¯

### 0.1 `_mock_evaluate_answer` è°ƒç”¨è·¯å¾„ (å·²éªŒè¯)

| è°ƒç”¨åœºæ™¯ | ä»£ç ä½ç½® | è§¦å‘æ¡ä»¶ | å½“å‰æ—¥å¿— |
|---------|---------|---------|---------|
| Mock æ¨¡å¼ | `verification_service.py:1254-1257` | `USE_MOCK_VERIFICATION=true` | `logger.debug("Mock mode enabled")` |
| Agent è¶…æ—¶ | `verification_service.py:1270-1273` | `asyncio.TimeoutError` | `logger.warning("timeout...")` |
| Agent å¼‚å¸¸ | `verification_service.py:1276-1278` | `Exception` | `logger.error("call failed...")` |
| Agent ä¸å¯ç”¨ | `verification_service.py:1365-1367` | `agent_service is None` | `logger.warning("No agent service")` |

### 0.2 `_mock_evaluate_answer` è¯„åˆ†é€»è¾‘ (å·²éªŒè¯)

```python
# verification_service.py:1394-1430
def _mock_evaluate_answer(self, user_answer: str) -> tuple:
    length = len(user_answer)
    if length > 200:    score = 85  # "excellent"
    elif length > 100:  score = 70  # "good"
    elif length > 30:   score = 50  # "partial"
    else:               score = 25  # "wrong"
```

**é—®é¢˜**: ç”¨æˆ·å†™äº† 201 ä¸ªå­—ç¬¦çš„æ— æ„ä¹‰æ–‡æœ¬ä¹Ÿå¾— 85 åˆ†ã€‚è¯„åˆ†å®Œå…¨ä¸åæ˜ ç†è§£è´¨é‡ã€‚

### 0.3 `degraded` æ ‡å¿—ä¼ æ’­ (å·²éªŒè¯)

| å±‚çº§ | ä½ç½® | `degraded` çŠ¶æ€ |
|------|------|----------------|
| Service è¿”å› | `verification_service.py:729` | `"degraded": True/False` + `degraded_reason` + `degraded_warning` |
| API å“åº”æ¨¡å‹ | `review_models.py:SubmitAnswerResponse` | âœ… åŒ…å« `degraded`, `degraded_reason`, `degraded_warning` å­—æ®µ (Code Review ä¿®å¤) |
| API ç«¯ç‚¹ | `review.py:1730` | âœ… æ„é€  SubmitAnswerResponse æ—¶ä¼ å…¥ degraded å­—æ®µ (Code Review ä¿®å¤) |
| å‰ç«¯æ¥æ”¶ | `ScoringResultPanel.ts` | âš ï¸ **éœ€éªŒè¯**: æ˜¯å¦è¯»å–å¹¶å±•ç¤º `degraded` å­—æ®µ |

---

## 1. é—®é¢˜æè¿°

### 1.1 æ ¸å¿ƒé—®é¢˜

å½“ AI è¯„åˆ† Agent ä¸å¯ç”¨æ—¶ï¼Œç³»ç»Ÿé™é»˜å›é€€åˆ°åŸºäºå­—ç¬¦é•¿åº¦çš„ mock è¯„åˆ†ã€‚ç”¨æˆ·çœ‹åˆ°çš„åˆ†æ•°ç•Œé¢ä¸çœŸå® AI è¯„åˆ†**å®Œå…¨ç›¸åŒ**ï¼Œæ— æ³•åŒºåˆ†ï¼š

```
çœŸå® AI è¯„åˆ†: "ä½ å¯¹å¾®ç§¯åˆ†é“¾å¼æ³•åˆ™çš„ç†è§£å¾ˆå¥½ï¼Œä½†ç¼ºå°‘å¯¹å¤åˆå‡½æ•°çš„..." â†’ 82 åˆ†
Mock è¯„åˆ†:    "askjdhaksjdh é‡å¤100æ¬¡å‡‘å­—æ•°..." â†’ 85 åˆ† (å­—ç¬¦ > 200)
```

**é™çº§å·²å‘ç”Ÿä½†ç”¨æˆ·ä¸çŸ¥é“** â€” è¿™è¿åäº† CLAUDE.md ä¸­ "é™çº§è·¯å¾„é€æ˜æ€§" çš„å¼ºåˆ¶è§„åˆ™ã€‚

### 1.2 å½±å“

- **ç”¨æˆ·ä¿¡ä»»**: ç”¨æˆ·ä»¥ä¸ºè‡ªå·±æŒæ¡äº†æ¦‚å¿µï¼Œå®é™…è¯„åˆ†æ˜¯å‡çš„
- **å­¦ä¹ æ•ˆæœ**: Mock è¯„åˆ†å¯èƒ½é”™è¯¯åœ°æ ‡è®°æ¦‚å¿µä¸º"å·²æŒæ¡"ï¼Œå½±å“åç»­å¤ä¹ è®¡åˆ’
- **è¿ç»´ç›²åŒº**: æ—¥å¿—ä¸­ mock è°ƒç”¨çš„ `logger.debug` åœ¨ç”Ÿäº§ç¯å¢ƒé»˜è®¤ä¸è¾“å‡º

---

## 2. ç›®æ ‡

è®©æ‰€æœ‰ mock é™çº§è·¯å¾„å¯¹ç”¨æˆ·å’Œè¿ç»´å®Œå…¨é€æ˜ï¼š

| ç›®æ ‡ | è¯´æ˜ |
|------|------|
| æ—¥å¿—å‡çº§ | Mock è¯„åˆ†ä» debug â†’ WARNING |
| API å“åº”å¢å¼º | `degraded` å­—æ®µå·²å­˜åœ¨ï¼Œç¡®ä¿åŒ…å«åŸå› è¯´æ˜ |
| è¯„åˆ†ç»“æœæ ‡æ³¨ | è¿”å›å€¼ä¸­åŒ…å«é™çº§åŸå› ï¼ˆtimeout/unavailable/mock_modeï¼‰ |
| ä»£ç æ³¨é‡Š | æ ‡æ³¨ mock è¯„åˆ†çš„å±€é™æ€§ |

---

## 3. éªŒæ”¶æ ‡å‡†

### AC-31.A.8.1: Mock è¯„åˆ†æ—¥å¿—å‡çº§ä¸º WARNING

**ä¿®æ”¹æ–‡ä»¶**: `backend/app/services/verification_service.py`

**ä¿®æ”¹ä½ç½®**: æ‰€æœ‰è°ƒç”¨ `_mock_evaluate_answer()` çš„åœ°æ–¹ (4 å¤„)

**é¢„æœŸè¡Œä¸º**: æ¯æ¬¡ mock è¯„åˆ†è§¦å‘æ—¶ï¼Œè¾“å‡º WARNING æ—¥å¿—:
```python
logger.warning(
    f"[DEGRADED SCORING] Using character-length mock for concept '{concept}'. "
    f"Reason: {reason}. Score={score} is NOT based on content quality. "
    "User may receive inaccurate assessment."
)
```

å…¶ä¸­ `reason` ä¸ºä»¥ä¸‹ä¹‹ä¸€:
- `"mock_mode_enabled"` â€” USE_MOCK_VERIFICATION=true
- `"agent_timeout"` â€” Agent API è¶…æ—¶
- `"agent_exception"` â€” Agent è°ƒç”¨å¼‚å¸¸
- `"agent_unavailable"` â€” agent_service ä¸º None

**éªŒæ”¶æ¡ä»¶**:
- [ ] 4 ä¸ªè°ƒç”¨ç‚¹çš„æ—¥å¿—ä» debug/error æå‡åˆ° WARNING
- [ ] WARNING æ—¥å¿—åŒ…å«æ¦‚å¿µåç§°ã€é™çº§åŸå› ã€ç”Ÿæˆçš„åˆ†æ•°
- [ ] WARNING æ—¥å¿—æ˜ç¡®å£°æ˜ "NOT based on content quality"

---

### AC-31.A.8.2: API å“åº”åŒ…å«é™çº§åŸå› 

**ä¿®æ”¹æ–‡ä»¶**: `backend/app/services/verification_service.py`

**ä¿®æ”¹ä½ç½®**: `process_answer()` æ–¹æ³•è¿”å›å€¼ (çº¦ L700-710)

**å½“å‰è¿”å›**:
```python
{
    "score": score,
    "degraded": degraded,  # True/False â€” å·²å­˜åœ¨
    "action": action["action"],
    ...
}
```

**å¢å¼ºä¸º**:
```python
{
    "score": score,
    "degraded": degraded,
    "degraded_reason": reason if degraded else None,  # æ–°å¢
    "degraded_warning": (
        "è¯„åˆ†åŸºäºç­”æ¡ˆé•¿åº¦è€Œéå†…å®¹è´¨é‡ï¼Œä»…ä¾›å‚è€ƒ"
        if degraded else None
    ),  # æ–°å¢
    "action": action["action"],
    ...
}
```

**éªŒæ”¶æ¡ä»¶**:
- [ ] `degraded=True` æ—¶ï¼Œå“åº”åŒ…å« `degraded_reason` å’Œ `degraded_warning`
- [ ] `degraded=False` æ—¶ï¼Œè¿™ä¸¤ä¸ªå­—æ®µä¸º `null`ï¼ˆå‘åå…¼å®¹ï¼‰
- [ ] `degraded_reason` å€¼ä¸ºæšä¸¾: `mock_mode_enabled | agent_timeout | agent_exception | agent_unavailable`

---

### AC-31.A.8.3: `_mock_evaluate_answer` æ·»åŠ å±€é™æ€§æ³¨é‡Š

**ä¿®æ”¹æ–‡ä»¶**: `backend/app/services/verification_service.py`

**ä¿®æ”¹ä½ç½®**: `_mock_evaluate_answer()` æ–¹æ³• (L1394)

**é¢„æœŸæ³¨é‡Š**:
```python
def _mock_evaluate_answer(self, user_answer: str) -> tuple:
    """
    âš ï¸ DEGRADED FALLBACK (Story 31.A.8):
    This method scores answers based SOLELY on character length.
    It does NOT evaluate content quality, correctness, or understanding.

    Scoring thresholds:
    - >200 chars â†’ 85 ("excellent") â€” regardless of content
    - >100 chars â†’ 70 ("good")
    - >30 chars  â†’ 50 ("partial")
    - â‰¤30 chars  â†’ 25 ("wrong")

    This is used when:
    1. USE_MOCK_VERIFICATION=true (dev/test mode)
    2. AI scoring agent times out
    3. AI scoring agent throws an exception
    4. agent_service is not injected (DI failure)

    KNOWN ISSUE: A 201-character nonsense string scores higher than
    a 29-character correct answer. This is by design as an emergency
    fallback, not a quality assessment.

    Future improvement: Consider at least checking for keyword overlap
    with the concept being tested. See Story 31.A.10.
    """
```

**éªŒæ”¶æ¡ä»¶**:
- [ ] `_mock_evaluate_answer` æœ‰å®Œæ•´çš„ docstring è¯´æ˜å±€é™æ€§
- [ ] docstring åŒ…å« 4 ä¸ªè§¦å‘åœºæ™¯å’Œå·²çŸ¥é—®é¢˜è¯´æ˜

---

### AC-31.A.8.4: `_evaluate_answer_with_scoring_agent` è¿”å›é™çº§åŸå› 

**ä¿®æ”¹æ–‡ä»¶**: `backend/app/services/verification_service.py`

**ä¿®æ”¹ä½ç½®**: `_evaluate_answer_with_scoring_agent()` æ–¹æ³• (L1236+)

**å½“å‰ç­¾å**:
```python
async def _evaluate_answer_with_scoring_agent(...) -> tuple[str, float, bool]:
    # Returns (quality, score, degraded)
```

**å¢å¼ºä¸º**:
```python
async def _evaluate_answer_with_scoring_agent(...) -> tuple[str, float, bool, str | None]:
    # Returns (quality, score, degraded, degraded_reason)
```

**æ¯ä¸ªåˆ†æ”¯çš„è¿”å›å€¼**:
| åˆ†æ”¯ | åŸè¿”å› | æ–°è¿”å› |
|------|--------|--------|
| Mock æ¨¡å¼ | `quality, score, True` | `quality, score, True, "mock_mode_enabled"` |
| Agent è¶…æ—¶ | `quality, score, True` | `quality, score, True, "agent_timeout"` |
| Agent å¼‚å¸¸ | `quality, score, True` | `quality, score, True, "agent_exception"` |
| Agent ä¸å¯ç”¨ | `quality, score, True` | `quality, score, True, "agent_unavailable"` |
| æ­£å¸¸è¯„åˆ† | `quality, score, False` | `quality, score, False, None` |

**éªŒæ”¶æ¡ä»¶**:
- [ ] æ–¹æ³•ç­¾åæ‰©å±•ä¸º 4 å…ƒç»„
- [ ] 5 ä¸ªè¿”å›åˆ†æ”¯éƒ½åŒ…å«æ­£ç¡®çš„ `degraded_reason`
- [ ] è°ƒç”¨æ–¹ (`process_answer`) æ­£ç¡®æ¥æ”¶å¹¶ä¼ æ’­åˆ° API å“åº”

---

## 4. æŠ€æœ¯å®ç°

### 4.1 ä¿®æ”¹æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ | å·¥ä½œé‡ |
|------|---------|--------|
| `backend/app/services/verification_service.py` | ä¿®æ”¹ â€” æ—¥å¿—å‡çº§ + è¿”å›å€¼å¢å¼º + æ³¨é‡Š | ~60 è¡Œ |
| `backend/tests/unit/test_mock_degradation_transparency.py` | æ–°å»º â€” é™çº§é€æ˜åŒ–æµ‹è¯• | ~120 è¡Œ |

### 4.2 æµ‹è¯•è®¡åˆ’

```python
# test_mock_degradation_transparency.py

class TestMockDegradationTransparency:
    """Story 31.A.8: Mock é™çº§è·¯å¾„é€æ˜åŒ–æµ‹è¯•"""

    async def test_mock_mode_logs_warning(self, caplog, verification_service):
        """AC-31.A.8.1: Mock æ¨¡å¼è¾“å‡º WARNING"""
        with patch.dict(os.environ, {"USE_MOCK_VERIFICATION": "true"}):
            # ... trigger process_answer
            assert "DEGRADED SCORING" in caplog.text
            assert "mock_mode_enabled" in caplog.text

    async def test_timeout_logs_warning(self, caplog, verification_service):
        """AC-31.A.8.1: Agent è¶…æ—¶è¾“å‡º WARNING"""
        # Mock agent to timeout
        # ... trigger process_answer
        assert "DEGRADED SCORING" in caplog.text
        assert "agent_timeout" in caplog.text

    async def test_degraded_response_includes_reason(self, verification_service):
        """AC-31.A.8.2: API å“åº”åŒ…å«é™çº§åŸå› """
        # Force mock mode
        result = await verification_service.process_answer(sid, "answer")
        assert result["degraded"] is True
        assert result["degraded_reason"] == "mock_mode_enabled"
        assert "ä»…ä¾›å‚è€ƒ" in result["degraded_warning"]

    async def test_normal_response_no_degradation(self, verification_service):
        """AC-31.A.8.2: æ­£å¸¸è¯„åˆ†æ— é™çº§æ ‡è®°"""
        # Mock successful agent call
        result = await verification_service.process_answer(sid, "answer")
        assert result["degraded"] is False
        assert result["degraded_reason"] is None

    async def test_evaluate_returns_four_tuple(self, verification_service):
        """AC-31.A.8.4: è¿”å› 4 å…ƒç»„"""
        quality, score, degraded, reason = (
            await verification_service._evaluate_answer_with_scoring_agent(...)
        )
        assert isinstance(reason, (str, type(None)))
```

---

## 5. é£é™©ä¸ç¼“è§£

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| è¿”å›å€¼å˜æ›´ç ´åè°ƒç”¨æ–¹ | ä¸­ | é«˜ | å…¨å±€æœç´¢ `_evaluate_answer_with_scoring_agent` æ‰€æœ‰è°ƒç”¨æ–¹ï¼Œç¡®ä¿éƒ½æ›´æ–°ä¸º 4 å…ƒç»„è§£åŒ… |
| æ—¥å¿—å™ªéŸ³ | ä½ | ä½ | WARNING ä»…åœ¨é™çº§æ—¶è¾“å‡ºï¼Œæ­£å¸¸è¿è¡Œä¸è§¦å‘ |
| API å“åº”æ ¼å¼å˜æ›´ | ä½ | ä½ | åªæ–°å¢å­—æ®µ (`degraded_reason`, `degraded_warning`)ï¼Œä¸ä¿®æ”¹ç°æœ‰å­—æ®µ |

---

## 6. Definition of Done

- [x] AC-31.A.8.1: 4 ä¸ª mock è°ƒç”¨ç‚¹çš„æ—¥å¿—å‡çº§ä¸º WARNING
- [x] AC-31.A.8.2: API å“åº”åŒ…å« `degraded_reason` å’Œ `degraded_warning` (Code Review ä¿®å¤: SubmitAnswerResponse æ¨¡å‹ + review.py ç«¯ç‚¹)
- [x] AC-31.A.8.3: `_mock_evaluate_answer` æœ‰å®Œæ•´çš„å±€é™æ€§ docstring
- [x] AC-31.A.8.4: `_evaluate_answer_with_scoring_agent` è¿”å› 4 å…ƒç»„å« reason
- [x] æ–°å¢æµ‹è¯•è¦†ç›–æ‰€æœ‰é™çº§åœºæ™¯ (16 unit + 2 API integration = 18 tests)
- [x] ç°æœ‰æµ‹è¯•æ— å›å½’ï¼ˆ`_do_scoring_agent_call` ä¹Ÿæ›´æ–°ä¸º 4 å…ƒç»„ï¼Œè°ƒç”¨æ–¹ `process_answer` å·²é€‚é…ï¼‰
- [x] Code Review: API å±‚ degraded å­—æ®µç«¯åˆ°ç«¯éªŒè¯é€šè¿‡ (31 tests total)

---

## 7. ä¾èµ–å…³ç³»

```
31.A.8 Mock é™çº§é€æ˜åŒ– (æœ¬ Story)
    â”œâ”€â”€ æ— å‰ç½®ä¾èµ–
    â”œâ”€â”€ åç»­: å‰ç«¯ ScoringResultPanel å¯åˆ©ç”¨ degraded_reason å¢å¼º UI æç¤º
    â””â”€â”€ å…³è”: Story 31.10 (æ¨èé™çº§ UI æŒ‡ç¤ºå™¨) â€” å‰ç«¯å·²æœ‰é™çº§ UI æ¨¡å¼
```

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| 1.0 | 2026-02-10 | åˆå§‹åˆ›å»º â€” æ¥æºäºå¯¹æŠ—æ€§å®¡æ ¸å‘ç° #4 (mock å­—ç¬¦é•¿åº¦è¯„åˆ†) å’Œ #5 (degraded æ ‡å¿—åˆ©ç”¨) |
| 2.0 | 2026-02-10 | å®ç°å®Œæˆ â€” 4 ä¸ª WARNING æ—¥å¿—, 4 å…ƒç»„è¿”å›, API å“åº”å¢å¼º, docstring, 16 æµ‹è¯•é€šè¿‡ |
| 2.1 | 2026-02-10 | Code Review ä¿®å¤ â€” C1: SubmitAnswerResponse æ¨¡å‹è¡¥å…¨ degraded å­—æ®µ + review.py ç«¯ç‚¹é€ä¼ ; H1: API å±‚é›†æˆæµ‹è¯•; H3/H4: é™ˆæ—§æ³¨é‡Šå’Œè„†å¼± monkey-patching ä¿®å¤; æ€»è®¡ 31 æµ‹è¯•é€šè¿‡ |

---

## 8. Dev Agent Record

### Implementation Notes

**å®ç°æ—¥æœŸ**: 2026-02-10

**ä»£ç ç°å®æ£€æŸ¥å·®å¼‚**:
- Story ä¸­æè¿°çš„è¯„åˆ†é˜ˆå€¼ (>200/85, >100/70, >30/50, â‰¤30/25) ä¸å®é™…ä»£ç  (>100/90, >50/70, >20/50, â‰¤20/20) ä¸åŒ
- ä»¥å®é™…ä»£ç ä¸ºå‡†å®ç°ï¼Œdocstring ä¸­ä½¿ç”¨æ­£ç¡®çš„é˜ˆå€¼

**ä¿®æ”¹æ¦‚è¦**:
1. `_evaluate_answer_with_scoring_agent()`: 3 å…ƒç»„ â†’ 4 å…ƒç»„ (å¢åŠ  degraded_reason)
2. `_do_scoring_agent_call()`: åŒæ­¥æ‰©å±•ä¸º 4 å…ƒç»„è¿”å›
3. `process_answer()`: è§£åŒ… 4 å…ƒç»„, å“åº”å¢åŠ  `degraded_reason` å’Œ `degraded_warning`
4. 4 ä¸ªé™çº§è·¯å¾„çš„æ—¥å¿—ä» debug/error ç»Ÿä¸€å‡çº§ä¸º WARNINGï¼ŒåŒ…å« `[DEGRADED SCORING]` å‰ç¼€
5. `_mock_evaluate_answer()` docstring å®Œæ•´æè¿°å±€é™æ€§å’Œè§¦å‘åœºæ™¯

**æµ‹è¯•ç»“æœ**:
- æ–°å¢æµ‹è¯•: 16/16 passed
- ç°æœ‰ verification_service æµ‹è¯•: 15/15 passed (æ— å›å½’)
- å…¨é‡ unit æµ‹è¯•: 1721/1732 passed (11 ä¸ªé¢„å­˜å¤±è´¥ï¼Œä¸æœ¬ Story æ— å…³)

### Code Review Record (2026-02-10)

**å¯¹æŠ—æ€§å®¡æ ¸å‘ç°**: 2 CRITICAL, 4 HIGH, 3 LOW

**C1 (CRITICAL): SubmitAnswerResponse æ¨¡å‹ç¼ºå°‘ degraded å­—æ®µ**
- `review_models.py:SubmitAnswerResponse` ä¸å« `degraded`, `degraded_reason`, `degraded_warning`
- FastAPI é™é»˜ä¸¢å¼ƒæœªå®šä¹‰å­—æ®µ â†’ AC-31.A.8.2 åœ¨ HTTP å±‚å®Œå…¨å¤±æ•ˆ
- ä¿®å¤: æ¨¡å‹æ–°å¢ 3 å­—æ®µ + `review.py` ç«¯ç‚¹æ„é€ æ—¶ä¼ å…¥

**C2 (CRITICAL â†’ éæœ¬ Story èŒƒç•´): å‰ç«¯ ScoringResultPanel æœªåˆ©ç”¨ degraded å­—æ®µ**
- è®°å½•ä¸ºåç»­ Story 31.10 å‰ç«¯é›†æˆèŒƒå›´

**H1 (HIGH): ç¼ºå°‘ API å±‚é›†æˆæµ‹è¯•**
- ä¿®å¤: æ–°å¢ `TestDegradedFieldsInApiResponse` (2 æµ‹è¯•)ï¼ŒéªŒè¯ HTTP å“åº”å« degraded å­—æ®µ

**H3 (HIGH): test_degraded_flag_propagation.py é™ˆæ—§ 3 å…ƒç»„æ³¨é‡Š**
- ä¿®å¤: æ›´æ–°ä¸º 4 å…ƒç»„æ³¨é‡Š

**H4 (HIGH): test_mock_degradation_transparency.py è„†å¼± monkey-patching**
- ä¿®å¤: 4 å¤„æ‰‹å·¥ monkey-patch æ›¿æ¢ä¸º `patch.object()` context manager

**ä¿®å¤åæµ‹è¯•ç»“æœ**: 31/31 passed (16 unit + 5 degraded propagation + 10 integration)

### File List

| æ–‡ä»¶ | æ“ä½œ |
|------|------|
| `backend/app/services/verification_service.py` | ä¿®æ”¹ |
| `backend/app/models/review_models.py` | ä¿®æ”¹ (Code Review: SubmitAnswerResponse å¢åŠ  degraded å­—æ®µ) |
| `backend/app/api/v1/endpoints/review.py` | ä¿®æ”¹ (Code Review: ç«¯ç‚¹æ„é€ é€ä¼  degraded å­—æ®µ) |
| `backend/tests/unit/test_mock_degradation_transparency.py` | æ–°å»º + ä¿®æ”¹ (Code Review: patch.object æ›¿æ¢ monkey-patch) |
| `backend/tests/unit/test_degraded_flag_propagation.py` | ä¿®æ”¹ (Code Review: é™ˆæ—§ 3 å…ƒç»„æ³¨é‡Šä¿®å¤) |
| `backend/tests/integration/test_verification_interactive_e2e.py` | ä¿®æ”¹ (Code Review: æ–°å¢ API å±‚é™çº§å­—æ®µæµ‹è¯• + ä¿®å¤ fixture patch ç›®æ ‡) |
| `docs/stories/31.A.8.story.md` | ä¿®æ”¹ (çŠ¶æ€æ›´æ–° + Code Review è®°å½•) |
