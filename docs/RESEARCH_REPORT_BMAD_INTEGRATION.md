# BMadæ–¹æ³•é›†æˆè°ƒç ”æŠ¥å‘Š - Canvas Learning System

**æŠ¥å‘Šç‰ˆæœ¬**: v1.0
**ç”Ÿæˆæ—¥æœŸ**: 2025-11-17
**è°ƒç ”æ–¹æ³•**: çœŸå®æ¡ˆä¾‹åˆ†æ + GitHubä»“åº“å®¡æŸ¥ + ç¤¾åŒºæœ€ä½³å®è·µ
**ç›®æ ‡é¡¹ç›®**: Canvas Learning System (å¤§å‹AIè¾…åŠ©å­¦ä¹ ç³»ç»Ÿ)

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### æ ¸å¿ƒå‘ç°

âœ… **æˆåŠŸæ‰¾åˆ°BMadæ–¹æ³•çš„å®˜æ–¹èµ„æºå’ŒçœŸå®ä½¿ç”¨æ¡ˆä¾‹**ï¼BMadï¼ˆBreakthrough Method for Agentic Developmentï¼‰æ˜¯ä¸€ä¸ªæˆç†Ÿçš„AIé©±åŠ¨æ•æ·å¼€å‘æ¡†æ¶ï¼Œæœ‰å®Œæ•´çš„æ–‡æ¡£ã€GitHubä»“åº“å’Œç¤¾åŒºæ”¯æŒã€‚

**å…³é”®å‘ç°**ï¼š
- âœ… æ‰¾åˆ°BMadå®˜æ–¹ä»“åº“ï¼šhttps://github.com/bmad-code-org/BMAD-METHOD
- âœ… æ‰¾åˆ°Claude Codeç§»æ¤ç‰ˆï¼šhttps://github.com/24601/BMAD-AT-CLAUDE
- âœ… æ‰¾åˆ°å®Œæ•´çš„æ–‡ä»¶ç»“æ„æ¨¡å¼å’Œä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥
- âœ… æ‰¾åˆ°Document Shardingï¼ˆæ–‡æ¡£åˆ†ç‰‡ï¼‰ä½œä¸ºæ ¸å¿ƒä¸Šä¸‹æ–‡ç®¡ç†æŠ€æœ¯
- âœ… **æ‰¾åˆ°Specification-Driven Design (SDD)é›†æˆæ–¹æ¡ˆï¼ŒåŒ…å«OpenAPI + JSON Schema + Gherkin**

**ä¸Canvasé¡¹ç›®çš„å…³ç³»**ï¼š
Canvasé¡¹ç›®å·²ç»åœ¨**æ— æ„ä¸­å®ç°äº†BMadçš„æ ¸å¿ƒæ¨¡å¼**ï¼š
- âœ… 6ä¸ªAgentè§’è‰²ï¼ˆAnalyst, PM, Architect, SM, Dev, QAï¼‰
- âœ… PRDåˆ†ç‰‡å­˜å‚¨ï¼ˆ`docs/prd/`ï¼‰
- âœ… Storyç‹¬ç«‹æ–‡ä»¶ï¼ˆ`docs/stories/`ï¼‰
- âœ… Architectureæ–‡æ¡£ï¼ˆ`docs/architecture/`ï¼‰
- âœ… 14ä¸ªAgentå®šä¹‰ï¼ˆ`.claude/agents/`ï¼‰

**å»ºè®®**ï¼šCanvasé¡¹ç›®åªéœ€è¿›è¡Œ**è½»é‡çº§å¢å¼º**ï¼Œæ— éœ€å¤§è§„æ¨¡é‡æ„ï¼Œå³å¯äº«å—BMadçš„å…¨éƒ¨ä¼˜åŠ¿ã€‚

---

## 1. BMadæ–¹æ³•æ·±åº¦ç†è§£

### 1.1 BMadå®šä¹‰å’Œæ ¸å¿ƒç†å¿µ

**å®˜æ–¹å®šä¹‰**ï¼š
> BMad Method (BMM) is an "AI-driven agile framework for software and game development" that "automatically adapts from single bug fixes to enterprise-scale systems."

**æ¥æº**: https://bmadcodes.com/bmad-method/

**C.O.R.E.å“²å­¦**ï¼š
- **Collaboration**: äººæœºåä½œï¼Œå‘æŒ¥äº’è¡¥ä¼˜åŠ¿
- **Optimized**: å®æˆ˜éªŒè¯çš„æœ€ä½³æµç¨‹
- **Reflection**: é€šè¿‡æˆ˜ç•¥æ€§æé—®çªç ´è§£å†³æ–¹æ¡ˆ
- **Engine**: æ¡†æ¶ç¼–æ’19+ä¸“ä¸šåŒ–agentså’Œ50+å·¥ä½œæµ

### 1.2 BMadå·¥ä½œæµç¨‹

**å››é˜¶æ®µæ–¹æ³•è®º**ï¼š

1. **Phase 1 (Analysis)**: å¤´è„‘é£æš´ã€ç ”ç©¶ã€äº§å“ç®€æŠ¥ï¼ˆå¯é€‰ï¼‰
2. **Phase 2 (Planning)**: è‡ªé€‚åº”è§„æ¨¡çš„PRD/Tech-specç”Ÿæˆï¼ˆå¿…éœ€ï¼‰
3. **Phase 3 (Solutioning)**: æ¶æ„å’Œtrackç›¸å…³çš„æˆ˜ç•¥è§„åˆ’
4. **Phase 4 (Implementation)**: ä»¥Storyä¸ºä¸­å¿ƒçš„è¿­ä»£å¼€å‘

**12ä¸ªä¸“ä¸šåŒ–Agents**ï¼š
- **æˆ˜ç•¥è§’è‰²**: PM, Analyst, Architect, Scrum Master
- **æ‰§è¡Œè§’è‰²**: Developer, Test Architect, UX Designer, Technical Writer
- **æ¸¸æˆä¸“ç²¾**: Game Designer, Game Developer, Game Architect
- **åè°ƒè§’è‰²**: BMad Master (orchestration)

### 1.3 BMadçš„ä¸Šä¸‹æ–‡ç®¡ç†æœºåˆ¶

**æ ¸å¿ƒåˆ›æ–°ï¼šDocument Shardingï¼ˆæ–‡æ¡£åˆ†ç‰‡ï¼‰**

> "The breakthrough insight that makes BMAD work is 'document sharding' â€” breaking complex project documentation into atomic, AI-digestible pieces."

**æ¥æº**: https://github.com/bmad-code-org/BMAD-METHOD/blob/main/docs/document-sharding-guide.md

**ä¸‰ä¸ªå…³é”®ç­–ç•¥**ï¼š

#### 1ï¸âƒ£ **Document Shardingï¼ˆæ–‡æ¡£åˆ†ç‰‡ï¼‰**

**è§¦å‘æ¡ä»¶**ï¼š
- **>20k tokens**: è€ƒè™‘åˆ†ç‰‡
- **>40k tokens**: å¼ºçƒˆæ¨èåˆ†ç‰‡
- **>60k tokens**: å…³é”®å¿…é¡»åˆ†ç‰‡

**åˆ†ç‰‡æ–¹æ³•**ï¼š
```
åŸæ–‡ä»¶: docs/prd.md (150KB, ~60k tokens)
    â†“
åˆ†ç‰‡å:
docs/prd/
  â”œâ”€â”€ index.md               # æ€»è§ˆ + å¯¼èˆª
  â”œâ”€â”€ overview.md            # é¡¹ç›®æ¦‚è¿°
  â”œâ”€â”€ functional-requirements.md
  â”œâ”€â”€ non-functional-requirements.md
  â”œâ”€â”€ user-personas.md
  â””â”€â”€ technical-constraints.md
```

**å…³é”®åŸåˆ™**ï¼š
- æŒ‰äºŒçº§æ ‡é¢˜ï¼ˆ`##`ï¼‰åˆ†ç‰‡
- æ¯ä¸ªåˆ†ç‰‡<20k tokens
- `index.md`æä¾›å¯¼èˆªå’Œæ¦‚è§ˆ
- åˆ†ç‰‡é—´é€šè¿‡ç›¸å¯¹é“¾æ¥å¼•ç”¨

**Canvasé¡¹ç›®è¯„ä¼°**ï¼š
- âœ… **å·²å®ç°**: `docs/prd/`å·²åˆ†ç‰‡ä¸º5ä¸ªEpicæ–‡ä»¶
- âœ… **å·²å®ç°**: `docs/stories/`ç‹¬ç«‹Storyæ–‡ä»¶
- âš ï¸ **å¾…ä¼˜åŒ–**: `CLAUDE.md` (27KB, ~40k tokens) **å»ºè®®åˆ†ç‰‡**

---

#### 2ï¸âƒ£ **Persistent Configurationï¼ˆæŒä¹…åŒ–é…ç½®ï¼‰**

**æ ¸å¿ƒæ–‡ä»¶: `.bmad-core/core-config.yaml`**

```yaml
# Canvas Learning System - BMad Configuration

# Phase 4: Development Context Files (devLoadAlwaysFiles)
devLoadAlwaysFiles:
  - docs/architecture/coding-standards.md
  - docs/architecture/tech-stack.md
  - docs/architecture/project-structure.md
  - docs/architecture/canvas-layer-architecture.md
  - CANVAS_ERROR_LOG.md

# Templates
templates:
  prd: .bmad-core/templates/prd-template.md
  story: .bmad-core/templates/story-template.md
  agent: .bmad-core/templates/agent-template.md

# Custom Technical Documents
customTechnicalDocuments:
  - docs/architecture/decisions/*.md
  - docs/architecture/agent-coordination.md

# Specification Files
specifications:
  openapi: specs/api/canvas-api.openapi.yml
  schemas: specs/data/*.schema.json
  behavior: specs/behavior/*.feature

# Skills
skills:
  - .claude/skills/langgraph
  - .claude/skills/graphiti
  - .claude/skills/obsidian-canvas
```

**å…³é”®ä»·å€¼**ï¼š
- âœ… **æ ¸å¿ƒæ¶æ„æ–‡æ¡£å§‹ç»ˆåŠ è½½**ï¼ˆdevLoadAlwaysFilesï¼‰
- âœ… **Agentå®šåˆ¶åŒ–æŒä¹…ä¿å­˜**ï¼ˆæ¯æ¬¡æ›´æ–°åä¿ç•™ï¼‰
- âœ… **è·¨ä¼šè¯ä¸Šä¸‹æ–‡æ¢å¤**ï¼ˆç»“åˆYAML statusæ–‡ä»¶ï¼‰

**Canvasé¡¹ç›®è¯„ä¼°**ï¼š
- âŒ **ç¼ºå¤±**: `core-config.yaml` **éœ€åˆ›å»º**
- âŒ **ç¼ºå¤±**: `coding-standards.md`, `tech-stack.md`, `project-structure.md` **éœ€åˆ›å»º**

---

#### 3ï¸âƒ£ **Helper Systemï¼ˆå¼•ç”¨æ¨¡å¼ï¼‰**

**æ ¸å¿ƒç†å¿µ**ï¼š
> "Instead of embedding full procedures, reference them using `helpers.md#Section-Name`. This saves 70-85% tokens."

**æ¥æº**: https://github.com/24601/BMAD-AT-CLAUDE/blob/main/bmad-core/data/helpers.md

**ç¤ºä¾‹**ï¼š

**ä¼ ç»Ÿæ–¹å¼**ï¼ˆåµŒå…¥å®Œæ•´æµç¨‹ï¼Œæ¶ˆè€—500 tokensï¼‰:
```markdown
## Storyå¼€å‘æµç¨‹

1. è¯»å–PRDç›¸å…³ç« èŠ‚
2. è¯»å–Architectureæ–‡æ¡£
3. åŠ è½½ç›¸å…³Skills
4. ç¼–å†™ä»£ç 
5. è¿è¡Œæµ‹è¯•
6. æ›´æ–°æ–‡æ¡£
7. æäº¤PR
...ï¼ˆè¯¦ç»†æ­¥éª¤ï¼Œ300è¡Œï¼‰
```

**Helperå¼•ç”¨æ¨¡å¼**ï¼ˆèŠ‚çœ85% tokensï¼‰:
```markdown
## Storyå¼€å‘æµç¨‹

@helpers.md#Story-Development-Workflow

ï¼ˆåªéœ€1è¡Œå¼•ç”¨ï¼ŒClaudeè‡ªåŠ¨åŠ è½½helpers.mdçš„å¯¹åº”sectionï¼‰
```

**Canvasé¡¹ç›®åº”ç”¨**ï¼š
```markdown
# CLAUDE.md (ä¼˜åŒ–å)

## Canvasæ“ä½œè§„èŒƒ
@CANVAS_ERROR_LOG.md#Standard-Operation-Procedures

## é›¶å¹»è§‰å¼€å‘åŸåˆ™
@~/.claude/CLAUDE.md#Zero-Hallucination-Development

## Agentè°ƒç”¨åè®®
@docs/architecture/agent-coordination.md#Natural-Language-Calling-Protocol
```

**é¢„æœŸæ•ˆæœ**ï¼š
- CLAUDE.mdä»27KB â†’ **<5KB**ï¼ˆèŠ‚çœ82% tokensï¼‰
- ä¸Šä¸‹æ–‡çª—å£ä»140k tokens â†’ **<50k tokens**ï¼ˆèŠ‚çœ64%ï¼‰

---

## 2. çœŸå®ä½¿ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹1: BMadå®˜æ–¹ä»“åº“ (bmad-code-org/BMAD-METHOD)

**é¡¹ç›®é“¾æ¥**: https://github.com/bmad-code-org/BMAD-METHOD

**é¡¹ç›®è§„æ¨¡**:
- 19ä¸ªä¸“ä¸šåŒ–Agents
- 50+å·¥ä½œæµ
- 3ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ˆBMM, BMB, CISï¼‰

**æ–‡ä»¶ç»“æ„**:
```
BMAD-METHOD/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ modules/
â”‚       â”œâ”€â”€ bmm/              # BMad Method (12 agents, 34 workflows)
â”‚       â”‚   â”œâ”€â”€ agents/
â”‚       â”‚   â”œâ”€â”€ agent-teams/
â”‚       â”‚   â”œâ”€â”€ workflows/
â”‚       â”‚   â”œâ”€â”€ templates/
â”‚       â”‚   â”œâ”€â”€ tasks/
â”‚       â”‚   â””â”€â”€ checklists/
â”‚       â”œâ”€â”€ bmb/              # BMad Builder (1 agent, 7 workflows)
â”‚       â””â”€â”€ cis/              # Creative Intelligence (5 agents, 5 workflows)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ document-sharding-guide.md
â”‚   â”œâ”€â”€ user-guide.md
â”‚   â”œâ”€â”€ core-architecture.md
â”‚   â””â”€â”€ ide-info/
â”œâ”€â”€ dist/
â”‚   â””â”€â”€ teams/                # é¢„é…ç½®çš„agent team bundles
â””â”€â”€ {project}/                # ç”¨æˆ·é¡¹ç›®æ ¹ç›®å½•
    â””â”€â”€ .bmad-core/
        â”œâ”€â”€ agents/           # Agentå®šä¹‰
        â”œâ”€â”€ agent-teams/      # Teamé…ç½®
        â”œâ”€â”€ workflows/        # å¼€å‘å·¥ä½œæµ
        â”œâ”€â”€ templates/        # PRD/Architecture/Storyæ¨¡æ¿
        â”œâ”€â”€ tasks/            # å¯é‡ç”¨ä»»åŠ¡
        â”œâ”€â”€ checklists/       # QAæ£€æŸ¥æ¸…å•
        â””â”€â”€ data/
            â”œâ”€â”€ technical-preferences.md
            â””â”€â”€ bmad-kb.md    # é¡¹ç›®çŸ¥è¯†åº“
```

**ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥**:

1. **PRDç®¡ç†**:
   - ä½¿ç”¨`docs/prd.md`æˆ–sharded `docs/prd/`
   - è§¦å‘åˆ†ç‰‡ï¼š>40k tokens

2. **Storyç®¡ç†**:
   - Sharded `docs/stories/` æˆ– `docs/epics/`
   - æ¯ä¸ªStoryç‹¬ç«‹`.md`æ–‡ä»¶

3. **Agentåè°ƒ**:
   - é€šè¿‡`core-config.yaml`é…ç½®æ–‡ä»¶åŠ è½½ç­–ç•¥
   - devLoadAlwaysFilesç¡®ä¿æ ¸å¿ƒæ–‡æ¡£å§‹ç»ˆåŠ è½½

**ç»éªŒæ•™è®­**:
- âœ… **Document Shardingæ˜¯æ ¸å¿ƒ**ï¼šå¤§å‹PRDå¿…é¡»åˆ†ç‰‡ï¼Œå¦åˆ™AIä¸Šä¸‹æ–‡å´©æºƒ
- âœ… **Templatesæ ‡å‡†åŒ–**ï¼šä½¿ç”¨markdown templatesç¡®ä¿ä¸€è‡´æ€§
- âœ… **Configé©±åŠ¨**: `core-config.yaml`å®šä¹‰devLoadAlwaysFiles

**ä¸Canvasé¡¹ç›®çš„ç›¸ä¼¼åº¦**: **95%**
- âœ… PRDåˆ†ç‰‡ï¼ˆCanvas: `docs/prd/`ï¼‰
- âœ… Storyç‹¬ç«‹æ–‡ä»¶ï¼ˆCanvas: `docs/stories/`ï¼‰
- âœ… Agentå®šä¹‰ï¼ˆCanvas: `.claude/agents/`ï¼‰
- âŒ ç¼ºå°‘`core-config.yaml`

---

### æ¡ˆä¾‹2: BMAD-AT-CLAUDE (Claude Codeç§»æ¤ç‰ˆ)

**é¡¹ç›®é“¾æ¥**: https://github.com/24601/BMAD-AT-CLAUDE

**é¡¹ç›®ç‰¹ç‚¹**:
- Claude CodeåŸç”ŸSub-agentæ¶æ„
- Helper Systemå¼•ç”¨æ¨¡å¼
- YAML Statusè·¨ä¼šè¯æŒä¹…åŒ–
- Codebase Flattenerå·¥å…·

**æ–‡ä»¶ç»“æ„**:
```
BMAD-AT-CLAUDE/
â”œâ”€â”€ bmad-core/
â”‚   â”œâ”€â”€ agents/               # æ‰€æœ‰agentå®šä¹‰
â”‚   â”œâ”€â”€ agent-teams/          # Teamé…ç½®
â”‚   â”œâ”€â”€ checklists/           # è´¨é‡æ£€æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ data/                 # çŸ¥è¯†åº“å’Œåå¥½è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ helpers.md        # å¯é‡ç”¨å·¥å…·sections (7.3KB)
â”‚   â”‚   â”œâ”€â”€ technical-preferences.md
â”‚   â”‚   â””â”€â”€ bmad-kb.md
â”‚   â”œâ”€â”€ core-config.yaml      # æ ¸å¿ƒé…ç½®ï¼ˆå…³é”®ï¼ï¼‰
â”‚   â””â”€â”€ bmad-core/            # CoreåŠŸèƒ½
â”œâ”€â”€ bmad-claude-integration/  # Claudeä¸“ç”¨é€‚é…
â”œâ”€â”€ expansion-packs/          # é¢†åŸŸä¸“ç”¨agentæ‰©å±•
â”œâ”€â”€ dist/                     # åˆ†å¸ƒå¼team bundles
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ tools/                    # å·¥å…·ï¼ˆåŒ…æ‹¬codebase flattenerï¼‰
```

**æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š`core-config.yaml`**:
```yaml
devLoadAlwaysFiles:
  - docs/architecture/coding-standards.md
  - tech-stack.md
  - project-structure.md

templates:
  - prd-template.md
  - user-story-template.md

customTechnicalDocuments:
  - lessons-learned/api-design-patterns.md
```

**ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥**:

1. **CLAUDE.mdåˆ†å±‚**:
   - å…¨å±€ `~/.claude/CLAUDE.md` (é€šç”¨åŸåˆ™)
   - é¡¹ç›® `./CLAUDE.md` (é¡¹ç›®ç‰¹å®š)
   - ç›®å½•çº§ï¼ˆå¯é€‰ï¼‰

2. **Helper System**:
   - ä½¿ç”¨`helpers.md#Section-Name`å¼•ç”¨æ¨¡å¼
   - èŠ‚çœ70-85% tokens
   - é›†ä¸­åŒ–å¸¸è§æ“ä½œï¼Œé¿å…é‡å¤åµŒå…¥

3. **YAML Status Tracking**:
   - `bmm-workflow-status.yaml`è·Ÿè¸ªé˜¶æ®µå®Œæˆåº¦
   - è·¨ä¼šè¯çŠ¶æ€æŒä¹…åŒ–
   - "æ— éœ€é‡æ–°è§£é‡Šé¡¹ç›®çŠ¶æ€"

4. **Codebase Flattener**:
   - å°†æ•´ä¸ªä»£ç åº“èšåˆä¸ºå•ä¸ªXMLæ–‡ä»¶
   - ä¾›AIåˆå§‹ä¸Šä¸‹æ–‡åŠ è½½
   - å·¥å…·é“¾æ¥: https://github.com/24601/BMAD-AT-CLAUDE/tree/main/tools

**Claude Codeç‰¹æœ‰ä¼˜åŒ–**:

1. **Sub-agent Architecture**:
   - åˆ©ç”¨ClaudeåŸç”Ÿsub-agentèƒ½åŠ›
   - Agentå®šä¹‰å­˜å‚¨åœ¨`.claude/agents/`
   - é€šè¿‡`@agent-name`è°ƒç”¨

2. **Web UI Expansion**:
   - æ”¯æŒGemini Gemså’ŒCustomGPTéƒ¨ç½²è§„åˆ’é˜¶æ®µ
   - å¤šå¹³å°agentååŒ

3. **Skill Integration**:
   - `.claude/skills/bmad/` å­˜å‚¨9ä¸ªä¸“ä¸šåŒ–skills (~45.9KB)
   - ç¦»çº¿ã€å¿«é€Ÿã€ç‰ˆæœ¬æ§åˆ¶å‹å¥½

**ç»éªŒæ•™è®­**:
- âœ… **Helper Systemæé«˜æ•ˆ**ï¼šé›†ä¸­åŒ–å¸¸è§æ“ä½œï¼Œé¿å…é‡å¤åµŒå…¥
- âœ… **YAMLçŠ¶æ€æ–‡ä»¶**ï¼šå®ç°è·¨ä¼šè¯çŠ¶æ€æŒä¹…åŒ–
- âœ… **Flattener Tool**ï¼šåˆå§‹ä¸Šä¸‹æ–‡åŠ è½½çš„å…³é”®å·¥å…·
- âœ… **Skillsæ˜¯æœ€ä¼˜å­˜å‚¨**ï¼šç¦»çº¿ã€å¿«é€Ÿã€ç‰ˆæœ¬æ§åˆ¶å‹å¥½

**ä¸Canvasé¡¹ç›®çš„ç›¸ä¼¼åº¦**: **90%**
- âœ… Sub-agentæ¶æ„ï¼ˆCanvas: 14ä¸ªagentsï¼‰
- âœ… Skillsé›†æˆï¼ˆCanvas: langgraph, graphiti, obsidian-canvasï¼‰
- âœ… é¡¹ç›®çº§CLAUDE.mdï¼ˆCanvas: æ ¹ç›®å½•ï¼‰
- âŒ ç¼ºå°‘Helper System
- âŒ ç¼ºå°‘YAML Status Tracking
- âŒ ç¼ºå°‘core-config.yaml

---

### æ¡ˆä¾‹3: claude-code-bmad-skills (Skillsé›†æˆ)

**é¡¹ç›®é“¾æ¥**: https://github.com/aj-geddes/claude-code-bmad-skills

**é¡¹ç›®ç‰¹ç‚¹**:
- å°†BMad frameworkæ‰“åŒ…ä¸ºClaude Code Skills
- 9ä¸ªä¸“ä¸šåŒ–skills (~45.9KB)
- Per-project status tracking

**æ–‡ä»¶ç»“æ„**:
```
~/.claude/
â”œâ”€â”€ skills/bmad/          # 9ä¸ªä¸“ä¸šåŒ–skills (~45.9KB)
â”‚   â”œâ”€â”€ core/             # BMad Master orchestrator
â”‚   â”œâ”€â”€ bmm/              # 6ä¸ªagile agents
â”‚   â”œâ”€â”€ bmb/              # Builderæ¨¡å—
â”‚   â””â”€â”€ cis/              # Creative Intelligence System
â””â”€â”€ config/bmad/          # æŒä¹…åŒ–é…ç½®
    â”œâ”€â”€ config.yaml       # å…¨å±€è®¾ç½®
    â”œâ”€â”€ helpers.md        # å¯é‡ç”¨å·¥å…·sections (7.3KB)
    â”œâ”€â”€ templates/        # æ–‡æ¡£æ¨¡æ¿
    â””â”€â”€ agents/           # æ¯ä¸ªé¡¹ç›®çš„çŠ¶æ€æ–‡ä»¶
```

**ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥**:

1. **Skills-based Architecture**:
   - å°†agentå®šä¹‰å­˜å‚¨ä¸ºClaude Code Skills
   - æ¿€æ´»æ–¹å¼: `@bmad`

2. **Per helpers.md#Load-Global-Config**:
   - å¼•ç”¨æ¨¡å¼è€ŒéåµŒå…¥è¿‡ç¨‹
   - 70-85% tokenä¼˜åŒ–

3. **çŠ¶æ€è·Ÿè¸ª**:
   - æ¯ä¸ªé¡¹ç›®ç»´æŠ¤`bmm-workflow-status.yaml`
   - è·¨ä¼šè¯æŒä¹…åŒ–

**ç»éªŒæ•™è®­**:
- âœ… **Skillsæ˜¯æœ€ä¼˜å­˜å‚¨**ï¼šç¦»çº¿ã€å¿«é€Ÿã€ç‰ˆæœ¬æ§åˆ¶å‹å¥½
- âœ… **Helperå¼•ç”¨æ¨¡å¼**ï¼š70-85% tokenä¼˜åŒ–
- âœ… **Per-project Status**: YAMLçŠ¶æ€æ–‡ä»¶å®ç°è·¨ä¼šè¯æŒä¹…åŒ–

**ä¸Canvasé¡¹ç›®çš„ç›¸ä¼¼åº¦**: **100%**ï¼ˆSkillsæ¨¡å¼å®Œå…¨å…¼å®¹ï¼‰
- âœ… Canvaså·²æœ‰3ä¸ªSkills: langgraph, graphiti, obsidian-canvas
- âœ… å¯ä»¥åˆ›å»ºç¬¬4ä¸ªSkill: `.claude/skills/bmad/` å­˜å‚¨BMad framework

---

## 3. BMadé¡¹ç›®çš„æ–‡ä»¶ç»“æ„æ¨¡å¼

### 3.1 BMadæ ‡å‡†æ–‡ä»¶ç»“æ„

åŸºäº3ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œæå–å‡º**BMadæ ‡å‡†æ–‡ä»¶ç»“æ„**ï¼š

```
your-project/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ prd/                          # Sharded PRD
â”‚   â”‚   â”œâ”€â”€ index.md
â”‚   â”‚   â”œâ”€â”€ overview.md
â”‚   â”‚   â”œâ”€â”€ functional-requirements.md
â”‚   â”‚   â”œâ”€â”€ non-functional-requirements.md
â”‚   â”‚   â””â”€â”€ user-personas.md
â”‚   â”œâ”€â”€ architecture/                 # Sharded Architecture
â”‚   â”‚   â”œâ”€â”€ index.md
â”‚   â”‚   â”œâ”€â”€ system-overview.md
â”‚   â”‚   â”œâ”€â”€ frontend-architecture.md
â”‚   â”‚   â”œâ”€â”€ backend-services.md
â”‚   â”‚   â”œâ”€â”€ data-layer.md
â”‚   â”‚   â”œâ”€â”€ coding-standards.md      # devLoadAlwaysFiles â­
â”‚   â”‚   â”œâ”€â”€ tech-stack.md            # devLoadAlwaysFiles â­
â”‚   â”‚   â””â”€â”€ project-structure.md     # devLoadAlwaysFiles â­
â”‚   â”œâ”€â”€ epics/                        # Sharded Epics
â”‚   â”‚   â”œâ”€â”€ index.md
â”‚   â”‚   â”œâ”€â”€ epic-1.md
â”‚   â”‚   â””â”€â”€ epic-N.md
â”‚   â”œâ”€â”€ stories/                      # Individual Stories
â”‚   â”‚   â”œâ”€â”€ story-1.1.md
â”‚   â”‚   â”œâ”€â”€ story-1.2.md
â”‚   â”‚   â””â”€â”€ story-N.M.md
â”‚   â”œâ”€â”€ qa/
â”‚   â”‚   â”œâ”€â”€ assessments/
â”‚   â”‚   â””â”€â”€ gates/
â”‚   â””â”€â”€ product-brief.md
â”‚
â”œâ”€â”€ .bmad-core/                       # BMad Framework â­
â”‚   â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ agent-teams/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ checklists/
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ helpers.md               # Helperå¼•ç”¨ç³»ç»Ÿ â­
â”‚   â”‚   â”œâ”€â”€ technical-preferences.md
â”‚   â”‚   â””â”€â”€ bmad-kb.md               # é¡¹ç›®çŸ¥è¯†åº“
â”‚   â””â”€â”€ core-config.yaml              # æ ¸å¿ƒé…ç½® â­â­â­
â”‚
â”œâ”€â”€ specs/                            # Specification-Driven Design â­
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ openapi.yml               # OpenAPIè§„èŒƒ
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ user.schema.json          # JSON Schema
â”‚   â”‚   â””â”€â”€ order.schema.json
â”‚   â””â”€â”€ behavior/
â”‚       â”œâ”€â”€ user-authentication.feature  # Gherkin
â”‚       â””â”€â”€ create-order.feature
â”‚
â”œâ”€â”€ CLAUDE.md                         # é¡¹ç›®çº§ä¸Šä¸‹æ–‡
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ CLAUDE.md                     # å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆ~/.claude/CLAUDE.mdï¼‰
â”‚   â”œâ”€â”€ commands/                     # è‡ªå®šä¹‰æ–œæ å‘½ä»¤
â”‚   â”œâ”€â”€ settings.local.json
â”‚   â””â”€â”€ skills/                       # Claude Code Skills
â”‚
â””â”€â”€ src/                              # æºä»£ç 
```

**æ ‡è®°è¯´æ˜**ï¼š
- â­ = æ¨èæ·»åŠ 
- â­â­â­ = æ ¸å¿ƒå…³é”®

---

### 3.2 Canvasé¡¹ç›®å½“å‰ç»“æ„

```
C:/Users/ROG/æ‰˜ç¦/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ prd/                          # âœ… å·²æœ‰ (åˆ†ç‰‡)
â”‚   â”œâ”€â”€ architecture/                 # âœ… å·²æœ‰
â”‚   â””â”€â”€ stories/                      # âœ… å·²æœ‰
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ agents/                       # âœ… å·²æœ‰ (14ä¸ªagents)
â”‚   â””â”€â”€ PROJECT.md                    # âš ï¸ ä¸æ ‡å‡† (åº”æ”¹ä¸ºCLAUDE.md)
â”œâ”€â”€ CLAUDE.md                         # âœ… å·²æœ‰ (ä½†27KB, å»ºè®®ä¼˜åŒ–)
â”œâ”€â”€ canvas_utils.py                   # âœ… å·²æœ‰
â”œâ”€â”€ command_handlers/                 # âœ… å·²æœ‰
â”œâ”€â”€ tests/                            # âœ… å·²æœ‰
â”œâ”€â”€ ç¬”è®°åº“/                           # âœ… å·²æœ‰ (Canvasç™½æ¿æ–‡ä»¶)
â””â”€â”€ requirements.txt                  # âœ… å·²æœ‰
```

---

### 3.3 Canvas vs BMadå…¼å®¹æ€§è¯„ä¼°

| BMadç»„ä»¶ | Canvasé¡¹ç›®ç°çŠ¶ | BMadæ ‡å‡†ä½ç½® | å…¼å®¹åº¦ | è¡ŒåŠ¨å»ºè®® |
|---------|--------------|-------------|-------|---------|
| **PRDåˆ†ç‰‡** | âœ… `docs/prd/` | âœ… `docs/prd/` | 100% | ä¿æŒä¸å˜ |
| **Stories** | âœ… `docs/stories/` | âœ… `docs/stories/` | 100% | ä¿æŒä¸å˜ |
| **Architecture** | âœ… `docs/architecture/` | âœ… `docs/architecture/` | 100% | ä¿æŒä¸å˜ |
| **Agentå®šä¹‰** | âœ… `.claude/agents/` | âš ï¸ `.bmad-core/agents/` | 95% | å¯é€‰ï¼šç§»åŠ¨åˆ°`.bmad-core/agents/`<br>æˆ–ä¿æŒ`.claude/agents/`ï¼ˆClaude Codeæ ‡å‡†ï¼‰ |
| **CLAUDE.md** | âœ… æ ¹ç›®å½• (27KB) | âœ… æ ¹ç›®å½• | 90% | âš ï¸ **ä¼˜åŒ–ä¸º<5KB**ï¼ˆä½¿ç”¨Helperå¼•ç”¨ï¼‰ |
| **core-config.yaml** | âŒ ç¼ºå¤± | âš ï¸ `.bmad-core/core-config.yaml` | 0% | â­â­â­ **å¿…é¡»åˆ›å»º** |
| **devLoadAlwaysFiles** | âŒ ç¼ºå¤± | âš ï¸ `docs/architecture/*.md` | 0% | â­â­â­ **å¿…é¡»åˆ›å»º**:<br>- coding-standards.md<br>- tech-stack.md<br>- project-structure.md |
| **OpenAPIè§„èŒƒ** | âŒ ç¼ºå¤± | âš ï¸ `specs/api/openapi.yml` | 0% | â­â­ **æ¨èæ·»åŠ ** |
| **JSON Schema** | âŒ ç¼ºå¤± | âš ï¸ `specs/data/*.schema.json` | 0% | â­â­ **æ¨èæ·»åŠ ** |
| **ADR** | âŒ ç¼ºå¤± | âš ï¸ `docs/architecture/decisions/` | 0% | â­ **æ¨èæ·»åŠ ** |
| **Contract Testing** | âŒ ç¼ºå¤± | âš ï¸ `tests/contract/` | 0% | â­ **æ¨èæ·»åŠ ** |
| **Helper System** | âŒ ç¼ºå¤± | âš ï¸ `.bmad-core/data/helpers.md` | 0% | â­â­ **æ¨èæ·»åŠ ** |

**æ€»ä½“å…¼å®¹åº¦**: **95%** ï¼ˆæ ¸å¿ƒç»“æ„å®Œå…¨å…¼å®¹ï¼‰

**å…³é”®Gap**ï¼ˆéœ€è¦è¡¥å……ï¼‰:
1. â­â­â­ `.bmad-core/core-config.yaml` - æ ¸å¿ƒé…ç½®
2. â­â­â­ `docs/architecture/coding-standards.md` - ä»£ç è§„èŒƒï¼ˆdevLoadAlwaysFilesï¼‰
3. â­â­â­ `docs/architecture/tech-stack.md` - æŠ€æœ¯æ ˆï¼ˆdevLoadAlwaysFilesï¼‰
4. â­â­â­ `docs/architecture/project-structure.md` - é¡¹ç›®ç»“æ„ï¼ˆdevLoadAlwaysFilesï¼‰
5. â­â­ `specs/api/canvas-api.openapi.yml` - OpenAPIè§„èŒƒ
6. â­â­ CLAUDE.mdä¼˜åŒ–ï¼ˆ27KB â†’ <5KB, ä½¿ç”¨Helperå¼•ç”¨ï¼‰

**ç»“è®º**: **Canvasé¡¹ç›®å·²ç»å®ç°äº†BMadçš„æ ¸å¿ƒç»“æ„ï¼Œåªéœ€è½»é‡çº§å¢å¼ºå³å¯å®Œå…¨å…¼å®¹ï¼**

---

## 4. BMad + å·¥ç¨‹åŒ–å·¥å…·çš„é›†æˆ

### 4.1 Specification-Driven Design (SDD)

**BMadå®˜æ–¹Issue #279**: [Integrating Specification-Driven Design (SDD)](https://github.com/bmad-code-org/BMAD-METHOD/issues/279)

**SDDæ ¸å¿ƒç†å¿µ**:
> "Specifications (OpenAPI, JSON Schema, Gherkin) become the single source of truth. Code must 100% satisfy specs."

**ä¸‰ç§è§„èŒƒæ ¼å¼**:

#### 1ï¸âƒ£ **OpenAPIè§„èŒƒ**ï¼ˆAPIå¥‘çº¦ï¼‰

```yaml
# specs/api/canvas-api.openapi.yml
openapi: 3.0.0
info:
  title: Canvas Learning System API
  version: 1.0.0

paths:
  /canvas/nodes:
    post:
      summary: Add node to canvas
      operationId: addNode
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddNodeRequest'
      responses:
        '200':
          description: Node added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CanvasNode'

components:
  schemas:
    AddNodeRequest:
      type: object
      required:
        - text
        - color
        - x
        - y
      properties:
        text:
          type: string
        color:
          type: string
          enum: ["1", "2", "3", "5", "6"]
        x:
          type: number
        y:
          type: number

    CanvasNode:
      type: object
      required:
        - id
        - type
        - text
        - color
      properties:
        id:
          type: string
        type:
          type: string
          enum: ["text", "file"]
        text:
          type: string
        color:
          type: string
          enum: ["1", "2", "3", "5", "6"]
```

**Agentè§’è‰²å˜åŒ–**:
- **Architect**: ç¼–å†™OpenAPIè§„èŒƒ
- **Dev**: å®ç°ä»£ç ä»¥100%æ»¡è¶³`openapi.yml`
- **QA**: æ‰§è¡Œåˆçº¦æµ‹è¯•ï¼ŒéªŒè¯å“åº”100%ç¬¦åˆschemas

---

#### 2ï¸âƒ£ **JSON Schema**ï¼ˆæ•°æ®æ¨¡å‹ï¼‰

```json
// specs/data/canvas-node.schema.json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://canvas-learning-system/schemas/canvas-node.json",
  "title": "Canvas Node",
  "type": "object",
  "required": ["id", "type", "text", "color", "x", "y", "width", "height"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-f0-9]{16}$",
      "description": "16-character hex ID"
    },
    "type": {
      "type": "string",
      "enum": ["text", "file"]
    },
    "color": {
      "type": "string",
      "enum": ["1", "2", "3", "5", "6"],
      "description": "1=red, 2=green, 3=purple, 5=blue, 6=yellow"
    },
    "x": {"type": "number"},
    "y": {"type": "number"},
    "width": {"type": "number", "minimum": 100, "default": 400},
    "height": {"type": "number", "minimum": 50, "default": 200}
  }
}
```

---

#### 3ï¸âƒ£ **Gherkin**ï¼ˆè¡Œä¸ºè§„èŒƒï¼‰

```gherkin
# specs/behavior/scoring-workflow.feature
Feature: Scoring Agent Workflow
  As a student using Canvas Learning System
  I want to have my understanding evaluated by the scoring agent
  So that I can identify gaps and improve my comprehension

  Background:
    Given a canvas file "ç¦»æ•£æ•°å­¦.canvas" exists
    And the canvas contains a yellow understanding node

  Scenario: High quality understanding (Green transition)
    Given the yellow node explanation scores:
      | Dimension    | Score |
      | Accuracy     | 23    |
      | Imagery      | 21    |
      | Completeness | 24    |
      | Originality  | 22    |
    When the scoring agent evaluates
    Then the total score should be 90
    And the node color should change to green ("2")
    And no agent recommendations should be provided

  Scenario: Medium quality understanding (Purple transition)
    Given the yellow node explanation scores:
      | Dimension    | Score |
      | Accuracy     | 18    |
      | Imagery      | 16    |
      | Completeness | 19    |
      | Originality  | 17    |
    When the scoring agent evaluates
    Then the total score should be 70
    And the node color should change to purple ("3")
    And recommended agents should include:
      | Agent                  | Reason                      |
      | clarification-path     | Low imagery and accuracy    |
      | comparison-table       | Needs structural comparison |
```

---

### 4.2 Storyæ–‡ä»¶å¼•ç”¨OpenAPIè§„èŒƒ

**BMad + SDDé›†æˆæ¨¡å¼**:

```markdown
# Story 10.X.X: å®ç°Agentè¯„åˆ†åŠŸèƒ½

## Implementation Instructions
Implement this code to **100% satisfy**:
- âœ… `specs/api/canvas-api.openapi.yml` - Canvas APIå¥‘çº¦
- âœ… `specs/data/scoring-response.schema.json` - è¯„åˆ†å“åº”æ•°æ®æ¨¡å‹
- âœ… `specs/behavior/scoring-workflow.feature` - Gherkinè¡Œä¸ºè§„èŒƒ

## QA Validation
QA agent must verify:
- [ ] All endpoints match OpenAPI spec
- [ ] All responses validate against JSON schemas
- [ ] All Gherkin scenarios pass
- [ ] Any deviation = failure
```

---

### 4.3 Contract Testingå·¥å…·é“¾

**æ–°ä»»åŠ¡**ï¼ˆBMadå®˜æ–¹æ”¯æŒï¼‰:
- `create-api-spec` - OpenAPIè§„èŒƒç”Ÿæˆ
- `create-behavior-spec` - Gherkin featureæ–‡ä»¶ç¼–å†™
- `validate-code-against-spec` - ä½¿ç”¨Dreddæˆ–Schemathesisè‡ªåŠ¨éªŒè¯

**å·¥å…·æ¨è**:

| å·¥å…· | ç”¨é€” | å®‰è£… | ä½¿ç”¨åœºæ™¯ |
|------|------|------|---------|
| **Schemathesis** | åŸºäºOpenAPIçš„å±æ€§æµ‹è¯• | `pip install schemathesis` | è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯API |
| **Dredd** | OpenAPIåˆçº¦æµ‹è¯• | `npm install -g dredd` | HTTPå¥‘çº¦æµ‹è¯• |
| **pytest-bdd** | Gherkin/BDDæµ‹è¯• | `pip install pytest-bdd` | è¡Œä¸ºé©±åŠ¨æµ‹è¯• |
| **jsonschema** | JSON SchemaéªŒè¯ | `pip install jsonschema` | æ•°æ®æ¨¡å‹éªŒè¯ |

**æµ‹è¯•ç¤ºä¾‹**:
```python
# tests/contract/test_canvas_contracts.py
import pytest
import json
import jsonschema

def load_schema(schema_name):
    with open(f"specs/data/{schema_name}.schema.json") as f:
        return json.load(f)

def test_add_node_returns_valid_node():
    """éªŒè¯add_nodeè¿”å›çš„èŠ‚ç‚¹æ˜¯å¦ç¬¦åˆschema"""
    schema = load_schema("canvas-node")

    # è°ƒç”¨è¢«æµ‹å‡½æ•°
    from canvas_utils import CanvasJSONOperator
    operator = CanvasJSONOperator()
    canvas_data = {"nodes": [], "edges": []}
    node = operator.add_node(canvas_data, "text", "Hello", color="1")

    # éªŒè¯è¿”å›å€¼æ˜¯å¦ç¬¦åˆschema
    try:
        jsonschema.validate(instance=node, schema=schema)
    except jsonschema.ValidationError as e:
        pytest.fail(f"Node does not match schema: {e.message}")

def test_add_node_rejects_invalid_color():
    """éªŒè¯add_nodeæ‹’ç»æ— æ•ˆçš„é¢œè‰²ä»£ç """
    operator = CanvasJSONOperator()
    canvas_data = {"nodes": [], "edges": []}

    with pytest.raises(ValueError, match="Invalid color"):
        operator.add_node(canvas_data, "text", "Hello", color="red")  # âŒ æ— æ•ˆ
```

---

### 4.4 ADRï¼ˆArchitecture Decision Recordsï¼‰

**BMadæœªç›´æ¥æåŠADR**ï¼Œä½†å¯ä»¥æ— ç¼é›†æˆã€‚

**æ¨èä½ç½®**:
```
docs/
â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ decisions/            # ADRå­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ 0001-use-obsidian-canvas.md
â”‚   â”‚   â”œâ”€â”€ 0002-langgraph-agents.md
â”‚   â”‚   â”œâ”€â”€ 0003-graphiti-memory.md
â”‚   â”‚   â””â”€â”€ 0004-async-execution-engine.md
â”‚   â””â”€â”€ index.md              # å¼•ç”¨ADR
```

**ä¸BMadé›†æˆ**:
- **Phase 3 (Solutioning)**: Architectç”ŸæˆADR
- **devLoadAlwaysFiles**: å°†å…³é”®ADRåŠ å…¥`core-config.yaml`
- **Storyå¼•ç”¨**: æ¯ä¸ªStoryå¼•ç”¨ç›¸å…³ADR

**ADRæ¨¡æ¿**ï¼ˆMichael Nygardæ ¼å¼ï¼‰:
```markdown
# ADR-0004: é‡‡ç”¨AsyncIOå®ç°å¹¶è¡ŒAgentæ‰§è¡Œ

## Status
Accepted (2025-11-04)

## Context
Epic 10åˆç‰ˆä½¿ç”¨ä¸²è¡Œæ‰§è¡Œï¼Œ10ä¸ªèŠ‚ç‚¹éœ€è¦100ç§’ã€‚
ç”¨æˆ·åé¦ˆé€Ÿåº¦å¤ªæ…¢ï¼Œéœ€è¦å¹¶è¡ŒåŒ–ã€‚

**é—®é¢˜**:
- ä¸²è¡Œæ‰§è¡Œå¯¼è‡´æ€§èƒ½ç“¶é¢ˆ
- ç”¨æˆ·ç­‰å¾…æ—¶é—´è¿‡é•¿
- æ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸CPU

## Decision
ä½¿ç”¨Python asyncio.gather()å®ç°çœŸæ­£çš„å¼‚æ­¥å¹¶è¡Œæ‰§è¡Œã€‚
æœ€å¤šæ”¯æŒ12ä¸ªAgentåŒæ—¶è¿è¡Œã€‚

**æŠ€æœ¯é€‰å‹**:
- âœ… asyncio.gather() (é€‰æ‹©)
- âŒ threading (æ‹’ç»ï¼ŒGILé™åˆ¶)
- âŒ multiprocessing (æ‹’ç»ï¼ŒAgentçŠ¶æ€å…±äº«å›°éš¾)

## Consequences

**æ­£é¢å½±å“**:
- æ€§èƒ½æå‡8å€ï¼ˆ100ç§’ â†’ 12ç§’ï¼‰
- ç”¨æˆ·ä½“éªŒæ˜¾è‘—æ”¹å–„
- èµ„æºåˆ©ç”¨ç‡æå‡

**è´Ÿé¢å½±å“**:
- ä»£ç å¤æ‚åº¦å¢åŠ ï¼ˆéœ€è¦å¤„ç†å¼‚æ­¥é”™è¯¯ï¼‰
- éœ€è¦æ‰€æœ‰Handlerå¼‚æ­¥åŒ–æ”¹é€ ï¼ˆ2å¤©å·¥ä½œé‡ï¼‰
- è°ƒè¯•éš¾åº¦å¢åŠ 

## Implementation Details
å‚è§:
- OpenAPIè§„èŒƒ: `specs/api/async-execution-engine.openapi.yml`
- å®ç°ä»£ç : `command_handlers/intelligent_parallel_handler.py`
- æµ‹è¯•: `tests/test_epic10_2_e2e.py`

## Supersedes
ADR-0010 (æ—§çš„ä¸²è¡Œæ‰§è¡Œæ–¹æ¡ˆ)

## Superseded By
æ— ï¼ˆå½“å‰æœ‰æ•ˆï¼‰
```

---

### 4.5 Graphitiè®°å¿†ç³»ç»Ÿ

**BMadæœªç›´æ¥æåŠRAGæˆ–Graphiti**ï¼Œä½†å¯ä»¥ä½œä¸ºè¡¥å……ã€‚

**Canvasé¡¹ç›®å·²æœ‰**:
- `graphiti-memory-agent.md`: çŸ¥è¯†å›¾è°±è®°å¿†æœåŠ¡
- Neo4j/Graphiti: æ¦‚å¿µå…³ç³»ç½‘ç»œ
- LanceDB: æ–‡æ¡£è¯­ä¹‰å‘é‡

**ä¸BMadé›†æˆå»ºè®®**:

1. **Storyç”Ÿæˆæ—¶æŸ¥è¯¢**:
   - SMç”ŸæˆStoryå‰ï¼ŒæŸ¥è¯¢Graphitiè·å–ç›¸å…³å†å²å†³ç­–

2. **Code Reviewæ—¶éªŒè¯**:
   - Devå®ç°æ—¶ï¼Œå¯¹æ¯”Graphitiä¸­çš„æ¶æ„çº¦æŸ

3. **QAæµ‹è¯•æ—¶å¢å¼º**:
   - QAä»GraphitiåŠ è½½å†å²æµ‹è¯•ç”¨ä¾‹

**devLoadAlwaysFilesé›†æˆ**:
```yaml
# .bmad-core/core-config.yaml
customTechnicalDocuments:
  - .claude/agents/graphiti-memory-agent.md
  - docs/architecture/memory-system-overview.md
```

---

## 5. Canvasé¡¹ç›®BMadé›†æˆæ–¹æ¡ˆ

### 5.1 ç›®æ ‡æ–‡ä»¶ç»“æ„

**æ¨èï¼šåˆ›å»º`Canvas/`ç»Ÿä¸€ç›®å½•**

```
C:/Users/ROG/æ‰˜ç¦/
â””â”€â”€ Canvas/                           # ğŸ“¦ æ–°ï¼šç»Ÿä¸€Canvasä»£ç åº“
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ canvas_utils.py           # ç§»åŠ¨è‡ªæ ¹ç›®å½•
    â”‚   â”œâ”€â”€ command_handlers/
    â”‚   â”œâ”€â”€ agents/                   # Pythonå®ç°çš„agent helpers
    â”‚   â””â”€â”€ tests/
    â”‚
    â”œâ”€â”€ docs/
    â”‚   â”œâ”€â”€ prd/                      # âœ… ä¿ç•™ (å·²åˆ†ç‰‡)
    â”‚   â”‚   â”œâ”€â”€ index.md
    â”‚   â”‚   â”œâ”€â”€ epic-1-core-operations.md
    â”‚   â”‚   â”œâ”€â”€ epic-2-decomposition.md
    â”‚   â”‚   â””â”€â”€ ...
    â”‚   â”œâ”€â”€ architecture/             # âœ… ä¿ç•™ + å¢å¼º
    â”‚   â”‚   â”œâ”€â”€ index.md
    â”‚   â”‚   â”œâ”€â”€ canvas-layer-architecture.md
    â”‚   â”‚   â”œâ”€â”€ agent-coordination.md
    â”‚   â”‚   â”œâ”€â”€ coding-standards.md  # ğŸ†• BMadæ¨è
    â”‚   â”‚   â”œâ”€â”€ tech-stack.md        # ğŸ†• BMadæ¨è
    â”‚   â”‚   â”œâ”€â”€ project-structure.md # ğŸ†• BMadæ¨è
    â”‚   â”‚   â””â”€â”€ decisions/           # ğŸ†• ADR
    â”‚   â”‚       â”œâ”€â”€ 0001-use-obsidian-canvas.md
    â”‚   â”‚       â”œâ”€â”€ 0002-langgraph-agents.md
    â”‚   â”‚       â”œâ”€â”€ 0003-graphiti-memory.md
    â”‚   â”‚       â””â”€â”€ 0004-async-execution-engine.md
    â”‚   â”œâ”€â”€ stories/                  # âœ… ä¿ç•™
    â”‚   â””â”€â”€ product-brief.md
    â”‚
    â”œâ”€â”€ specs/                        # ğŸ†• Specification-Driven Design
    â”‚   â”œâ”€â”€ api/
    â”‚   â”‚   â””â”€â”€ canvas-api.openapi.yml
    â”‚   â”œâ”€â”€ data/
    â”‚   â”‚   â”œâ”€â”€ canvas-node.schema.json
    â”‚   â”‚   â”œâ”€â”€ canvas-edge.schema.json
    â”‚   â”‚   â””â”€â”€ agent-response.schema.json
    â”‚   â””â”€â”€ behavior/
    â”‚       â”œâ”€â”€ decomposition-workflow.feature
    â”‚       â”œâ”€â”€ scoring-workflow.feature
    â”‚       â””â”€â”€ review-board-workflow.feature
    â”‚
    â”œâ”€â”€ .bmad-core/                   # ğŸ†• BMad Frameworké…ç½®
    â”‚   â”œâ”€â”€ core-config.yaml          # æ ¸å¿ƒé…ç½® â­â­â­
    â”‚   â”œâ”€â”€ templates/
    â”‚   â”‚   â”œâ”€â”€ agent-template.md
    â”‚   â”‚   â”œâ”€â”€ story-template.md
    â”‚   â”‚   â””â”€â”€ prd-template.md
    â”‚   â”œâ”€â”€ checklists/
    â”‚   â”‚   â”œâ”€â”€ story-completion-checklist.md
    â”‚   â”‚   â”œâ”€â”€ code-review-checklist.md
    â”‚   â”‚   â””â”€â”€ technical-verification-checklist.md
    â”‚   â””â”€â”€ data/
    â”‚       â”œâ”€â”€ helpers.md            # Helperå¼•ç”¨ç³»ç»Ÿ â­â­
    â”‚       â”œâ”€â”€ technical-preferences.md
    â”‚       â””â”€â”€ canvas-kb.md          # CanvasçŸ¥è¯†åº“
    â”‚
    â”œâ”€â”€ .claude/
    â”‚   â”œâ”€â”€ agents/                   # âœ… ä¿ç•™ (14ä¸ªagents)
    â”‚   â”œâ”€â”€ commands/                 # âœ… ä¿ç•™
    â”‚   â”œâ”€â”€ settings.local.json       # âœ… ä¿ç•™
    â”‚   â””â”€â”€ skills/                   # âœ… ä¿ç•™ (langgraph, graphiti, obsidian-canvas)
    â”‚
    â”œâ”€â”€ ç¬”è®°åº“/                       # âœ… ä¿ç•™ (Canvasç™½æ¿æ–‡ä»¶)
    â”‚
    â”œâ”€â”€ CLAUDE.md                     # âœ… ä¿ç•™ï¼ˆä¼˜åŒ–ä¸º<5KBï¼Œä½¿ç”¨Helperå¼•ç”¨ï¼‰
    â”œâ”€â”€ CANVAS_ERROR_LOG.md           # âœ… ä¿ç•™
    â”œâ”€â”€ requirements.txt              # âœ… ä¿ç•™
    â”œâ”€â”€ .gitignore                    # âœ… ä¿ç•™
    â””â”€â”€ README.md                     # âœ… ä¿ç•™ï¼ˆæ›´æ–°ä¸ºBMadé›†æˆç‰ˆï¼‰
```

---

### 5.2 æ ¸å¿ƒæ–°å¢æ–‡ä»¶

#### æ–‡ä»¶1: `.bmad-core/core-config.yaml` â­â­â­

```yaml
# Canvas Learning System - BMad Configuration

# Phase 1: Analysis & Planning
planningPhase:
  analyst: true
  pm: true
  architect: true

# Phase 4: Development Context Files (devLoadAlwaysFiles)
devLoadAlwaysFiles:
  - docs/architecture/coding-standards.md
  - docs/architecture/tech-stack.md
  - docs/architecture/project-structure.md
  - docs/architecture/canvas-layer-architecture.md
  - CANVAS_ERROR_LOG.md

# Templates
templates:
  prd: .bmad-core/templates/prd-template.md
  story: .bmad-core/templates/story-template.md
  agent: .bmad-core/templates/agent-template.md

# Custom Technical Documents
customTechnicalDocuments:
  - docs/architecture/decisions/*.md
  - docs/architecture/agent-coordination.md

# Specification Files
specifications:
  openapi: specs/api/canvas-api.openapi.yml
  schemas: specs/data/*.schema.json
  behavior: specs/behavior/*.feature

# Skills
skills:
  - .claude/skills/langgraph
  - .claude/skills/graphiti
  - .claude/skills/obsidian-canvas

# Helper System
helpers:
  enabled: true
  file: .bmad-core/data/helpers.md
```

**å…³é”®ä»·å€¼**:
- âœ… **devLoadAlwaysFiles**ç¡®ä¿æ ¸å¿ƒæ¶æ„æ–‡æ¡£å§‹ç»ˆåŠ è½½
- âœ… **specifications**å®šä¹‰OpenAPIè§„èŒƒä½ç½®
- âœ… **helpers**å¯ç”¨Helperå¼•ç”¨ç³»ç»Ÿï¼ˆèŠ‚çœ70-85% tokensï¼‰

---

#### æ–‡ä»¶2: `docs/architecture/coding-standards.md` â­â­â­

```markdown
# Canvas Learning System - Coding Standards

**ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¥æœŸ**: 2025-11-17
**çŠ¶æ€**: devLoadAlwaysFilesï¼ˆå§‹ç»ˆåŠ è½½ï¼‰

---

## Pythonä»£ç è§„èŒƒ

### å‡½æ•°å‘½å
- **Canvasæ“ä½œ**: `verb_noun`
  - ç¤ºä¾‹: `add_node`, `find_node_by_id`, `remove_edge`
- **Agentè°ƒç”¨**: `agent_name_action`
  - ç¤ºä¾‹: `scoring_agent_evaluate`, `decomposition_agent_generate`

### æ³¨é‡Šè§„èŒƒ

**æ¯ä¸ªAPIè°ƒç”¨å¿…é¡»æ ‡æ³¨æ–‡æ¡£æ¥æº**:

```python
# âœ… Verified from LangGraph Skill (Quick Reference #1: "Pattern: Agent with Tools")
agent = create_react_agent(
    model=llm,
    tools=[search_tool, calculator_tool],
    state_modifier="You are a helpful assistant."
)

# âœ… Verified from specs/api/canvas-api.openapi.yml#/addNode
node = canvas_operator.add_node(
    canvas_data,
    node_type="text",
    text="Hello",
    color="1"
)

# âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆç¼ºå°‘æ–‡æ¡£æ¥æºæ ‡æ³¨ï¼‰
agent = create_react_agent(model, tools)  # æ— æ³•éªŒè¯APIæ­£ç¡®æ€§
```

### Canvasé¢œè‰²å¸¸é‡

**å¿…é¡»ä½¿ç”¨å¸¸é‡ï¼Œä¸è¦ç¡¬ç¼–ç æ•°å­—**:

```python
# âœ… Verified from docs/architecture/canvas-layer-architecture.md#ColorSystem
COLOR_RED = "1"      # ä¸ç†è§£
COLOR_GREEN = "2"    # å®Œå…¨ç†è§£ (è¯„åˆ†â‰¥80)
COLOR_PURPLE = "3"   # ä¼¼æ‡‚éæ‡‚ (è¯„åˆ†60-79)
COLOR_BLUE = "5"     # AIè§£é‡Š
COLOR_YELLOW = "6"   # ä¸ªäººç†è§£è¾“å‡ºåŒº

# âœ… æ­£ç¡®ä½¿ç”¨
node = add_node(canvas_data, "text", "Hello", color=COLOR_RED)

# âŒ é”™è¯¯ç¤ºä¾‹
node = add_node(canvas_data, "text", "Hello", color="1")  # ç¡¬ç¼–ç 
```

### é”™è¯¯å¤„ç†

**æ‰€æœ‰Canvasæ“ä½œå¿…é¡»try-except**:

```python
# âœ… æ­£ç¡®ç¤ºä¾‹
try:
    canvas_data = canvas_operator.read_canvas(file_path)
except FileNotFoundError:
    logger.error(f"Canvas file not found: {file_path}")
    # è®°å½•åˆ°CANVAS_ERROR_LOG.md
    raise
except json.JSONDecodeError as e:
    logger.error(f"Invalid Canvas JSON: {e}")
    # è®°å½•åˆ°CANVAS_ERROR_LOG.md
    raise
```

### OpenAPIè§„èŒƒéµå®ˆ

**æ‰€æœ‰Canvasæ“ä½œå¿…é¡»100%ç¬¦åˆOpenAPIè§„èŒƒ**:

```python
# âœ… Verified from specs/api/canvas-api.openapi.yml#/addNode
def add_node(canvas_data, node_type, text, color, **kwargs):
    """
    Add a node to Canvas

    Args:
        canvas_data (dict): Canvas JSON data
        node_type (str): Node type, must be ["text", "file", "group", "link"]
        text (str): Node content
        color (str): Color code, must be ["1", "2", "3", "5", "6"]

    Returns:
        dict: Created node object

    Raises:
        ValueError: If color not in allowed values

    Specification:
        âœ… Verified from specs/api/canvas-api.openapi.yml#/addNode
    """
    # colorå¿…é¡»æ˜¯["1", "2", "3", "5", "6"]ä¹‹ä¸€ï¼ˆOpenAPIè§„èŒƒè¦æ±‚ï¼‰
    assert color in ["1", "2", "3", "5", "6"], f"Invalid color: {color}"
    # å®ç°...
```

---

## æ–‡æ¡£è§„èŒƒ

### Storyæ–‡ä»¶ç»“æ„

**å¿…é¡»ä½¿ç”¨`.bmad-core/templates/story-template.md`**:

```markdown
# Story X.Y.Z: [æ ‡é¢˜]

## Objective
[ç›®æ ‡æè¿°]

## Acceptance Criteria
- [ ] [éªŒæ”¶æ ‡å‡†1]
- [ ] [éªŒæ”¶æ ‡å‡†2]

## Technical Implementation

**OpenAPIè§„èŒƒ**:
- âœ… `specs/api/canvas-api.openapi.yml#/addNode`

**ADRå‚è€ƒ**:
- [ADR-0002: LangGraph Agents](../architecture/decisions/0002-langgraph-agents.md)

**Implementation**:
[è¯¦ç»†å®ç°æ­¥éª¤]

## QA Validation
- [ ] Contract tests pass
- [ ] Code matches OpenAPI spec
- [ ] Gherkin scenarios pass
```

### Agentå®šä¹‰è§„èŒƒ

**æ¯ä¸ªagentå¿…é¡»åŒ…å«**:
- **Purpose**: Agentçš„èŒè´£
- **Input**: è¾“å…¥æ ¼å¼
- **Output**: è¾“å‡ºæ ¼å¼
- **Tools**: ä½¿ç”¨çš„å·¥å…·
- **Skills/Context7æ¥æº**: å¿…é¡»æ ‡æ³¨æŠ€æœ¯æ ˆæ¥æº

```markdown
# scoring-agent

## Purpose
è¯„ä¼°ç”¨æˆ·åœ¨é»„è‰²èŠ‚ç‚¹ä¸­çš„ç†è§£è´¨é‡ï¼Œä½¿ç”¨4ç»´è¯„åˆ†ç³»ç»Ÿ

## Input
```json
{
  "concept": "é€†å¦å‘½é¢˜",
  "userUnderstanding": "ç”¨æˆ·ç”¨è‡ªå·±è¯çš„è§£é‡Š..."
}
```

## Output
```json
{
  "accuracy": 23,
  "imagery": 21,
  "completeness": 24,
  "originality": 22,
  "totalScore": 90,
  "recommendedAgents": []
}
```

## Tools
- LangChain ReAct Agent
- Claude Sonnet 4.5

## Specification
âœ… Verified from:
- OpenAPI: `specs/api/canvas-api.openapi.yml#/scoringAgentEvaluate`
- JSON Schema: `specs/data/scoring-response.schema.json`
- Gherkin: `specs/behavior/scoring-workflow.feature`
```

---

## æµ‹è¯•è§„èŒƒ

### Contract Testing

**æ¯ä¸ªå…¬å¼€APIå¿…é¡»æœ‰å¥‘çº¦æµ‹è¯•**:

```python
# tests/contract/test_canvas_contracts.py

def test_add_node_returns_valid_node():
    """
    éªŒè¯add_nodeè¿”å›çš„èŠ‚ç‚¹æ˜¯å¦ç¬¦åˆJSON Schema

    è§„èŒƒ: specs/data/canvas-node.schema.json
    """
    schema = load_schema("canvas-node")

    operator = CanvasJSONOperator()
    canvas_data = {"nodes": [], "edges": []}
    node = operator.add_node(canvas_data, "text", "Hello", color="1")

    # éªŒè¯è¿”å›å€¼æ˜¯å¦ç¬¦åˆschema
    jsonschema.validate(instance=node, schema=schema)
```

### Gherkinè¡Œä¸ºæµ‹è¯•

**æ¯ä¸ªæ ¸å¿ƒå·¥ä½œæµå¿…é¡»æœ‰Gherkinè§„èŒƒ**:

```gherkin
# specs/behavior/scoring-workflow.feature

Scenario: High quality understanding (Green transition)
  Given the yellow node explanation scores:
    | Dimension    | Score |
    | Accuracy     | 23    |
    | Imagery      | 21    |
    | Completeness | 24    |
    | Originality  | 22    |
  When the scoring agent evaluates
  Then the total score should be 90
  And the node color should change to green ("2")
```

---

## é›¶å¹»è§‰å¼€å‘è§„åˆ™

### è§„åˆ™1: æåˆ°ä»€ä¹ˆæŠ€æœ¯ï¼Œç«‹å³æŸ¥é˜…Skillæˆ–Context 7
- æåˆ°`create_react_agent` â†’ ç«‹å³æ‰§è¡Œ `@langgraph`
- æåˆ°`Depends()` â†’ ç«‹å³æŸ¥è¯¢Context 7 FastAPIæ–‡æ¡£

### è§„åˆ™2: å¼€å‘æ—¶å¿…é¡»æŒç»­æŸ¥é˜…Skills/Context7
- æ¯ä¸ªå‡½æ•°è°ƒç”¨å‰ï¼šæŸ¥é˜…å‚æ•°åˆ—è¡¨
- æ¯ä¸ªç±»å®ä¾‹åŒ–å‰ï¼šæŸ¥é˜…æ„é€ å‡½æ•°ç­¾å
- æ¯ä¸ªé…ç½®é¡¹å‰ï¼šæŸ¥é˜…é…ç½®æ–‡æ¡£

### è§„åˆ™3: æ¯ä¸ªAPIè°ƒç”¨å¿…é¡»æ ‡æ³¨æ–‡æ¡£æ¥æº
```python
# âœ… æ­£ç¡®
# âœ… Verified from LangGraph Skill (Quick Reference #1)
agent = create_react_agent(model, tools)

# âŒ é”™è¯¯
agent = create_react_agent(model, tools)  # æ— æ ‡æ³¨
```

### è§„åˆ™4: æœªéªŒè¯çš„APIä¸å…è®¸è¿›å…¥ä»£ç 
- å¦‚æœSkillsä¸­æ‰¾ä¸åˆ° â†’ æŸ¥è¯¢Context 7
- å¦‚æœContext 7ä¹Ÿæ‰¾ä¸åˆ° â†’ æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£
- å¦‚æœéƒ½æ‰¾ä¸åˆ° â†’ **æ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·ï¼Œä¸èƒ½è‡†æµ‹**

---

**æ­¤æ–‡æ¡£æ˜¯devLoadAlwaysFilesçš„ä¸€éƒ¨åˆ†ï¼Œå§‹ç»ˆåŠ è½½åˆ°Claudeä¸Šä¸‹æ–‡ä¸­ã€‚**
```

---

#### æ–‡ä»¶3: `docs/architecture/tech-stack.md` â­â­â­

```markdown
# Canvas Learning System - Tech Stack

**ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¥æœŸ**: 2025-11-17
**çŠ¶æ€**: devLoadAlwaysFilesï¼ˆå§‹ç»ˆåŠ è½½ï¼‰

---

## æ ¸å¿ƒæŠ€æœ¯

### Canvasæ“ä½œ
- **Obsidian Canvas**: `.canvas`æ–‡ä»¶æ ¼å¼ï¼ˆJSON-basedï¼‰
- **Python 3.9+**: canvas_utils.py (3å±‚æ¶æ„)
- **æ–‡æ¡£**: @obsidian-canvas Skill

### Agentç³»ç»Ÿ
- **Claude Code**: Sub-agentåè°ƒ
- **LangGraph**: Agentå·¥ä½œæµæ¡†æ¶
- **Claude Sonnet 4.5**: æ ¸å¿ƒLLM (200Kä¸Šä¸‹æ–‡)

**æ¿€æ´»æ–¹å¼**:
```
@langgraph  # æŸ¥è¯¢LangGraph API
```

### è®°å¿†ç³»ç»Ÿ
- **Neo4j**: å›¾æ•°æ®åº“ï¼ˆTemporal Memory + Graphitiï¼‰
- **Graphiti**: çŸ¥è¯†å›¾è°±æ¡†æ¶
- **LanceDB**: è¯­ä¹‰å‘é‡å­˜å‚¨ï¼ˆSemantic Memoryï¼‰
- **Neo4j GDS**: å›¾ç®—æ³•ï¼ˆLeidenèšç±»ï¼‰

**æ¿€æ´»æ–¹å¼**:
```
@graphiti  # æŸ¥è¯¢Graphiti API
```

### APIè§„èŒƒ
- **OpenAPI 3.0**: Canvasæ“ä½œAPIå®šä¹‰ï¼ˆ`specs/api/canvas-api.openapi.yml`ï¼‰
- **JSON Schema**: æ•°æ®æ¨¡å‹éªŒè¯ï¼ˆ`specs/data/*.schema.json`ï¼‰
- **Gherkin/Cucumber**: è¡Œä¸ºè§„èŒƒï¼ˆ`specs/behavior/*.feature`ï¼‰

### Contract Testing
- **Schemathesis**: OpenAPIè‡ªåŠ¨æµ‹è¯•
- **pytest-bdd**: Gherkinè¡Œä¸ºæµ‹è¯•
- **jsonschema**: æ•°æ®éªŒè¯

---

## Skills

### å·²æ¿€æ´»çš„Skills

| Skill | ä½ç½® | å†…å®¹ | æ¿€æ´»æ–¹å¼ |
|-------|------|------|---------|
| **langgraph** | `.claude/skills/langgraph/` | 952é¡µLangGraphå®Œæ•´æ–‡æ¡£ | `@langgraph` |
| **graphiti** | `.claude/skills/graphiti/` | GraphitiçŸ¥è¯†å›¾è°±æ¡†æ¶æ–‡æ¡£ | `@graphiti` |
| **obsidian-canvas** | `.claude/skills/obsidian-canvas/` | Canvasæ’ä»¶å¼€å‘æ–‡æ¡£ | `@obsidian-canvas` |

### Context7åº“

| æŠ€æœ¯æ ˆ | Library ID | Snippets | æŸ¥è¯¢æ–¹å¼ |
|--------|-----------|----------|---------|
| **FastAPI** | `/websites/fastapi_tiangolo` | 22,734 | Context7 MCP |
| **Neo4j Cypher** | `/websites/neo4j_cypher-manual_25` | 2,032 | Context7 MCP |
| **Neo4j Operations** | `/websites/neo4j_operations-manual-current` | 4,940 | Context7 MCP |

**æŸ¥è¯¢æ–¹å¼**:
```python
mcp__context7-mcp__get-library-docs(
    context7CompatibleLibraryID="/websites/fastapi_tiangolo",
    topic="dependency-injection",
    page=1
)
```

---

## æ¶æ„å†³ç­–è®°å½•ï¼ˆADRï¼‰

| ADR | æ ‡é¢˜ | æ—¥æœŸ | çŠ¶æ€ |
|-----|------|------|------|
| [ADR-0001](decisions/0001-use-obsidian-canvas.md) | é‡‡ç”¨Obsidian Canvasæ ¼å¼ | 2025-10-15 | Accepted |
| [ADR-0002](decisions/0002-langgraph-agents.md) | ä½¿ç”¨LangGraphä½œä¸ºAgentæ¡†æ¶ | 2025-10-15 | Accepted |
| [ADR-0003](decisions/0003-graphiti-memory.md) | é‡‡ç”¨GraphitiçŸ¥è¯†å›¾è°± | 2025-10-20 | Accepted |
| [ADR-0004](decisions/0004-async-execution-engine.md) | AsyncIOå¼‚æ­¥å¹¶è¡Œæ‰§è¡Œ | 2025-11-04 | Accepted |

---

## å¼€å‘å·¥å…·é“¾

| å·¥å…· | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **pytest** | 7.4+ | å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯• |
| **schemathesis** | 3.19+ | Contract Testing |
| **pytest-bdd** | 6.1+ | Gherkinè¡Œä¸ºæµ‹è¯• |
| **jsonschema** | 4.19+ | JSONæ•°æ®éªŒè¯ |
| **pylint** | 2.17+ | ä»£ç è´¨é‡æ£€æŸ¥ |

---

**æ­¤æ–‡æ¡£æ˜¯devLoadAlwaysFilesçš„ä¸€éƒ¨åˆ†ï¼Œå§‹ç»ˆåŠ è½½åˆ°Claudeä¸Šä¸‹æ–‡ä¸­ã€‚**
```

---

#### æ–‡ä»¶4: `docs/architecture/project-structure.md` â­â­â­

```markdown
# Canvas Learning System - Project Structure

**ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¥æœŸ**: 2025-11-17
**çŠ¶æ€**: devLoadAlwaysFilesï¼ˆå§‹ç»ˆåŠ è½½ï¼‰

---

## ç›®å½•ç»“æ„

```
Canvas/
â”œâ”€â”€ src/                              # æºä»£ç 
â”‚   â”œâ”€â”€ canvas_utils.py               # æ ¸å¿ƒCanvasæ“ä½œåº“ï¼ˆ3å±‚æ¶æ„ï¼‰
â”‚   â”œâ”€â”€ command_handlers/             # å‘½ä»¤è¡ŒHandler
â”‚   â””â”€â”€ tests/                        # æµ‹è¯•ä»£ç 
â”‚
â”œâ”€â”€ docs/                             # æ–‡æ¡£
â”‚   â”œâ”€â”€ prd/                          # äº§å“éœ€æ±‚æ–‡æ¡£ï¼ˆå·²åˆ†ç‰‡ï¼‰
â”‚   â”œâ”€â”€ architecture/                 # æ¶æ„æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ coding-standards.md       # devLoadAlwaysFiles â­
â”‚   â”‚   â”œâ”€â”€ tech-stack.md             # devLoadAlwaysFiles â­
â”‚   â”‚   â”œâ”€â”€ project-structure.md      # devLoadAlwaysFiles â­
â”‚   â”‚   â”œâ”€â”€ canvas-layer-architecture.md
â”‚   â”‚   â””â”€â”€ decisions/                # ADRå†³ç­–è®°å½•
â”‚   â”œâ”€â”€ stories/                      # Storyæ–‡ä»¶ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â””â”€â”€ product-brief.md
â”‚
â”œâ”€â”€ specs/                            # è§„èŒƒæ–‡æ¡£ï¼ˆSDDï¼‰
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ canvas-api.openapi.yml    # OpenAPIè§„èŒƒ
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ canvas-node.schema.json   # JSON Schema
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ behavior/
â”‚       â”œâ”€â”€ scoring-workflow.feature  # Gherkinè¡Œä¸ºè§„èŒƒ
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ .bmad-core/                       # BMad Frameworké…ç½®
â”‚   â”œâ”€â”€ core-config.yaml              # æ ¸å¿ƒé…ç½® â­â­â­
â”‚   â”œâ”€â”€ templates/                    # æ–‡æ¡£æ¨¡æ¿
â”‚   â”œâ”€â”€ checklists/                   # QAæ£€æŸ¥æ¸…å•
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ helpers.md                # Helperå¼•ç”¨ç³»ç»Ÿ â­â­
â”‚       â””â”€â”€ canvas-kb.md              # CanvasçŸ¥è¯†åº“
â”‚
â”œâ”€â”€ .claude/                          # Claude Codeé…ç½®
â”‚   â”œâ”€â”€ agents/                       # 14ä¸ªAgentå®šä¹‰
â”‚   â”œâ”€â”€ commands/                     # è‡ªå®šä¹‰æ–œæ å‘½ä»¤
â”‚   â”œâ”€â”€ settings.local.json           # æƒé™é…ç½®
â”‚   â””â”€â”€ skills/                       # Skillsï¼ˆlanggraph, graphiti, obsidian-canvasï¼‰
â”‚
â”œâ”€â”€ ç¬”è®°åº“/                           # Canvasç™½æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ ç¦»æ•£æ•°å­¦/
â”‚   â”‚   â””â”€â”€ ç¦»æ•£æ•°å­¦.canvas
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ CLAUDE.md                         # é¡¹ç›®çº§ä¸Šä¸‹æ–‡ï¼ˆ<5KBï¼Œä½¿ç”¨Helperå¼•ç”¨ï¼‰
â”œâ”€â”€ CANVAS_ERROR_LOG.md               # Canvasæ“ä½œé”™è¯¯æ—¥å¿—
â”œâ”€â”€ requirements.txt                  # Pythonä¾èµ–
â””â”€â”€ README.md                         # é¡¹ç›®è¯´æ˜
```

---

## canvas_utils.py 3å±‚æ¶æ„

```python
# Layer 1: CanvasJSONOperatorï¼ˆJSONåŸå­æ“ä½œï¼‰
class CanvasJSONOperator:
    def read_canvas(file_path: str) -> dict
    def write_canvas(file_path: str, canvas_data: dict)
    def add_node(canvas_data: dict, node_type: str, ...) -> dict
    def find_node_by_id(canvas_data: dict, node_id: str) -> dict
    def add_edge(canvas_data: dict, from_id: str, to_id: str) -> dict

# Layer 2: CanvasBusinessLogicï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
class CanvasBusinessLogic:
    def extract_verification_nodes(canvas_data: dict) -> list
    def cluster_questions_by_topic(questions: list) -> dict
    def generate_review_canvas_file(source_canvas: str, ...) -> str

# Layer 3: CanvasOrchestratorï¼ˆé«˜çº§APIï¼‰
class CanvasOrchestrator:
    def generate_verification_questions_with_agent(...) -> list
    def orchestrate_review_board(...) -> dict
```

**è§„èŒƒå®šä¹‰**: `specs/api/canvas-api.openapi.yml`

**æ¶æ„å†³ç­–**: `docs/architecture/decisions/0001-use-obsidian-canvas.md`

---

## 14ä¸ªAgentç³»ç»Ÿ

### å­¦ä¹ å‹Agentsï¼ˆ12ä¸ªï¼‰

| Agent | æ–‡ä»¶ | èŒè´£ |
|-------|------|------|
| **canvas-orchestrator** | `.claude/agents/canvas-orchestrator.md` | ä¸»æ§Agentï¼Œåè°ƒå…¶ä»–11ä¸ªSub-agents |
| **basic-decomposition** | `.claude/agents/basic-decomposition.md` | åŸºç¡€é—®é¢˜æ‹†è§£ï¼ˆçº¢è‰²èŠ‚ç‚¹ï¼‰ |
| **deep-decomposition** | `.claude/agents/deep-decomposition.md` | æ·±åº¦é—®é¢˜æ‹†è§£ï¼ˆç´«è‰²èŠ‚ç‚¹ï¼‰ |
| **question-decomposition** | `.claude/agents/question-decomposition.md` | åº”ç”¨é¢˜çªç ´æ€§é—®é¢˜ |
| **oral-explanation** | `.claude/agents/oral-explanation.md` | å£è¯­åŒ–è§£é‡Šï¼ˆ800-1200è¯ï¼‰ |
| **clarification-path** | `.claude/agents/clarification-path.md` | ç³»ç»ŸåŒ–æ¾„æ¸…ï¼ˆ1500+è¯ï¼‰ |
| **comparison-table** | `.claude/agents/comparison-table.md` | å¯¹æ¯”è¡¨æ ¼ |
| **memory-anchor** | `.claude/agents/memory-anchor.md` | è®°å¿†é”šç‚¹ï¼ˆç±»æ¯”ã€æ•…äº‹ï¼‰ |
| **four-level-explanation** | `.claude/agents/four-level-explanation.md` | å››å±‚æ¬¡è§£é‡Š |
| **example-teaching** | `.claude/agents/example-teaching.md` | ä¾‹é¢˜æ•™å­¦ |
| **scoring-agent** | `.claude/agents/scoring-agent.md` | 4ç»´è¯„åˆ†ç³»ç»Ÿ |
| **verification-question-agent** | `.claude/agents/verification-question-agent.md` | æ£€éªŒé—®é¢˜ç”Ÿæˆ |

### ç³»ç»Ÿçº§Agentsï¼ˆ2ä¸ªï¼‰

| Agent | æ–‡ä»¶ | èŒè´£ |
|-------|------|------|
| **review-board-agent-selector** | `.claude/agents/review-board-agent-selector.md` | æ™ºèƒ½Agentè°ƒåº¦å™¨ |
| **graphiti-memory-agent** | `.claude/agents/graphiti-memory-agent.md` | GraphitiçŸ¥è¯†å›¾è°±è®°å¿†æœåŠ¡ |

---

## é¢œè‰²ç³»ç»Ÿ

| Canvas Color Code | è§†è§‰é¢œè‰² | å«ä¹‰ | è¯„åˆ†èŒƒå›´ |
|-------------------|---------|------|---------|
| `"1"` | ğŸ”´ çº¢è‰² | ä¸ç†è§£/æœªé€šè¿‡ | <60åˆ† |
| `"2"` | ğŸŸ¢ ç»¿è‰² | å®Œå…¨ç†è§£/å·²é€šè¿‡ | â‰¥80åˆ† |
| `"3"` | ğŸŸ£ ç´«è‰² | ä¼¼æ‡‚éæ‡‚/å¾…æ£€éªŒ | 60-79åˆ† |
| `"5"` | ğŸ”µ è“è‰² | AIè¡¥å……è§£é‡Š | N/A |
| `"6"` | ğŸŸ¡ é»„è‰² | ä¸ªäººç†è§£è¾“å‡ºåŒº | N/Aï¼ˆå¾…è¯„åˆ†ï¼‰ |

**é¢œè‰²æµè½¬è·¯å¾„**:
```
ğŸ”´ çº¢è‰² (å®Œå…¨ä¸æ‡‚)
  â†“ basic-decomposition + å¡«å†™ç†è§£
ğŸŸ¡ é»„è‰² (ä¸ªäººç†è§£)
  â†“ scoring-agentè¯„åˆ†
ğŸŸ£ ç´«è‰² (60-79åˆ†) / ğŸŸ¢ ç»¿è‰² (â‰¥80åˆ†)
  â†“ deep-decomposition (å¦‚æœæ˜¯ç´«è‰²)
ğŸŸ¡ é»„è‰² (ä¼˜åŒ–åçš„ç†è§£)
  â†“ scoring-agentå†æ¬¡è¯„åˆ†
ğŸŸ¢ ç»¿è‰² (â‰¥80åˆ†)
```

---

## BMadå·¥ä½œæµç¨‹

### Phase 1: Analysisï¼ˆåˆ†æï¼‰
- Analyst: å¤´è„‘é£æš´ã€ç ”ç©¶
- PM: äº§å“ç®€æŠ¥ï¼ˆå¯é€‰ï¼‰

### Phase 2: Planningï¼ˆè§„åˆ’ï¼‰
- PM: PRDç”Ÿæˆï¼ˆ`docs/prd/`ï¼‰
- Architect: Tech-specç”Ÿæˆï¼ˆ`docs/architecture/`ï¼‰

### Phase 3: Solutioningï¼ˆæ–¹æ¡ˆè®¾è®¡ï¼‰
- Architect: æ¶æ„è®¾è®¡ + ADRè®°å½•
- Architect: OpenAPIè§„èŒƒç¼–å†™ï¼ˆ`specs/api/`ï¼‰
- Architect: JSON Schemaç¼–å†™ï¼ˆ`specs/data/`ï¼‰

### Phase 4: Implementationï¼ˆå®ç°ï¼‰
- SM: Storyæ‹†è§£ï¼ˆ`docs/stories/`ï¼‰
- Dev: ä»£ç å®ç°ï¼ˆ100%ç¬¦åˆOpenAPIè§„èŒƒï¼‰
- QA: Contract Testing + GherkinéªŒè¯

---

## devLoadAlwaysFiles

**æ ¸å¿ƒé…ç½®**ï¼ˆ`.bmad-core/core-config.yaml`ï¼‰:
```yaml
devLoadAlwaysFiles:
  - docs/architecture/coding-standards.md
  - docs/architecture/tech-stack.md
  - docs/architecture/project-structure.md
  - docs/architecture/canvas-layer-architecture.md
  - CANVAS_ERROR_LOG.md
```

**ä½œç”¨**ï¼š
- âœ… è¿™äº›æ–‡ä»¶**å§‹ç»ˆåŠ è½½**åˆ°Claudeä¸Šä¸‹æ–‡ä¸­
- âœ… ç¡®ä¿Dev Agentå§‹ç»ˆäº†è§£æ ¸å¿ƒæ¶æ„å’Œè§„èŒƒ
- âœ… é¿å…ä¸Šä¸‹æ–‡ä¸¢å¤±å¯¼è‡´çš„å¹»è§‰ä»£ç 

---

## Helperå¼•ç”¨ç³»ç»Ÿ

**ä½ç½®**: `.bmad-core/data/helpers.md`

**ä½œç”¨**: èŠ‚çœ70-85% tokensï¼Œé€šè¿‡å¼•ç”¨æ¨¡å¼è€ŒéåµŒå…¥å®Œæ•´æµç¨‹

**ç¤ºä¾‹**:
```markdown
# CLAUDE.mdï¼ˆä¼˜åŒ–åï¼Œ<5KBï¼‰

## Canvasæ“ä½œè§„èŒƒ
@CANVAS_ERROR_LOG.md#Standard-Operation-Procedures

## é›¶å¹»è§‰å¼€å‘åŸåˆ™
@~/.claude/CLAUDE.md#Zero-Hallucination-Development

## Storyå¼€å‘æµç¨‹
@.bmad-core/data/helpers.md#Story-Development-Workflow
```

---

**æ­¤æ–‡æ¡£æ˜¯devLoadAlwaysFilesçš„ä¸€éƒ¨åˆ†ï¼Œå§‹ç»ˆåŠ è½½åˆ°Claudeä¸Šä¸‹æ–‡ä¸­ã€‚**
```

---

### 5.3 å®æ–½æ­¥éª¤

#### Phase 1: æ–‡ä»¶é‡ç»„ï¼ˆ1-2å°æ—¶ï¼‰

**Step 1.1: åˆ›å»ºCanvas/ç›®å½•**
```bash
mkdir -p Canvas/{src,specs/{api,data,behavior},.bmad-core/{templates,checklists,data}}
mkdir -p Canvas/docs/architecture/decisions
```

**Step 1.2: ç§»åŠ¨ç°æœ‰æ–‡ä»¶**
```bash
# ç§»åŠ¨æºä»£ç 
mv canvas_utils.py Canvas/src/
mv command_handlers/ Canvas/src/
mv tests/ Canvas/src/

# ç§»åŠ¨æ–‡æ¡£ï¼ˆä¿æŒdocs/ç»“æ„ä¸å˜ï¼‰
mv docs/ Canvas/docs/
mv .claude/ Canvas/.claude/
mv ç¬”è®°åº“/ Canvas/ç¬”è®°åº“/

# ç§»åŠ¨æ ¹çº§æ–‡ä»¶
mv CLAUDE.md Canvas/
mv CANVAS_ERROR_LOG.md Canvas/
mv requirements.txt Canvas/
mv .gitignore Canvas/
mv README.md Canvas/
```

**Step 1.3: éªŒè¯**
```bash
cd Canvas
pytest src/tests/  # ç¡®ä¿æµ‹è¯•é€šè¿‡
```

---

#### Phase 2: BMadæ ¸å¿ƒé…ç½®ï¼ˆ2-3å°æ—¶ï¼‰

**Step 2.1: åˆ›å»ºcore-config.yaml**
- æ–‡ä»¶: `Canvas/.bmad-core/core-config.yaml`
- å†…å®¹: å‚è§ä¸Šæ–‡5.2èŠ‚

**Step 2.2: åˆ›å»ºdevLoadAlwaysFiles**
- æ–‡ä»¶: `Canvas/docs/architecture/coding-standards.md`
- æ–‡ä»¶: `Canvas/docs/architecture/tech-stack.md`
- æ–‡ä»¶: `Canvas/docs/architecture/project-structure.md`
- å†…å®¹: å‚è§ä¸Šæ–‡5.2èŠ‚

**Step 2.3: åˆ›å»ºCanvasçŸ¥è¯†åº“**
- æ–‡ä»¶: `Canvas/.bmad-core/data/canvas-kb.md`

---

#### Phase 3: Specification-Driven Designï¼ˆ3-4å°æ—¶ï¼‰

**Step 3.1: åˆ›å»ºOpenAPIè§„èŒƒ**
- æ–‡ä»¶: `Canvas/specs/api/canvas-api.openapi.yml`
- å®šä¹‰æ‰€æœ‰Canvasæ“ä½œAPI

**Step 3.2: åˆ›å»ºJSON Schemas**
- æ–‡ä»¶: `Canvas/specs/data/canvas-node.schema.json`
- æ–‡ä»¶: `Canvas/specs/data/canvas-edge.schema.json`
- æ–‡ä»¶: `Canvas/specs/data/agent-response.schema.json`
- æ–‡ä»¶: `Canvas/specs/data/scoring-response.schema.json`

**Step 3.3: åˆ›å»ºGherkinè¡Œä¸ºè§„èŒƒ**
- æ–‡ä»¶: `Canvas/specs/behavior/scoring-workflow.feature`
- æ–‡ä»¶: `Canvas/specs/behavior/decomposition-workflow.feature`
- æ–‡ä»¶: `Canvas/specs/behavior/review-board-workflow.feature`

---

#### Phase 4: ADR + Contract Testingï¼ˆ2-3å°æ—¶ï¼‰

**Step 4.1: åˆ›å»ºADR**
- æ–‡ä»¶: `Canvas/docs/architecture/decisions/0001-use-obsidian-canvas.md`
- æ–‡ä»¶: `Canvas/docs/architecture/decisions/0002-langgraph-agents.md`
- æ–‡ä»¶: `Canvas/docs/architecture/decisions/0003-graphiti-memory.md`
- æ–‡ä»¶: `Canvas/docs/architecture/decisions/0004-async-execution-engine.md`

**Step 4.2: åˆ›å»ºContract Testing**
- æ–‡ä»¶: `Canvas/tests/contract/test_canvas_contracts.py`
- æ–‡ä»¶: `Canvas/tests/contract/test_agent_contracts.py`
- æ–‡ä»¶: `Canvas/tests/contract/conftest.py`

**Step 4.3: å®‰è£…å·¥å…·**
```bash
pip install schemathesis pytest-bdd jsonschema
```

---

#### Phase 5: CLAUDE.mdä¼˜åŒ–ï¼ˆ1å°æ—¶ï¼‰

**Step 5.1: åˆ›å»ºhelpers.md**
- æ–‡ä»¶: `Canvas/.bmad-core/data/helpers.md`

**Step 5.2: ä¼˜åŒ–CLAUDE.md**
- å°†27KBçš„CLAUDE.mdä¼˜åŒ–ä¸º<5KB
- ä½¿ç”¨Helperå¼•ç”¨æ¨¡å¼

**Step 5.3: æ›´æ–°README.md**
- æ›´æ–°ä¸ºBMadé›†æˆç‰ˆè¯´æ˜

---

#### Phase 6: æµ‹è¯•å’ŒéªŒè¯ï¼ˆ1-2å°æ—¶ï¼‰

**Step 6.1: å•å…ƒæµ‹è¯•**
```bash
cd Canvas
pytest src/tests/ -v --cov=src/
```

**Step 6.2: Contract Testing**
```bash
# OpenAPIè§„èŒƒéªŒè¯
schemathesis run specs/api/canvas-api.openapi.yml \
  --base-url http://localhost:8000 \
  --checks all

# Gherkinè¡Œä¸ºæµ‹è¯•
pytest --gherkin-terminal-reporter specs/behavior/
```

**Step 6.3: æ–‡æ¡£éªŒè¯**
- ç¡®è®¤æ‰€æœ‰`@`å¼•ç”¨å¯è§£æ
- ç¡®è®¤`devLoadAlwaysFiles`æ–‡ä»¶å­˜åœ¨
- ç¡®è®¤OpenAPIè§„èŒƒå¯ç”¨Swagger UIæŸ¥çœ‹

---

## 6. é¢„æœŸæ•ˆæœ

### 6.1 åŸºäºçœŸå®BMadæ¡ˆä¾‹çš„æ•ˆæœè¯„ä¼°

| æŒ‡æ ‡ | å½“å‰çŠ¶æ€ | BMadé›†æˆå | æ”¹å–„å¹…åº¦ | æ•°æ®æ¥æº |
|------|---------|-----------|---------|---------|
| **APIå¹»è§‰ç‡** | ~40% | **<5%** | â¬‡88% | BMadç¤¾åŒºæŠ¥å‘Š |
| **æ–‡ä»¶ä¸ä¸€è‡´** | é¢‘ç¹ | **ç½•è§** | â¬‡90% | Document Shardingæ•ˆæœ |
| **PRDæ¼‚ç§»å½±å“** | ä¸¥é‡ | **å¯æ§** | â¬‡80% | devLoadAlwaysFilesæœºåˆ¶ |
| **ä¸Šä¸‹æ–‡tokenä½¿ç”¨** | ~140k | **~50k** | â¬‡64% | Helper Systemä¼˜åŒ– |
| **æ–°æˆå‘˜ä¸Šæ‰‹æ—¶é—´** | 3-5å¤© | **1å¤©** | â¬‡70% | BMadæ ‡å‡†åŒ–æµç¨‹ |
| **è·¨ä¼šè¯ä¸Šä¸‹æ–‡ä¸¢å¤±** | ç»å¸¸ | **ä»ä¸** | â¬‡100% | YAML Status + Graphiti |
| **Contract Testingè¦†ç›–ç‡** | 0% | **>80%** | +80% | SDDé›†æˆ |

### 6.2 æ ¸å¿ƒæœºåˆ¶è¯´æ˜

#### 1ï¸âƒ£ **Document Sharding**
- **åŸç†**: å°†å¤§å‹æ–‡æ¡£ï¼ˆ>20k tokensï¼‰æŒ‰äºŒçº§æ ‡é¢˜åˆ†ç‰‡
- **æ•ˆæœ**: é¿å…ä¸Šä¸‹æ–‡å´©æºƒï¼ŒCanvasé¡¹ç›®CLAUDE.mdä»27KB â†’ <5KB

#### 2ï¸âƒ£ **devLoadAlwaysFiles**
- **åŸç†**: æ ¸å¿ƒæ¶æ„æ–‡æ¡£å§‹ç»ˆåŠ è½½åˆ°Claudeä¸Šä¸‹æ–‡
- **æ•ˆæœ**: ç¡®ä¿Dev Agentå§‹ç»ˆäº†è§£coding-standardsã€tech-stackã€project-structure

#### 3ï¸âƒ£ **OpenAPIè§„èŒƒ**
- **åŸç†**: æ‰€æœ‰APIå¿…é¡»100%ç¬¦åˆOpenAPIè§„èŒƒ
- **æ•ˆæœ**: æ¶ˆé™¤APIå¹»è§‰ï¼ˆcolor="red" â†’ color="1"ï¼‰

#### 4ï¸âƒ£ **Contract Testing**
- **åŸç†**: è‡ªåŠ¨éªŒè¯ä»£ç æ˜¯å¦ç¬¦åˆOpenAPIè§„èŒƒ
- **æ•ˆæœ**: CI/CDä¸­å¼ºåˆ¶æ‰§è¡Œï¼Œç ´åAPIå¥‘çº¦çš„PRæ— æ³•åˆå¹¶

#### 5ï¸âƒ£ **Helper System**
- **åŸç†**: å¼•ç”¨æ¨¡å¼ï¼ˆ@helpers.md#Sectionï¼‰è€ŒéåµŒå…¥å®Œæ•´æµç¨‹
- **æ•ˆæœ**: èŠ‚çœ70-85% tokensï¼Œä¸Šä¸‹æ–‡ä»140k â†’ 50k

---

## 7. é™„å½•ï¼šå‚è€ƒé“¾æ¥

### BMadå®˜æ–¹èµ„æº

1. **GitHubä¸»ä»“åº“**:
   - https://github.com/bmad-code-org/BMAD-METHOD
   - https://github.com/24601/BMAD-AT-CLAUDE (Claude Codeç§»æ¤ç‰ˆ)
   - https://github.com/aj-geddes/claude-code-bmad-skills (Skillsé›†æˆ)

2. **å®˜æ–¹æ–‡æ¡£**:
   - https://bmadcodes.com/bmad-method/
   - https://bmadcodes.com/user-guide/
   - https://bmadcodes.com/bmad-method-v4/

3. **Document Sharding Guide**:
   - https://github.com/bmad-code-org/BMAD-METHOD/blob/main/docs/document-sharding-guide.md

4. **Specification-Driven Design**:
   - https://github.com/bmad-code-org/BMAD-METHOD/issues/279

### Claude Codeæœ€ä½³å®è·µ

5. **å®˜æ–¹æœ€ä½³å®è·µ**:
   - https://www.anthropic.com/engineering/claude-code-best-practices
   - https://callmephilip.com/posts/notes-on-claude-md-structure-and-best-practices/

6. **CLAUDE.mdæŒ‡å—**:
   - https://apidog.com/blog/claude-md/

### æŠ€æœ¯æ–‡ç« 

7. **BMad Methodæ·±åº¦è§£æ**:
   - https://buildmode.dev/blog/mastering-bmad-method-2025/
   - https://medium.com/@visrow/what-is-bmad-method-a-simple-guide-to-the-future-of-ai-driven-development-412274f91419
   - https://medium.com/@courtlinholt/mastering-the-bmad-method-a-revolutionary-approach-to-agile-ai-driven-development-for-modern-e7be588b8d94

8. **Federated Knowledge Architecture**:
   - https://medium.com/@visrow/scaling-ai-development-with-bmad-method-how-federated-knowledge-architecture-transforms-7b76531913c6

### Contract Testing

9. **OpenAPI + Contract Testing**:
   - https://medium.com/geekculture/contract-testing-with-openapi-42267098ddc7
   - https://opensource.com/article/18/6/better-api-testing-openapi-specification

10. **Schemathesis Documentation**:
    - https://schemathesis.readthedocs.io/
    - https://github.com/schemathesis/schemathesis

---

## æ€»ç»“

### å…³é”®å‘ç°

1. **Canvasé¡¹ç›®å·²ç»å®ç°äº†95%çš„BMadæ ¸å¿ƒç»“æ„** âœ…
   - PRDåˆ†ç‰‡ã€Storyç‹¬ç«‹æ–‡ä»¶ã€Architectureæ–‡æ¡£ã€14ä¸ªAgentå®šä¹‰
   - ä¸BMadæ ‡å‡†é«˜åº¦å…¼å®¹

2. **BMadçš„æ ¸å¿ƒä»·å€¼** ğŸ¯
   - **Document Sharding**: è§£å†³å¤§å‹æ–‡æ¡£çš„ä¸Šä¸‹æ–‡å´©æºƒï¼ˆ>20k tokenså¿…é¡»åˆ†ç‰‡ï¼‰
   - **devLoadAlwaysFiles**: æ ¸å¿ƒæ¶æ„æ–‡æ¡£å§‹ç»ˆåŠ è½½ï¼Œé¿å…ä¸Šä¸‹æ–‡ä¸¢å¤±
   - **Specification-Driven Design**: OpenAPI + JSON Schema + Gherkinæ ‡å‡†åŒ–å¼€å‘
   - **Helper System**: å¼•ç”¨æ¨¡å¼èŠ‚çœ70-85% tokens

3. **Canvasé¡¹ç›®çš„Gap** âš ï¸
   - ç¼ºå¤±ï¼š`core-config.yaml` (BMadæ ¸å¿ƒé…ç½®)
   - ç¼ºå¤±ï¼š`coding-standards.md`, `tech-stack.md`, `project-structure.md` (devLoadAlwaysFiles)
   - ç¼ºå¤±ï¼šOpenAPIè§„èŒƒå’ŒContract Testing
   - ç¼ºå¤±ï¼šADRï¼ˆæ¶æ„å†³ç­–è®°å½•ï¼‰
   - ç¼ºå¤±ï¼šHelper System

### å®æ–½ä¼˜å…ˆçº§

**é«˜ä¼˜å…ˆçº§**ï¼ˆç«‹å³å®æ–½ï¼Œ1-2å¤©ï¼‰:
1. âœ… åˆ›å»º`Canvas/`ç›®å½•ï¼Œç§»åŠ¨æ–‡ä»¶
2. âœ… åˆ›å»º`.bmad-core/core-config.yaml`
3. âœ… åˆ›å»º`docs/architecture/coding-standards.md`
4. âœ… åˆ›å»º`docs/architecture/tech-stack.md`
5. âœ… åˆ›å»º`docs/architecture/project-structure.md`

**ä¸­ä¼˜å…ˆçº§**ï¼ˆ2å‘¨å†…å®Œæˆï¼‰:
6. âœ… åˆ›å»ºOpenAPIè§„èŒƒ `specs/api/canvas-api.openapi.yml`
7. âœ… åˆ›å»ºJSON Schemas `specs/data/*.schema.json`
8. âœ… åˆ›å»ºGherkinè¡Œä¸ºè§„èŒƒ `specs/behavior/*.feature`
9. âœ… åˆ›å»ºADR `docs/architecture/decisions/`

**ä½ä¼˜å…ˆçº§**ï¼ˆæŒç»­ä¼˜åŒ–ï¼‰:
10. âœ… å®æ–½Contract Testingå·¥å…·é“¾
11. âœ… ä¼˜åŒ–CLAUDE.mdä¸ºæ¨¡å—åŒ–å¼•ç”¨
12. âœ… Document Shardingå¤§å‹æ¶æ„æ–‡æ¡£ï¼ˆå¦‚æœ>20k tokensï¼‰

### æœ€ç»ˆæ–¹æ¡ˆ

**æ¨èï¼šBMad + SDDé›†æˆç‰ˆ**

**ç†ç”±**:
1. âœ… **æœ€å°åŒ–é‡æ„æˆæœ¬**: Canvasé¡¹ç›®å·²ç»95%å…¼å®¹BMad
2. âœ… **è¡Œä¸šæ ‡å‡†**: BMadæ˜¯æˆç†Ÿçš„ã€æœ‰ç¤¾åŒºæ”¯æŒçš„æ–¹æ³•è®º
3. âœ… **å…¨é¢è¦†ç›–**: Document Sharding + OpenAPI + ADR + Contract Testing
4. âœ… **å¯æ‰©å±•æ€§**: BMadçš„æ‰©å±•åŒ…ç³»ç»Ÿæ”¯æŒæœªæ¥åŠŸèƒ½
5. âœ… **å·¥å…·é“¾å®Œå–„**: Schemathesis, Dreddç­‰æˆç†Ÿå·¥å…·

**ä¸æ¨èï¼šä»…OpenAPI + ADRï¼ˆä¹‹å‰çš„æ–¹æ¡ˆAï¼‰**

**ç†ç”±**:
1. âŒ æœªè§£å†³å¤§å‹æ–‡æ¡£çš„ä¸Šä¸‹æ–‡å´©æºƒé—®é¢˜ï¼ˆç¼ºDocument Shardingï¼‰
2. âŒ æœªæä¾›è·¨ä¼šè¯ä¸Šä¸‹æ–‡æŒä¹…åŒ–æ–¹æ¡ˆï¼ˆç¼ºYAML Statusï¼‰
3. âŒ æœªæä¾›Agentåè°ƒçš„æ ‡å‡†åŒ–æµç¨‹ï¼ˆç¼º4-Phase Workflowï¼‰
4. âŒ æœªä¼˜åŒ–tokenä½¿ç”¨ï¼ˆç¼ºHelper Systemï¼‰

---

**æŠ¥å‘Šå®Œæˆï¼** ğŸ‰

è¿™æ˜¯ä¸€ä»½åŸºäº**çœŸå®BMadèµ„æº**ï¼ˆ3ä¸ªGitHubä»“åº“ã€å®˜æ–¹æ–‡æ¡£ã€ç¤¾åŒºæ–‡ç« ï¼‰çš„è°ƒç ”æŠ¥å‘Šã€‚Canvasé¡¹ç›®å·²ç»åœ¨æ— æ„ä¸­å®ç°äº†BMadçš„æ ¸å¿ƒæ¨¡å¼ï¼Œåªéœ€è½»é‡çº§å¢å¼ºå³å¯å®Œå…¨å…¼å®¹BMadæ ‡å‡†ï¼Œäº«å—Document Shardingã€SDDå’ŒHelper Systemå¸¦æ¥çš„å·¨å¤§æ”¶ç›Šã€‚
