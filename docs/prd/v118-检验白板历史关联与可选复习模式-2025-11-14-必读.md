# ⚠️ v1.1.8 检验白板历史关联与可选复习模式 (2025-11-14) **必读**

**核心变更**: 新增检验白板历史关联功能和可选复习模式（全新检验 vs 针对性复习），实现艾宾浩斯"间隔重复+针对性强化"的完整闭环

**关键问题解决**:
1. **检验历史追溯缺失**: 多次检验白板之间无数据关联 → 基于Graphiti存储检验历史，支持跨检验白板数据聚合
2. **智能问题生成缺失**: 无法根据历史薄弱点针对性生成问题 → 新增智能权重算法（70%薄弱点 + 30%已掌握概念）
3. **用户选择权缺失**: 缺少复习模式选择 → 新增"全新检验"和"针对性复习"双模式，支持全局默认+临时覆盖

**新增内容**:
1. **FR3.7 检验历史关联功能**: 完整的检验历史存储、查询、权重计算设计（FR3 新增章节）
2. **FR4扩展**: 从"单次进度追踪"扩展为"单次+多次对比分析"（FR4 Lines 2128-2198扩展）
3. **2个新工具定义** (Section 3):
   - `query_review_history_from_graphiti`: 查询检验历史数据
   - `calculate_targeted_review_weights`: 计算针对性复习权重
4. **Neo4j数据模型扩展**: 新增`ReviewCanvas -[:GENERATED_FROM]-> OriginalCanvas`关系类型
5. **记忆系统调度矩阵更新**: 添加"检验历史记录存储"触发行（Section 3 Line 5207+）
6. **Epic影响**:
   - Epic 12: Story 12.2扩展（记忆系统调度矩阵更新）
   - Epic 14: +3 Stories (14.13检验历史存储 + 14.14权重算法 + 14.15模式选择UI) + 修改14.5/14.6
   - Epic 19: 修改19.2/19.3（多次检验对比分析）(原Epic 15 Stories重编号)

**优先级**: Must Have - P0（艾宾浩斯核心功能缺失，严重影响复习效率）

**实施时间**: +8.5天 (约1.7周) - MVP延长到约11.5-14.5周

**技术决策**:
- **数据存储**: Neo4j/Graphiti（复用现有知识图谱基础设施）
- **复习策略**: 智能权重分配（70%薄弱点 + 30%已掌握概念，可配置）
- **UI交互**: 双层设置（全局默认模式 + 每次可临时覆盖）

**相关文档**: `docs/SPRINT_CHANGE_PROPOSAL_SCP-003_检验白板历史关联增强.md`

---
