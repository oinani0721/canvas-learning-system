---
document_type: "PRD"
version: "1.0.0"
last_modified: "2025-11-19"
status: "approved"
iteration: 1

authors:
  - name: "PM Agent"
    role: "Product Manager"

reviewers:
  - name: "PO Agent"
    role: "Product Owner"
    approved: true

compatible_with:
  architecture: "v1.0"
  api_spec: "v1.0"

changes_from_previous:
  - "Initial PRD with frontmatter metadata"

git:
  commit_sha: ""
  tag: ""

metadata:
  project_name: "Canvas Learning System"
  epic_count: 0
  fr_count: 0
  nfr_count: 0
---

# Canvas学习系统 - 产品需求文档 (PRD)

**项目名称：** Canvas学习系统（基于费曼学习法）
**文档版本：** v1.0
**创建日期：** 2025-01-13
**产品经理：** Claude (PM Agent)
**目标用户：** 单一用户（用户本人）
**开发平台：** Claude Code + Obsidian Canvas

---

## 📋 变更日志

| 版本 | 日期 | 变更内容 | 负责人 |
|------|------|---------|--------|
| v1.0 | 2025-01-13 | 初始版本创建，完成全部5个Epic和45个User Stories | PM Agent |
| v1.0 | 2025-01-13 | 完成Canvas技术验证，确认与JSON Canvas 1.0规范完全兼容 | PM Agent |
| v1.0 | 2025-01-13 | 完成PM检查清单，PRD质量评分97%（优秀） | PM Agent |

---

## 🎯 一、项目目标与背景

### 1.1 项目目标

打造一个基于**费曼学习法**的智能学习系统，通过Obsidian Canvas进行知识可视化，利用Claude Code的Sub-agent架构提供AI辅助，实现**"输出驱动输入"**的深度学习闭环。

**核心价值主张：**
- 强制输出个人理解（黄色节点），暴露理解盲区
- AI评分系统实时反馈学习质量
- 无纸化回顾检验系统验证真实理解
- 多维度补充解释帮助突破难点

### 1.2 目标用户

**用户画像：**
- 单一用户（用户本人）
- 正在学习托福、离散数学、线性代数等学科
- 熟悉Obsidian和Canvas，是高级用户
- 有明确的深度学习需求，追求真正理解而非应试记忆

**用户痛点：**
1. 看似理解实则模糊（"似懂非懂"状态）
2. 缺乏主动输出机制来暴露理解盲区
3. 传统笔记复习效果差，无法验证真实理解
4. 难点材料缺乏多角度解释

### 1.3 成功指标

**学习效果指标：**
- 绿色节点（完全理解）比例达到80%以上
- 检验白板复现率≥70%（能复现原白板70%的内容结构）
- 红色节点（不理解）通过补充解释后转化率≥60%

**系统性能指标：**
- Agent响应时间：基础操作<3秒，复杂操作<10秒
- Canvas更新操作<1秒
- 评分系统准确度：与真实理解水平误差±10分以内

**用户体验指标：**
- 自然语言指令识别准确率≥90%
- 错误恢复成功率100%（通过备份机制）
- 节点智能定位无重叠率≥95%

### 1.4 为什么选择Canvas？

**设计决策：**
1. **高质量可视化**：Canvas提供2D空间布局，直观展现知识结构和层次关系
2. **节点关系表达**：通过连接线清晰展示问题拆解、个人理解、补充解释的关系
3. **颜色驱动状态管理**：5种颜色编码直观表达学习进度和理解状态
4. **Obsidian生态集成**：与现有笔记系统无缝集成，插件丰富
5. **本地数据所有权**：所有数据存储在本地，完全掌控

### 1.5 为什么强制黄色节点输出？

**核心理念：输出是最好的输入**

基于费曼学习法的核心原则：
- **暴露盲区**：只有尝试用自己的语言解释，才能发现理解不足
- **强制思考**：被动阅读→主动输出，深度思考才能发生
- **可评估性**：有了输出才能评分，才能量化学习效果
- **检验基础**：黄色节点是生成检验白板的核心材料

**实施机制：**
- 每个问题节点必须关联一个黄色节点（个人理解区）
- 评分Agent只分析黄色节点内容
- 检验白板从黄色节点提取问题

---

## 📝 二、需求定义

### 2.1 功能需求

#### 2.1.1 核心学习流程（P0 - MVP必须）

**F1. 材料导入与初始化**
- 用户引用Canvas文件和笔记文件
- 系统读取Canvas结构和内容
- 识别现有节点的颜色状态

**F2. 三层次拆解系统**
- **基础拆解**：将难以理解的材料拆解为2-7个基础子问题
- **深度拆解**：对复杂概念进行深层次、结构化拆解
- **问题拆解**：针对"似懂非懂"状态生成检验型问题

**F3. 个人理解输出（黄色节点）**
- 每个问题节点自动关联一个黄色节点
- 用户在黄色节点中填写个人理解
- 黄色节点是所有评估和分析的基础

**F4. 嵌入式评分系统**
- 用户完成个人理解后，系统自动触发评分
- 用户请求进一步操作（拆解/解释）前，自动评分
- 4维度评估：准确性、形象性、完整性、原创性（各25分）
- ≥80分通过→绿色，<80分→保持红色

**F5. 智能建议机制**
- 评分<80分：建议补充解释或澄清路径
- 黄色节点为空：提醒填写个人理解
- 大量紫色节点积累：建议生成检验白板
- **重要**：系统是顾问，用户是决策者

#### 2.1.2 多维度补充解释系统（P1 - MVP必须）

**F6. 六种补充解释方式**

1. **口语化解释（Oral-Explanation）**
   - 800-1200字，如教授讲课风格
   - 分析黄色节点找到理解盲区
   - 生成独立的.md笔记文件

2. **澄清路径（Clarification-Path）**
   - 1500+字，质量优先（可用时10秒）
   - 复刻suq-c.mdc的4步骤流程
   - 最详细的解释方式

3. **对比表（Comparison-Table）**
   - 结构化对比易混淆概念
   - Markdown表格格式

4. **记忆锚点（Memory-Anchor）**
   - 生动的类比、故事、口诀
   - 帮助长期记忆

5. **四层次答案（Four-Level-Answer）**
   - 新手层→进阶层→专家层→创新层
   - 渐进式深入理解

6. **例题教学（Example-Teaching）**
   - 完整的解题教程（约1000字）
   - 包含思路分析和易错提醒

**F7. 解释文件管理**
- 所有解释保存为.md文件
- 命名规范：`[主题]-[解释类型]-[时间戳].md`
- 在Canvas中创建file节点引用

#### 2.1.3 无纸化回顾检验系统（P0 - MVP核心）

**F8. 检验白板生成**
- 从原分析白板提取红色+紫色节点
- 生成问题（突破型、检验型、应用型）
- 主题聚类排列
- 预留黄色节点供用户输出

**F9. 动态学习白板（核心创新）**
- **不是静态问答**：检验白板是可扩展的学习画布
- 用户可以在检验白板上继续：
  - 拆解问题
  - 添加补充解释
  - 添加个人节点
  - 继续评分和迭代
- 目标：检验白板结构逐渐接近原分析白板

**F10. 对比分析**
- 对比原白板和检验白板的结构
- 识别遗漏知识点
- 生成学习差距报告

#### 2.1.4 Canvas操作基础（P0 - 基础设施）

**F11. Canvas JSON读写**
- 读取.canvas文件
- 解析nodes和edges数组
- 构建节点关系图

**F12. 节点操作**
- 创建节点（text/file/group类型）
- 更新节点颜色
- 删除节点
- 智能定位（避免重叠）

**F13. 边操作**
- 创建连接边
- 添加标签（如"拆解自"、"个人理解"）
- 设置连接点位置

**F14. 备份与恢复**
- 每次修改前自动备份
- 保留最近3个版本
- 文件损坏时可恢复

#### 2.1.5 主控与调度（P0 - 核心架构）

**F15. 意图识别**
- 自然语言指令解析
- 识别要调用的Sub-agent
- 支持至少15种指令变体

**F16. Sub-agent调度**
- 使用自然语言调用13个Sub-agent
- 传递上下文数据（JSON格式）
- 接收并处理返回结果

**F17. 上下文管理**
- 按需读取Canvas文件
- 提取相关节点信息
- 构建Agent所需上下文

### 2.2 非功能需求

[详见各Epic文档]

---

## 🎨 三、UI设计目标

[详见各Epic文档]

---

## 🔧 四、技术假设

[详见各Epic文档和架构文档]

---

## 📊 五、Epic与User Stories

本PRD包含**5个Epic**，共**45个User Stories**，覆盖完整的系统功能。

### Epic清单

| Epic编号 | Epic名称 | 优先级 | Story数量 | 文档链接 |
|---------|---------|-------|----------|---------|
| Epic 1 | 基础设施与Sub-agent架构 | P0 | 10个 | [epic-1-core-infrastructure.md](epic-1-core-infrastructure.md) |
| Epic 2 | 核心学习流程 | P0 | 8个 | [epic-2-core-learning.md](epic-2-core-learning.md) |
| Epic 3 | 多维度补充解释系统 | P1 | 12个 | [epic-3-explanation-system.md](epic-3-explanation-system.md) |
| Epic 4 | 无纸化回顾检验系统 | P0 | 8个 | [epic-4-review-verification.md](epic-4-review-verification.md) |
| Epic 5 | 性能优化与用户体验 | P2 | 7个 | [epic-5-optimization.md](epic-5-optimization.md) |

### Epic优先级说明

- **P0（MVP核心）**：必须在第一版实现（Epic 1, 2, 4）
- **P1（MVP必须）**：第一版必须包含，但可以晚于P0（Epic 3）
- **P2（MVP完善）**：第一版必须包含，用于优化体验（Epic 5）

**重要：本系统MVP包含所有P0+P1+P2功能（全部13个Agent和完整功能）**

---

## 🔄 开发工作流

使用BMad-Method开发框架：

```
Analyst ✅ → PM ✅ → Architect ✅ → SM（进行中） → Dev → QA
```

**下一步**：
- Scrum Master（SM）从Epic 1开始生成User Story
- 使用命令：`/BMad-create-next-story`
- Story文件位置：`docs/stories/`

---

**文档版本**: v1.0
**最后更新**: 2025-01-14（架构师整理）
**维护者**: PM Agent, Architect Agent
