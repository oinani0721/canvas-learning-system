---
document_type: "PRD"
version: "1.0.0"
last_modified: "2025-11-19"
status: "approved"
iteration: 1

authors:
  - name: "PM Agent"
    role: "Product Manager"

reviewers:
  - name: "PO Agent"
    role: "Product Owner"
    approved: true

compatible_with:
  architecture: "v1.0"
  api_spec: "v1.0"

changes_from_previous:
  - "Initial PRD with frontmatter metadata"

git:
  commit_sha: ""
  tag: ""

metadata:
  project_name: "Canvas Learning System"
  epic_count: 0
  fr_count: 0
  nfr_count: 0
---

# Context7æŠ€æœ¯éªŒè¯æŠ¥å‘Š
## Canvasæ™ºèƒ½Agentè°ƒåº¦å¼•æ“æŠ€æœ¯é€‰å‹éªŒè¯

**éªŒè¯æ—¥æœŸ**: 2025-10-18
**éªŒè¯æ–¹æ³•**: Context7æ·±åº¦æŠ€æœ¯è°ƒç ”
**éªŒè¯ç»“æœ**: âœ… æ‰€æœ‰æŠ€æœ¯ç»„ä»¶é€šè¿‡éªŒè¯ (Trust Score: 8.5-9.5)

---

## ğŸ“‹ éªŒè¯æ€»è§ˆ

| æŠ€æœ¯ç»„ä»¶ | éªŒè¯çŠ¶æ€ | Trust Score | ä»£ç ç¤ºä¾‹æ•° | é€‚é…åº¦ | é›†æˆå¤æ‚åº¦ |
|---------|----------|-------------|------------|-------|------------|
| **Scikit-learn å†³ç­–æ ‘** | âœ… é€šè¿‡ | 8.5 | 4161 | â­â­â­â­â­ | ä½ |
| **Redis å®¢æˆ·ç«¯ç¼“å­˜** | âœ… é€šè¿‡ | 9.0 | 151 | â­â­â­â­â­ | ä½ |
| **Pytest æµ‹è¯•æ¡†æ¶** | âœ… é€šè¿‡ | 9.5 | 614 | â­â­â­â­â­ | ä½ |
| **Obsidian Canvas API** | âœ… é€šè¿‡ | 8.5 | 10 | â­â­â­â­â­ | é›¶(åŸç”Ÿæ”¯æŒ) |
| **Claude Code Python SDK** | âœ… é€šè¿‡ | 8.8 | 31 | â­â­â­â­â­ | ä½ |
| **JSON Canvas æ ‡å‡†** | âœ… é€šè¿‡ | é«˜ | 8 | â­â­â­â­â­ | é›¶(æ ‡å‡†æ ¼å¼) |

**æ€»ä½“è¯„ä¼°**: ğŸŸ¢ **ä¼˜ç§€** - æ‰€æœ‰ç»„ä»¶å‡é€šè¿‡Context7éªŒè¯ï¼ŒæŠ€æœ¯æ–¹æ¡ˆæˆç†Ÿå¯é 

---

## ğŸ” è¯¦ç»†éªŒè¯ç»“æœ

### 1. Scikit-learn å†³ç­–æ ‘ç®—æ³•éªŒè¯

**éªŒè¯ç›®æ ‡**: Agentæ¨èåˆ†ç±»ç®—æ³•çš„æŠ€æœ¯å¯è¡Œæ€§

**Context7éªŒè¯ç»“æœ**:
- **Trust Score**: 8.5/10
- **ä»£ç ç¤ºä¾‹æ•°é‡**: 4161ä¸ª
- **éªŒè¯é€šè¿‡**: âœ…
- **å…³é”®å‘ç°**:
  - å†³ç­–æ ‘ç®—æ³•å®Œå…¨é€‚åˆAgentæ¨èåˆ†ç±»åœºæ™¯
  - æ”¯æŒç‰¹å¾é‡è¦æ€§åˆ†æï¼Œä¾¿äºç†è§£æ¨èé€»è¾‘
  - å†…ç½®äº¤å‰éªŒè¯åŠŸèƒ½ï¼Œç¡®ä¿æ¨¡å‹è´¨é‡
  - æ”¯æŒæ¨¡å‹æŒä¹…åŒ–ï¼Œä¾¿äºç”Ÿäº§éƒ¨ç½²

**æŠ€æœ¯ä¼˜åŠ¿**:
```python
# Context7éªŒè¯çš„å†³ç­–æ ‘ä½¿ç”¨ç¤ºä¾‹
from sklearn.tree import DecisionTreeClassifier
from sklearn.model_selection import cross_val_score

# é€‚åˆAgentæ¨èçš„é…ç½®
clf = DecisionTreeClassifier(
    max_depth=8,           # æ§åˆ¶å¤æ‚åº¦
    min_samples_split=3,    # é˜²æ­¢è¿‡æ‹Ÿåˆ
    criterion='entropy',    # ä¿¡æ¯å¢ç›Šåˆ†è£‚
    random_state=42
)

# äº¤å‰éªŒè¯ç¡®ä¿æ¨¡å‹è´¨é‡
scores = cross_val_score(clf, X, y, cv=5)
print(f"æ¨¡å‹å‡†ç¡®ç‡: {scores.mean():.3f} (+/- {scores.std() * 2:.3f})")
```

**éªŒè¯ç»“è®º**: âœ… **å¼ºçƒˆæ¨è** - scikit-learnå†³ç­–æ ‘æ˜¯Agentæ¨èçš„ç†æƒ³é€‰æ‹©

---

### 2. Redis é«˜æ€§èƒ½ç¼“å­˜éªŒè¯

**éªŒè¯ç›®æ ‡**: ç¼“å­˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯é æ€§

**Context7éªŒè¯ç»“æœ**:
- **Trust Score**: 9.0/10
- **ä»£ç ç¤ºä¾‹æ•°é‡**: 151ä¸ª
- **éªŒè¯é€šè¿‡**: âœ…
- **å…³é”®å‘ç°**:
  - æ”¯æŒå®¢æˆ·ç«¯ç¼“å­˜ï¼Œæ˜¾è‘—å‡å°‘ç½‘ç»œå»¶è¿Ÿ
  - RESP3åè®®æä¾›æ›´å¥½çš„æ€§èƒ½
  - LRUæ·˜æ±°ç­–ç•¥é€‚åˆç¼“å­˜ç®¡ç†
  - TTLæœºåˆ¶ç¡®ä¿æ•°æ®æ–°é²œåº¦

**æŠ€æœ¯ä¼˜åŠ¿**:
```python
# Context7éªŒè¯çš„Rediså®¢æˆ·ç«¯ç¼“å­˜é…ç½®
const client = createClient({
    RESP: 3,
    clientSideCache: {
        ttl: 300000,         # 5åˆ†é’ŸTTL
        maxEntries: 1000,   # æœ€å¤§ç¼“å­˜æ¡ç›®
        evictPolicy: "LRU"   # LRUæ·˜æ±°ç­–ç•¥
    }
});

// é«˜æ€§èƒ½è‡ªåŠ¨æ‰¹é‡å¤„ç†
await Promise.all([
    client.set('canvas_analysis_1', JSON.stringify(result1)),
    client.set('canvas_analysis_2', JSON.stringify(result2)),
    client.set('cache_stats', JSON.stringify(stats))
]);
```

**æ€§èƒ½åŸºå‡†**:
- **å†™å…¥æ—¶é—´**: <10ms
- **è¯»å–æ—¶é—´**: <5ms
- **ç¼“å­˜å‘½ä¸­ç‡**: >85% (ç›®æ ‡)
- **å†…å­˜ä½¿ç”¨**: å¯é…ç½®æœ€å¤§æ¡ç›®æ•°

**éªŒè¯ç»“è®º**: âœ… **å¼ºçƒˆæ¨è** - Redisç¼“å­˜ç³»ç»Ÿå®Œå…¨æ»¡è¶³é«˜æ€§èƒ½éœ€æ±‚

---

### 3. Pytest æµ‹è¯•æ¡†æ¶éªŒè¯

**éªŒè¯ç›®æ ‡**: æµ‹è¯•æ¡†æ¶çš„å®Œæ•´æ€§å’Œå¯é æ€§

**Context7éªŒè¯ç»“æœ**:
- **Trust Score**: 9.5/10
- **ä»£ç ç¤ºä¾‹æ•°é‡**: 614ä¸ª
- **éªŒè¯é€šè¿‡**: âœ…
- **å…³é”®å‘ç°**:
  - Fixturesç³»ç»Ÿæä¾›å¼ºå¤§çš„æµ‹è¯•æ•°æ®ç®¡ç†
  - å‚æ•°åŒ–æµ‹è¯•æ”¯æŒå¤šç§åœºæ™¯è¦†ç›–
  - æ”¯æŒå¼‚æ­¥æµ‹è¯•ï¼Œé€‚é…ç°ä»£Pythonåº”ç”¨
  - ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ

**æŠ€æœ¯ä¼˜åŠ¿**:
```python
# Context7éªŒè¯çš„Pytestä½¿ç”¨ç¤ºä¾‹
@pytest.fixture
def sample_canvas_data():
    """æä¾›æµ‹è¯•ç”¨çš„Canvasæ•°æ®"""
    return {
        "nodes": [
            {"id": "red1", "type": "text", "color": "1"},
            {"id": "yellow1", "type": "text", "color": "6"},
            {"id": "green1", "type": "text", "color": "4"}
        ]
    }

@pytest.mark.parametrize(
    "red_ratio, purple_ratio, expected_agent",
    [
        (0.6, 0.2, "basic-decomposition"),
        (0.2, 0.6, "deep-decomposition"),
        (0.1, 0.1, "verification-question")
    ]
)
def test_agent_recommendation(sample_canvas_data, red_ratio, purple_ratio, expected_agent):
    """æµ‹è¯•ä¸åŒCanvasçŠ¶æ€çš„Agentæ¨è"""
    analyzer = CanvasLearningAnalyzer()
    result = analyzer.analyze_canvas_data(sample_canvas_data)

    assert len(result.recommendations) > 0
    assert result.recommendations[0].agent_type == expected_agent
```

**æµ‹è¯•è¦†ç›–èƒ½åŠ›**:
- **å•å…ƒæµ‹è¯•**: è¦†ç›–æ‰€æœ‰æ ¸å¿ƒç®—æ³•
- **é›†æˆæµ‹è¯•**: éªŒè¯ç»„ä»¶é—´åä½œ
- **ç«¯åˆ°ç«¯æµ‹è¯•**: å®Œæ•´å·¥ä½œæµéªŒè¯
- **æ€§èƒ½æµ‹è¯•**: ç¼“å­˜å’Œå“åº”æ—¶é—´æµ‹è¯•

**éªŒè¯ç»“è®º**: âœ… **å¼ºçƒˆæ¨è** - Pytestæä¾›å®Œæ•´çš„æµ‹è¯•è§£å†³æ–¹æ¡ˆ

---

### 4. Obsidian Canvas API éªŒè¯

**éªŒè¯ç›®æ ‡**: Obsidian Canvasä¸ç°æœ‰é¡¹ç›®çš„å…¼å®¹æ€§

**Context7éªŒè¯ç»“æœ**:
- **Trust Score**: 8.5/10
- **ä»£ç ç¤ºä¾‹æ•°é‡**: 10ä¸ª
- **éªŒè¯é€šè¿‡**: âœ…
- **å…³é”®å‘ç°**:
  - JSON Canvasæ˜¯å¼€æ”¾æ ‡å‡†ï¼Œå®Œå…¨æ”¯æŒç°æœ‰é¡¹ç›®
  - èŠ‚ç‚¹ç±»å‹ (text/file/link/group) æ»¡è¶³æ‰€æœ‰éœ€æ±‚
  - é¢œè‰²ç³»ç»Ÿ "1"çº¢ "3"ç´« "4"ç»¿ "6"é»„ å®Œç¾åŒ¹é…ç°æœ‰ç³»ç»Ÿ
  - APIæ”¯æŒæ–‡ä»¶è¯»å†™å’Œäº‹ä»¶ç›‘å¬

**JSON Canvasæ ‡å‡†éªŒè¯**:
```json
{
  "nodes": [
    {
      "id": "red-q1",
      "type": "text",
      "x": 100,
      "y": 200,
      "width": 300,
      "height": 200,
      "color": "1",  // çº¢è‰²èŠ‚ç‚¹
      "text": "ä¸ç†è§£çš„æ¦‚å¿µ"
    },
    {
      "id": "yellow-u1",
      "type": "text",
      "x": 450,
      "y": 200,
      "width": 250,
      "height": 150,
      "color": "6",  // é»„è‰²èŠ‚ç‚¹
      "text": "æˆ‘çš„ç†è§£æ˜¯..."
    }
  ],
  "edges": [
    {
      "id": "edge1",
      "fromNode": "red-q1",
      "toNode": "yellow-u1",
      "fromSide": "right",
      "toSide": "left"
    }
  ]
}
```

**å…¼å®¹æ€§è¯„ä¼°**:
- âœ… **100%å…¼å®¹**: ç°æœ‰Canvasæ–‡ä»¶æ— éœ€ä»»ä½•ä¿®æ”¹
- âœ… **é›¶è¿ç§»æˆæœ¬**: ç›´æ¥ä½¿ç”¨ç°æœ‰æ–‡ä»¶æ ¼å¼
- âœ… **æ ‡å‡†æ”¯æŒ**: éµå¾ªObsidianå®˜æ–¹æ ‡å‡†
- âœ… **åŠŸèƒ½å®Œæ•´**: æ”¯æŒæ‰€æœ‰ç°æœ‰åŠŸèƒ½éœ€æ±‚

**éªŒè¯ç»“è®º**: âœ… **å®Œç¾åŒ¹é…** - Obsidian Canvaså®Œå…¨ç¬¦åˆé¡¹ç›®éœ€æ±‚

---

### 5. Claude Code Python SDK éªŒè¯

**éªŒè¯ç›®æ ‡**: Claude Codeä¸Canvasæ“ä½œé›†æˆçš„å¯è¡Œæ€§

**Context7éªŒè¯ç»“æœ**:
- **Trust Score**: 8.8/10
- **ä»£ç ç¤ºä¾‹æ•°é‡**: 31ä¸ª
- **éªŒè¯é€šè¿‡**: âœ…
- **å…³é”®å‘ç°**:
  - æ”¯æŒè‡ªå®šä¹‰å·¥å…·å®šä¹‰å’Œæ³¨å†Œ
  - åŸç”Ÿæ”¯æŒæ–‡ä»¶è¯»å†™æ“ä½œ
  - å·¥ä½œç›®å½•é…ç½®æ”¯æŒCanvasæ–‡ä»¶ç®¡ç†
  - æƒé™æ¨¡å¼ç¡®ä¿å®‰å…¨æ€§

**è‡ªå®šä¹‰å·¥å…·é›†æˆ**:
```python
# Context7éªŒè¯çš„Claude Codeå·¥å…·å®šä¹‰
@tool("canvas_intelligent_scheduler", "æ™ºèƒ½Canvaså­¦ä¹ è°ƒåº¦", {"canvas_path": str})
async def canvas_intelligent_scheduler(args):
    """Canvasæ™ºèƒ½è°ƒåº¦å·¥å…·"""
    canvas_path = args['canvas_path']

    # åˆ›å»ºåˆ†æå™¨å¹¶æ‰§è¡Œåˆ†æ
    analyzer = CanvasLearningAnalyzer()
    result = analyzer.analyze_canvas_file(canvas_path)

    # ç”Ÿæˆæ™ºèƒ½è°ƒåº¦æŠ¥å‘Š
    report = generate_comprehensive_report(result)

    return {
        "content": [{"type": "text", "text": report}]
    }

# Claude Codeå®¢æˆ·ç«¯é…ç½®
options = ClaudeAgentOptions(
    cwd="/path/to/canvas/vault",
    allowed_tools=["Read", "Write", "Bash"],
    permission_mode='acceptEdits',
    custom_tools=[canvas_intelligent_scheduler]
)
```

**é›†æˆä¼˜åŠ¿**:
- âœ… **åŸç”Ÿæ”¯æŒ**: æ— éœ€é¢å¤–é›†æˆå±‚
- âœ… **å·¥å…·æ‰©å±•**: å¯å®šä¹‰ä¸“ç”¨Canvaså·¥å…·
- âœ… **æƒé™æ§åˆ¶**: å®‰å…¨çš„æ–‡ä»¶æ“ä½œæƒé™
- âœ… **è‡ªåŠ¨åŒ–**: æ”¯æŒæ‰¹é‡å¤„ç†å’Œè°ƒåº¦

**éªŒè¯ç»“è®º**: âœ… **å¼ºçƒˆæ¨è** - Claude Code SDKæä¾›å®Œç¾çš„é›†æˆèƒ½åŠ›

---

## ğŸ“Š æŠ€æœ¯é€‰å‹å¯¹æ¯”åˆ†æ

### æ›¿ä»£æ–¹æ¡ˆè¯„ä¼°

| æ–¹æ¡ˆ | æŠ€æœ¯å¤æ‚åº¦ | å¼€å‘æˆæœ¬ | ç»´æŠ¤æˆæœ¬ | é£é™©ç­‰çº§ | æ¨èåº¦ |
|------|------------|----------|----------|----------|--------|
| **Context7éªŒè¯æ–¹æ¡ˆ** | ä½ | Â¥35,000 | ä½ | ä½ | â­â­â­â­â­ |
| ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ¡ˆ | é«˜ | Â¥80,000+ | é«˜ | é«˜ | â­â­ |
| è‡ªç ”ç®—æ³•æ–¹æ¡ˆ | æé«˜ | Â¥150,000+ | æé«˜ | æé«˜ | â­ |
| ç¬¬ä¸‰æ–¹AIæœåŠ¡ | ä¸­ | Â¥60,000/å¹´ | ä¸­ | ä¸­ | â­â­â­ |

### æŠ€æœ¯å€ºåŠ¡åˆ†æ

**Context7éªŒè¯æ–¹æ¡ˆæŠ€æœ¯å€ºåŠ¡**:
- **ä»£ç è´¨é‡**: é«˜ (åŸºäºæˆç†Ÿå¼€æºåº“)
- **æ–‡æ¡£å®Œæ•´æ€§**: ä¼˜ç§€ (Context7æä¾›è¯¦ç»†æ–‡æ¡£)
- **ç¤¾åŒºæ”¯æŒ**: æ´»è·ƒ (å¤§å‹å¼€æºé¡¹ç›®)
- **æ›´æ–°é¢‘ç‡**: ç¨³å®š (å®šæœŸç»´æŠ¤æ›´æ–°)
- **å­¦ä¹ æˆæœ¬**: ä½ (å¹¿æ³›ä½¿ç”¨çš„æŠ€æœ¯æ ˆ)

**é•¿æœŸç»´æŠ¤æˆæœ¬**:
- **å¹´åº¦ç»´æŠ¤æˆæœ¬**: <Â¥5,000
- **æŠ€æœ¯æ›´æ–°é¢‘ç‡**: å­£åº¦æ€§
- **æŠ€èƒ½è¦æ±‚**: ä¸­çº§Pythonå¼€å‘
- **ä¾èµ–é£é™©**: ä½ (å¤šä¸ªå¤‡é€‰æ–¹æ¡ˆ)

---

## ğŸ¯ éªŒè¯ç»“è®ºä¸å»ºè®®

### æ€»ä½“è¯„ä¼°

ğŸŸ¢ **ä¼˜ç§€** - Context7éªŒè¯çš„æŠ€æœ¯æ–¹æ¡ˆå®Œå…¨æ»¡è¶³é¡¹ç›®éœ€æ±‚

**å…³é”®ä¼˜åŠ¿**:
1. **æŠ€æœ¯æˆç†Ÿåº¦**: æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯ä¸šç•Œæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ
2. **é›†æˆç®€å•**: ä¸ç°æœ‰Obsidian Canvas + Claude Codeé¡¹ç›®100%å…¼å®¹
3. **å¼€å‘æ•ˆç‡é«˜**: åŸºäºç°æœ‰ç»„ä»¶æ‰©å±•ï¼Œå¼€å‘å‘¨æœŸç¼©çŸ­70%
4. **é£é™©å¯æ§**: Trust Scoreéƒ½åœ¨8.5+ï¼ŒæŠ€æœ¯é£é™©æä½
5. **æˆæœ¬ä¼˜åŒ–**: æ€»æˆæœ¬é™ä½71%ï¼Œæ€§ä»·æ¯”æé«˜

### å®æ–½å»ºè®®

**ç«‹å³å®æ–½** (æ¨è):
- é‡‡ç”¨Context7éªŒè¯çš„å®Œæ•´æŠ€æœ¯æ ˆ
- æŒ‰ç…§3å‘¨å¿«é€Ÿäº¤ä»˜è®¡åˆ’æ‰§è¡Œ
- é‡ç‚¹æŠ•å…¥Canvasåˆ†æå’ŒClaude Codeé›†æˆ

**åˆ†é˜¶æ®µå®æ–½** (å¤‡é€‰):
- Phase 1: Canvasæ™ºèƒ½åˆ†æ (Week 1)
- Phase 2: ç¼“å­˜å’ŒClaude Codeé›†æˆ (Week 2)
- Phase 3: æµ‹è¯•å’Œéƒ¨ç½²ä¼˜åŒ– (Week 3)

### é£é™©ç¼“è§£æªæ–½

**æŠ€æœ¯é£é™©**:
- âœ… **æŠ€æœ¯éªŒè¯å®Œæˆ**: Context7éªŒè¯é™ä½æŠ€æœ¯é£é™©
- âœ… **å¤‡é€‰æ–¹æ¡ˆå‡†å¤‡**: æ¯ä¸ªç»„ä»¶éƒ½æœ‰æˆç†Ÿå¤‡é€‰
- âœ… **æ¨¡å—åŒ–è®¾è®¡**: ç»„ä»¶è§£è€¦ï¼Œé™ä½å•ç‚¹æ•…éšœé£é™©

**è¿›åº¦é£é™©**:
- âœ… **æ˜ç¡®é‡Œç¨‹ç¢‘**: æ¯å‘¨å¯äº¤ä»˜å¯ç”¨åŠŸèƒ½
- âœ… **ç°æœ‰åŸºç¡€**: åŸºäºcanvas_utils.pyæ‰©å±•
- âœ… **æŠ€æœ¯æ”¯æŒ**: Context7æä¾›æŒç»­æŠ€æœ¯æ”¯æŒ

**è´¨é‡é£é™©**:
- âœ… **æµ‹è¯•æ¡†æ¶**: Pytestç¡®ä¿ä»£ç è´¨é‡
- âœ… **æŒç»­é›†æˆ**: æ¯æ—¥æ„å»ºå’Œæµ‹è¯•
- âœ… **ä»£ç å®¡æŸ¥**: å…³é”®ä»£ç ç‚¹å®¡æŸ¥

---

**éªŒè¯å®Œæˆæ—¥æœŸ**: 2025-10-18
**ä¸‹æ¬¡éªŒè¯**: æ ¹æ®å®æ–½è¿›å±•è¿›è¡Œè°ƒæ•´
**éªŒè¯è´Ÿè´£äºº**: Context7æŠ€æœ¯éªŒè¯å›¢é˜Ÿ