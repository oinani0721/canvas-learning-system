# Story 4.7 - 用户验收测试计划

**Story**: 检验白板上的持续扩展学习
**版本**: v1.0
**测试日期**: 待执行
**测试执行者**: QA Agent

---

## 📋 验收标准（Acceptance Criteria）

本Story的5个验收标准：

1. ✅ **AC1**: 检验白板支持迭代扩展
2. ✅ **AC2**: 用户可以无限次拆解和解释
3. ✅ **AC3**: 节点颜色正常流转
4. ✅ **AC4**: 最终检验白板可以很复杂（接近原白板）
5. ✅ **AC5**: 系统不限制检验白板的扩展

---

## 🧪 测试场景

### 测试场景1：完全遵循文档完成学习循环

**目标**: 验证文档指导的有效性和工作流的可执行性

**对应AC**: AC1, AC2, AC4, AC5

**前置条件**：
- [ ] 有一个初始的检验白板（3-5个检验问题）
- [ ] 测试者已阅读`docs/review-canvas-iterative-workflow.md`文档
- [ ] 测试者已阅读`.claude/PROJECT.md`中的"持续扩展学习循环"章节

**测试步骤**：

1. **第1轮迭代**：
   - [ ] 按文档的"步骤1"填写3个黄色节点（不看任何资料）
   - [ ] 按文档的"步骤5"调用scoring-agent对3个节点评分
   - [ ] 记录评分结果（分数和反馈）
   - [ ] 根据评分，按文档的"何时使用哪个Agent"决策树选择Agent
   - [ ] 对评分低的节点（<60分）调用basic-decomposition拆解
   - [ ] 记录拆解结果（生成了多少个子问题）

2. **第2轮迭代**：
   - [ ] 填写第1轮拆解的子问题的黄色节点
   - [ ] 调用scoring-agent评分
   - [ ] 对似懂非懂的节点（60-79分）调用clarification-path或comparison-table
   - [ ] 记录生成的解释文档（file节点）

3. **第3轮迭代**：
   - [ ] 阅读解释文档后，重新填写对应的黄色节点
   - [ ] 调用scoring-agent重新评分
   - [ ] 观察节点颜色流转（红→紫→绿）
   - [ ] 添加至少1个原创节点（个人理解或补充问题）

4. **统计和观察**：
   - [ ] 记录每轮迭代后的节点数量
   - [ ] 记录每轮迭代后的颜色分布（红、紫、绿数量）
   - [ ] 计算绿色占比
   - [ ] 观察检验白板的"生长"过程

**期望结果**：
- ✅ 测试者能够理解文档的每个步骤
- ✅ 测试者能够独立完成3轮迭代（不需要额外指导）
- ✅ 检验白板节点数量逐轮增加（初始10个 → 迭代后18-25个）
- ✅ 绿色节点占比逐轮提高（0% → 30% → 60% → 80%+）
- ✅ 测试者感觉检验白板"在生长"并逐渐复杂化
- ✅ 测试者能够根据决策树自主选择合适的Agent

**实际结果**：
```
[待QA填写]
- 第1轮迭代后节点数：___个（初始___个）
- 第1轮迭代后绿色数：___个（绿色占比___%）
- 第2轮迭代后节点数：___个
- 第2轮迭代后绿色数：___个（绿色占比___%）
- 第3轮迭代后节点数：___个
- 第3轮迭代后绿色数：___个（绿色占比___%）
- 测试者能否独立完成：[ ] 是 [ ] 否
- 测试者遇到的困难：_______________
```

**通过标准**：
- 节点数量增长至少80%（如10个→18个）
- 最终绿色占比≥60%
- 测试者能够独立完成，无需额外指导

---

### 测试场景2：颜色流转路径验证

**目标**: 验证节点颜色流转是否符合文档描述

**对应AC**: AC3

**前置条件**：
- [ ] 检验白板中有多个问题节点（至少5个）
- [ ] 测试者已阅读文档中的"颜色流转路径"章节

**测试步骤**：

1. **记录初始状态**：
   - [ ] 统计初始颜色分布（红___个、紫___个、绿___个、黄___个）

2. **测试红色→绿色流转**：
   - [ ] 选择1个红色节点
   - [ ] 填写对应的黄色节点（输出高质量理解）
   - [ ] 调用scoring-agent评分
   - [ ] 验证：评分≥80分，红色节点变为绿色
   - [ ] 记录：节点ID___，评分___分，颜色是否变绿：[ ] 是 [ ] 否

3. **测试红色→紫色流转**：
   - [ ] 选择1个红色节点
   - [ ] 填写对应的黄色节点（输出部分理解，不够完整）
   - [ ] 调用scoring-agent评分
   - [ ] 验证：评分60-79分，红色节点变为紫色
   - [ ] 记录：节点ID___，评分___分，颜色是否变紫：[ ] 是 [ ] 否

4. **测试红色保持红色**：
   - [ ] 选择1个红色节点
   - [ ] 填写对应的黄色节点（输出错误或极少理解）
   - [ ] 调用scoring-agent评分
   - [ ] 验证：评分<60分，红色节点保持红色
   - [ ] 记录：节点ID___，评分___分，颜色是否保持红色：[ ] 是 [ ] 否

5. **测试紫色→绿色流转**：
   - [ ] 选择步骤3中的紫色节点
   - [ ] 学习解释文档后，重新填写黄色节点（改进输出）
   - [ ] 调用scoring-agent重新评分
   - [ ] 验证：评分≥80分，紫色节点变为绿色
   - [ ] 记录：节点ID___，评分___分，颜色是否变绿：[ ] 是 [ ] 否

**期望结果**：
- ✅ 红色→绿色流转正常（评分≥80）
- ✅ 红色→紫色流转正常（评分60-79）
- ✅ 红色保持红色（评分<60）
- ✅ 紫色→绿色流转正常（改进后评分≥80）
- ✅ 颜色流转符合文档描述的规则

**实际结果**：
```
[待QA填写]
- 红色→绿色测试：[ ] 通过 [ ] 失败（原因：___）
- 红色→紫色测试：[ ] 通过 [ ] 失败（原因：___）
- 红色保持红色测试：[ ] 通过 [ ] 失败（原因：___）
- 紫色→绿色测试：[ ] 通过 [ ] 失败（原因：___）
- 整体符合文档描述：[ ] 是 [ ] 否
```

**通过标准**：
- 所有4个颜色流转测试通过
- 颜色变化与评分区间完全对应

---

### 测试场景3：检验白板复杂度增长

**目标**: 验证检验白板可以持续扩展并接近原白板复杂度

**对应AC**: AC4, AC5

**前置条件**：
- [ ] 初始检验白板（10-15个节点）
- [ ] 测试者有充足时间进行多轮迭代（60-90分钟）
- [ ] 测试者已阅读文档的"检验白板生长过程"章节

**测试步骤**：

1. **记录初始状态**：
   - [ ] 初始节点数：___个
   - [ ] 初始问题节点数：___个
   - [ ] 初始绿色数：___个（通常为0）

2. **第1轮拆解扩展**：
   - [ ] 对至少2个红色问题调用basic-decomposition拆解
   - [ ] 记录拆解后新增的节点数：___个
   - [ ] 记录拆解后总节点数：___个
   - [ ] 验证：节点数增加≥4个

3. **第2轮解释扩展**：
   - [ ] 对至少2个问题调用解释Agent（oral-explanation或clarification-path）
   - [ ] 记录生成的file节点数：___个
   - [ ] 记录当前总节点数：___个
   - [ ] 验证：file节点数≥2个

4. **第3轮原创扩展**：
   - [ ] 用户手动添加至少2个原创节点（个人理解、补充问题等）
   - [ ] 记录添加的原创节点数：___个
   - [ ] 记录当前总节点数：___个
   - [ ] 验证：原创节点数≥2个

5. **最终统计**：
   - [ ] 最终总节点数：___个
   - [ ] 最终问题节点数：___个
   - [ ] 最终绿色节点数：___个（绿色占比___%）
   - [ ] file节点数：___个
   - [ ] 原创节点数：___个

6. **复杂度对比**（如果有对应的原白板）：
   - [ ] 原白板节点数：___个
   - [ ] 检验白板节点数：___个
   - [ ] 检验白板节点数占原白板的百分比：___%
   - [ ] 判断：是否接近原白板复杂度的50-70%：[ ] 是 [ ] 否

**期望结果**：
- ✅ 节点数量从初始10-15个增长至25-35个（增长150-200%）
- ✅ 节点类型多样化（text节点、file节点、用户自定义）
- ✅ 检验白板结构变复杂（有层次、有连接、有file文档）
- ✅ 如有原白板，检验白板节点数达到原白板的50-70%
- ✅ 测试者感受到白板"在生长"并逐渐接近原白板

**实际结果**：
```
[待QA填写]
- 初始节点数：___个
- 最终节点数：___个（增长率___%）
- file节点数：___个
- 原创节点数：___个
- 绿色占比：___%
- 达到原白板复杂度的___%
- 白板结构是否复杂化：[ ] 是 [ ] 否
- 测试者感受：_______________
```

**通过标准**：
- 节点数量增长≥150%
- file节点数≥2个
- 原创节点数≥2个
- 白板结构有明显的层次和连接

---

### 测试场景4：无限次迭代验证

**目标**: 验证系统不限制检验白板的迭代次数

**对应AC**: AC2, AC5

**前置条件**：
- [ ] 检验白板
- [ ] 测试者有充足时间进行5轮以上迭代

**测试步骤**：

1. **执行5轮迭代**：
   - [ ] 第1轮：拆解3个问题 → 记录节点数___，操作是否成功：[ ] 是 [ ] 否
   - [ ] 第2轮：添加3个解释文档 → 记录节点数___，操作是否成功：[ ] 是 [ ] 否
   - [ ] 第3轮：填写并评分5个黄色节点 → 操作是否成功：[ ] 是 [ ] 否
   - [ ] 第4轮：再次拆解2个问题 → 记录节点数___，操作是否成功：[ ] 是 [ ] 否
   - [ ] 第5轮：添加3个原创节点 → 记录节点数___，操作是否成功：[ ] 是 [ ] 否

2. **验证系统限制**：
   - [ ] 系统是否有迭代次数限制：[ ] 有 [ ] 无
   - [ ] 系统是否有节点数量限制：[ ] 有 [ ] 无
   - [ ] 系统是否有性能下降：[ ] 有 [ ] 无

3. **验证文件大小**：
   - [ ] 检验白板文件大小：___KB
   - [ ] 验证：文件大小<200KB：[ ] 是 [ ] 否

**期望结果**：
- ✅ 可以无限次迭代（至少5轮不受限）
- ✅ 每次迭代都能正常操作（拆解、解释、评分、添加节点）
- ✅ 没有性能下降或错误
- ✅ 文件大小在合理范围（<200KB）

**实际结果**：
```
[待QA填写]
- 完成迭代轮次：___轮
- 是否遇到限制：[ ] 是 [ ] 否（描述：___）
- 是否有性能问题：[ ] 是 [ ] 否（描述：___）
- 最终文件大小：___KB
- 所有操作是否正常：[ ] 是 [ ] 否
```

**通过标准**：
- 完成至少5轮迭代，无限制
- 所有操作正常，无错误
- 文件大小<200KB

---

### 测试场景5：文档指导有效性

**目标**: 验证新用户能够通过文档独立完成学习循环

**对应AC**: AC1-AC5（整体验收）

**前置条件**：
- [ ] 新用户（首次接触检验白板，或模拟新用户状态）
- [ ] 提供文档：`docs/review-canvas-iterative-workflow.md`和`.claude/PROJECT.md`
- [ ] 不提供额外的口头指导

**测试步骤**：

1. **文档阅读**：
   - [ ] 用户阅读`review-canvas-iterative-workflow.md`（记录阅读时间：___分钟）
   - [ ] 用户阅读`.claude/PROJECT.md`中的"持续扩展学习循环"章节
   - [ ] 用户是否理解8步学习循环：[ ] 是 [ ] 否
   - [ ] 用户是否理解何时使用哪个Agent：[ ] 是 [ ] 否

2. **独立操作**：
   - [ ] 用户尝试独立完成1个完整的学习循环（填写→评分→拆解/解释→再评分）
   - [ ] 记录用户遇到的困惑或卡点：_______________
   - [ ] 记录用户能否成功完成：[ ] 是 [ ] 否

3. **决策能力**：
   - [ ] 用户能否根据评分结果自主选择Agent：[ ] 是 [ ] 否
   - [ ] 用户能否判断何时停止迭代：[ ] 是 [ ] 否
   - [ ] 用户能否理解颜色流转的含义：[ ] 是 [ ] 否

4. **用户反馈**：
   - [ ] 用户对文档清晰度的评价（1-5分）：___分
   - [ ] 用户对决策树有效性的评价（1-5分）：___分
   - [ ] 用户对示例帮助度的评价（1-5分）：___分
   - [ ] 用户是否愿意使用检验白板进行学习：[ ] 是 [ ] 否

**期望结果**：
- ✅ 用户能够理解文档（阅读时间<30分钟）
- ✅ 用户能够独立完成至少1个完整的学习循环
- ✅ 用户知道何时做什么（决策清晰）
- ✅ 用户对检验白板的"动态学习白板"理念有清晰认知
- ✅ 用户对文档质量的评价≥4分（满分5分）

**实际结果**：
```
[待QA填写]
- 阅读时间：___分钟
- 能否独立完成：[ ] 是 [ ] 否
- 遇到的困惑：_______________
- 文档清晰度评分：___/5
- 决策树有效性评分：___/5
- 示例帮助度评分：___/5
- 是否愿意使用：[ ] 是 [ ] 否
- 用户总体反馈：_______________
```

**通过标准**：
- 用户能够独立完成学习循环
- 文档评分≥4分
- 用户愿意使用检验白板

---

## 📊 验收标准覆盖矩阵

| AC | 测试场景 | 验证点 |
|----|---------|--------|
| AC1: 检验白板支持迭代扩展 | 场景1, 场景5 | 能够完成多轮迭代 |
| AC2: 用户可以无限次拆解和解释 | 场景1, 场景4 | 至少5轮迭代不受限 |
| AC3: 节点颜色正常流转 | 场景2 | 4种颜色流转路径测试 |
| AC4: 最终检验白板可以很复杂 | 场景1, 场景3 | 节点数增长150%+ |
| AC5: 系统不限制检验白板的扩展 | 场景3, 场景4 | 无限制，无性能问题 |

---

## ✅ 最终验收清单

在所有测试场景完成后，使用此清单进行最终验收：

**文档质量**：
- [ ] `review-canvas-iterative-workflow.md`文档存在且完整
- [ ] `.claude/PROJECT.md`已更新"持续扩展学习循环"章节
- [ ] 文档清晰易懂，无明显错误
- [ ] 8步学习循环描述准确
- [ ] 决策树有效且实用
- [ ] 真实案例（逆否命题）完整且可信
- [ ] 颜色流转路径描述准确

**功能验证**：
- [ ] 检验白板支持迭代扩展（测试场景1通过）
- [ ] 用户可以无限次拆解和解释（测试场景4通过）
- [ ] 节点颜色正常流转（测试场景2通过）
- [ ] 最终检验白板可以很复杂（测试场景3通过）
- [ ] 系统不限制检验白板的扩展（测试场景4通过）

**用户体验**：
- [ ] 新用户能够通过文档独立完成学习循环（测试场景5通过）
- [ ] 文档指导明确，决策清晰
- [ ] 用户对文档质量评价≥4分

**技术验证**（基于Story 4.6的验证结果）：
- [ ] 3层架构支持检验白板的所有操作（已在Story 4.6验证）
- [ ] 所有11个Sub-agent可以操作检验白板（已在Story 4.6验证）

**交付物检查**：
- [ ] `docs/review-canvas-iterative-workflow.md`已创建
- [ ] `.claude/PROJECT.md`已更新
- [ ] `docs/story-4.7-user-acceptance-test.md`（本文档）已创建
- [ ] Story 4.7的Dev Agent Record已更新

---

## 📝 测试执行记录

**测试执行日期**: [待填写]
**测试执行者**: [待填写]
**测试环境**: [待填写]

**测试结果总结**:
```
[待QA填写]
- 场景1（学习循环）：[ ] 通过 [ ] 失败
- 场景2（颜色流转）：[ ] 通过 [ ] 失败
- 场景3（复杂度增长）：[ ] 通过 [ ] 失败
- 场景4（无限迭代）：[ ] 通过 [ ] 失败
- 场景5（文档有效性）：[ ] 通过 [ ] 失败

总体评价：[ ] 全部通过 [ ] 部分通过 [ ] 未通过
```

**缺陷记录**:
```
[待QA填写]
缺陷ID | 严重程度 | 描述 | 状态
-------|---------|------|------
       |         |      |
```

**改进建议**:
```
[待QA填写]
- 文档改进建议：_______________
- 功能改进建议：_______________
- 用户体验改进建议：_______________
```

---

## 🎯 验收决策

基于上述测试结果，Story 4.7的验收决策：

- [ ] ✅ **通过验收** - 所有AC满足，可以发布
- [ ] ⚠️ **有条件通过** - 大部分AC满足，需要小的改进
- [ ] ❌ **不通过** - 关键AC未满足，需要返工

**决策理由**: [待QA填写]

**签署**:
- QA Agent: _____________ 日期: _______
- PO Agent: _____________ 日期: _______

---

**文档版本**: v1.0
**创建日期**: 2025-10-15
**创建者**: Developer Agent (James)
