# Canvas学习系统 - Python依赖
# 项目: Canvas Learning System with AI Agents
# 最后更新: 2025-10-15

# ===========================
# 核心依赖（canvas_utils.py）
# ===========================
# 注：canvas_utils.py主要使用Python标准库，Epic 6开始添加知识图谱依赖

# ===========================
# Story 9.1: Canvas文件监控引擎依赖
# ===========================
watchdog>=3.0.0              # 跨平台文件监控库 (Trust Score: 8.8/10)

# ===========================
# Story 9.3: 三级记忆记录系统依赖
# ===========================
aiosqlite>=0.19.0            # 异步SQLite数据库操作 (Trust Score: 8.9/10)
aiofiles>=23.0.0             # 异步文件操作 (Trust Score: 8.7/10)
cryptography>=41.0.0         # 数据加密库 (Trust Score: 9.1/10)

# ===========================
# Epic 6: 知识图谱依赖 (v2.0 verified)
# ===========================
graphiti-core>=0.3.0        # Graphiti知识图谱库 - 时序图谱服务 (Trust Score: 8.2/10)
                            # 用于DirectGraphitiStorage (不依赖MCP/claude_tools)
neo4j>=5.18.0               # Neo4j Python驱动 (官方包名是neo4j而不是neo4j-driver)
                            # 用于DirectNeo4jStorage和DirectGraphitiStorage
python-dotenv>=1.0.0        # 环境变量管理

# ===========================
# Story 12.2: LanceDB向量数据库依赖
# ===========================
lancedb>=0.25.0             # LanceDB向量数据库 (Trust Score: 8.5/10)
                            # 用于高性能向量检索和多模态支持
                            # 替代ChromaDB作为Layer 2向量存储

# ===========================
# Story 12.1-12.10: Agentic RAG依赖
# ===========================
openai>=1.0.0               # OpenAI API客户端 (Trust Score: 9.5/10)
                            # 用于text-embedding-3-small向量生成
                            # 和GPT-4 Reranking评分
cohere>=5.0.0               # Cohere API客户端 (Trust Score: 8.8/10)
                            # 用于高质量Reranking (可选)

# ===========================
# EPIC-Neo4j-GDS-Integration: Neo4j GDS图算法库 (Story GDS.1)
# ===========================
graphdatascience>=1.9.0    # Neo4j Graph Data Science Python客户端 (Trust Score: 9.0/10)
                            # ✅ Verified from /neo4j/graph-data-science-client
                            # 用于Leiden社区检测、图投影、图算法
                            # 支持艾宾浩斯触发点4薄弱点聚类功能

# ===========================
# Story 12.4: Temporal Memory依赖 (Epic 12)
# ===========================
fsrs>=4.1.0                 # FSRS-4.5算法 - 间隔重复学习调度器 (Trust Score: 8.5/10)
                            # ✅ Verified from PyPI: fsrs (Free Spaced Repetition Scheduler)
                            # 用于TemporalMemory类的学习行为追踪和FSRS遗忘曲线

# ===========================
# Story 12.5: LangGraph StateGraph依赖 (Epic 12)
# ===========================
langgraph>=0.3.10           # LangGraph - Stateful, multi-actor LLM applications (Trust Score: 9.0/10)
                            # ✅ Verified from @langgraph skill
                            # 用于StateGraph构建、并行检索、质量控制循环
langgraph-runtime>=0.1.0    # LangGraph Runtime - Runtime configuration and execution (Trust Score: 9.0/10)
                            # 用于Runtime[CanvasRAGConfig]和context_schema

# ===========================
# Canvas Learning System v2.0 - Enterprise Error Monitoring
# ===========================
loguru>=0.7.0               # 企业级日志记录 (Trust Score: 8.0/10)

# ===========================
# Story 6.5: 知识网络可视化依赖
# ===========================
networkx>=3.0                # 图网络分析（可选，用于图算法）
pyvis>=0.3.0                 # 交互式网络图（备选方案）
bokeh>=2.4.0                 # 交互式可视化（备选方案）

# ===========================
# Story 6.6: 智能检验白板依赖
# ===========================
# 注：主要为数据处理和可视化库，在Story 6.5中已有

# ===========================
# Story 8.8: MCP语义记忆服务依赖
# ===========================
chromadb>=0.4.0              # 向量数据库 (Trust Score: 8.6/10)
psutil>=5.9.0                # 系统信息检测
pyyaml>=6.0                  # YAML配置文件解析
sentence-transformers>=2.2.2  # 语义向量化模型
torch>=2.0.0                   # PyTorch深度学习框架
scikit-learn>=1.3.0         # 机器学习算法
jieba>=0.42.1                 # 中文分词（聚类功能使用）
faiss-cpu>=1.7.4              # 高效向量搜索（可选，用于大规模向量搜索）
redis>=5.0.0                  # 缓存系统（可选，用于推荐缓存）
networkx>=3.0                # 图网络分析（可选，用于图算法）
pyvis>=0.3.0                 # 交互式网络图（备选方案）
bokeh>=2.4.0                 # 交互式可视化（备选方案）

# ===========================
# Canvas Learning System v2.0 - Enterprise Error Monitoring
# ===========================
loguru>=0.7.0               # 企业级日志记录 (Trust Score: 8.0/10)
sentry-sdk>=1.38.0          # 错误追踪和监控集成 (可选)

# ===========================
# Story 6.3: 学习进度追踪依赖
# ===========================
pandas>=2.0.0              # 时间序列数据处理
numpy>=1.24.0               # 数值计算
matplotlib>=3.7.0           # 数据可视化
seaborn>=0.12.0             # 统计图表
plotly>=5.15.0              # 交互式图表
scipy>=1.10.0               # 科学计算和统计分析
scikit-learn>=1.3.0         # 机器学习算法
jieba>=0.42.1                 # 中文分词（聚类功能使用）

# ===========================
# Story 6.4: 智能推荐依赖
# ===========================
scikit-learn>=1.3.0         # 机器学习算法（用于推荐系统）

# ===========================
# Story 6.5: 知识网络可视化依赖
# ===========================
networkx>=3.0                # 图网络分析（可选，用于图算法）
pyvis>=0.3.0                 # 交互式网络图（备选方案）
bokeh>=2.4.0                 # 交互式可视化（备选方案）

# ===========================
# Story 6.6: 智能检验白板依赖
# ===========================
# 注：主要为数据处理和可视化库，在Story 6.4中已有

# ===========================
# Story 8.8: MCP语义记忆服务依赖
# ===========================
chromadb>=0.4.0              # 向量数据库 (Trust Score: 8.6/10)
psutil>=5.9.0                # 系统信息检测
pyyaml>=6.0                  # YAML配置文件解析
sentence-transformers>=2.2.2  # 语义向量化模型
torch>=2.0.0                   # PyTorch深度学习框架
scikit-learn>=1.3.0         # 机器学习算法
jieba>=0.42.1                 # 中文分词（聚类功能使用）
faiss-cpu>=1.7.4              # 高效向量搜索（可选，用于大规模向量搜索）
redis>=5.0.0                  # 缓存系统（可选，用于推荐缓存）
networkx>=3.0                # 图网络分析（可选，用于图算法）
pyvis>=0.3.0                 # 交互式网络图（备选方案）
bokeh>=2.4.0                 # 交互式可视化（备选方案）

# ===========================
# Canvas Learning System v2.0 - Enterprise Error Monitoring
# ===========================
loguru>=0.7.0               # 企业级日志记录 (Trust Score: 8.0/10)
sentry-sdk>=1.38.0          # 错误追踪和监控集成 (可选)

# MCP配置验证和异常处理（新增依赖）
# 无需额外依赖，使用标准库

# 测试框架增强（新增依赖）
# pytest>=7.4.0              # 测试框架
pytest-cov>=4.1.0          # 测试覆盖率
pytest-mock>=3.15.1         # Mock支持（已包含在上面的依赖中）

# 开发和代码质量工具（确保质量）
black>=23.7.0                  # 代码格式化
flake8>=6.1.0                  # 代码检查
mypy>=1.5.0                    # 类型检查

# ===========================
# 安装说明
# 基础安装：
#   pip install -r requirements.txt
#
# 开发环境安装：
#   pip install -r requirements.txt
#
# 运行测试：
#   pytest tests/ -v
#   pytest --cov=.
#
# 代码检查：
#   black .
#   flake8 .
#   mypy .

# 可选工具（用于高级分析）
# ipython>=8.14.0              # 交互式开发
# jupyter>=1.0.0               # Jupyter notebook支持

# 性能监控工具（用于生产环境）
# memory-profiler>=0.60.0           # 内存性能分析
# py-spy>=0.3.13              # CPU性能分析

# ===========================
# Story 6.5: 知识图谱查询和推荐依赖
# ===========================
sentence-transformers>=2.2.2  # 语义向量化模型
transformers>=4.35.0           # 预训练模型
torch>=2.0.0                   # PyTorch深度学习框架
faiss-cpu>=1.7.4              # 高效向量搜索（可选，用于大规模向量搜索）
redis>=5.0.0                  # 缓存系统（可选，用于推荐缓存）

# ===========================
# Story 6.5: 知识网络可视化依赖
# ===========================
# 注意: G6是JavaScript图形可视化库，Python端主要生成数据配置
# 可选的Python可视化工具:
networkx>=3.0                # 图网络分析（可选，用于图算法）
pyvis>=0.3.0                 # 交互式网络图（备选方案）
bokeh>=2.4.0                 # 交互式可视化（备选方案）

# ===========================
# Canvas Learning System v2.0 - Multi-Agent Concurrent Processing
# ===========================
aiomultiprocess>=0.9.0       # 多进程并发执行 (Trust Score: 7.7/10)
uvloop>=0.19.0               # 高性能事件循环 (可选，用于优化)
asyncio                      # 异步编程（Python标准库）
concurrent.futures           # 并发执行（Python标准库）

# ===========================
# Story 10.2.4: IntelligentParallelScheduler依赖
# ===========================
# 注：scikit-learn和numpy已在上方定义（行56, 74）
# scikit-learn>=1.3.0         # TF-IDF向量化和K-Means聚类
# numpy>=1.24.0                # 数值计算

# ===========================
# Story 8.8: MCP语义记忆服务依赖
# ===========================
chromadb>=0.4.0              # 向量数据库 (Trust Score: 8.6/10)
psutil>=5.9.0                # 系统信息检测
pyyaml>=6.0                  # YAML配置文件解析

# ===========================
# 测试框架
# ===========================
pytest>=7.4.0          # 测试框架
pytest-cov>=4.1.0      # 测试覆盖率
pytest-mock>=3.11.1    # Mock支持

# ===========================
# 开发工具
# ===========================
black>=23.7.0          # 代码格式化
flake8>=6.1.0          # 代码检查
mypy>=1.5.0            # 类型检查

# ===========================
# 可选依赖（如果需要）
# ===========================
# ipython>=8.14.0      # 交互式开发
# jupyter>=1.0.0       # Jupyter notebook支持

# ===========================
# Story 6.1: 多模态图片处理依赖 (SCP-006)
# ===========================
Pillow>=10.0.0               # Python Imaging Library (Trust Score: 9.5/10)
                             # 用于图片格式验证、缩略图生成、尺寸调整
                             # 支持: PNG, JPG, GIF, SVG (rasterized)

# ===========================
# Story 6.2: PDF节点类型支持依赖 (SCP-006)
# ===========================
PyMuPDF>=1.24.0              # PDF处理库 (Trust Score: 9.0/10)
                             # 用于PDF解析、首页缩略图生成、元数据提取
                             # 支持: PDF, XPS, EPUB, MOBI等格式

# ===========================
# Story 6.4: 图片OCR与描述生成依赖 (SCP-006)
# ===========================
google-generativeai>=0.8.0   # Gemini API客户端 (Trust Score: 9.5/10)
                             # 用于Gemini 2.0 Flash Vision模型
                             # 支持: OCR、图片描述、LaTeX公式识别

# ===========================
# Story 17.4: Performance Optimization依赖
# ===========================
orjson>=3.9.0                # 高性能JSON解析 (Trust Score: 9.2/10)
                             # 用于Canvas文件读写优化，30% CPU性能提升
structlog>=23.1.0            # 结构化日志 (Trust Score: 8.8/10)
                             # 用于optimization模块的日志记录

# ===========================
# 安装说明
# ===========================
# 基础安装：
#   pip install -r requirements.txt
#
# 开发环境安装：
#   pip install -r requirements.txt
#
# 运行测试：
#   pytest tests/
#   pytest --cov=canvas_utils tests/test_canvas_utils.py
#
# 代码检查：
#   black canvas_utils.py
#   flake8 canvas_utils.py
#   mypy canvas_utils.py
