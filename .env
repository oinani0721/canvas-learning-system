# ═══════════════════════════════════════════════════════════════════════════════
# Canvas Learning System - 环境变量配置
# ═══════════════════════════════════════════════════════════════════════════════
#
# 使用说明:
# 1. 在下方填入您的 API Keys
# 2. 保存文件
# 3. 重启应用程序
#
# ═══════════════════════════════════════════════════════════════════════════════


# ═══════════════════════════════════════════════════════════════════════════════
# [必需] OpenAI API Key
# ═══════════════════════════════════════════════════════════════════════════════
# 用途: LanceDB向量生成、语义重排序评分
# 获取: https://platform.openai.com/api-keys
# 格式: sk-... (以sk-开头)
# 预估成本: ~$5-10/月 (正常使用)

OPENAI_API_KEY=在此填入您的OpenAI_API_Key


# ═══════════════════════════════════════════════════════════════════════════════
# [可选] Neo4j 数据库连接 (用于 Graphiti 知识图谱)
# ═══════════════════════════════════════════════════════════════════════════════
# 用途: 存储学习概念之间的关系网络
# 说明: 如不使用知识图谱功能，可保持默认值或留空
# 安装 Neo4j: https://neo4j.com/download/

NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=在此填入您的Neo4j密码


# ═══════════════════════════════════════════════════════════════════════════════
# [可选] Cohere API Key (用于高质量 Reranking)
# ═══════════════════════════════════════════════════════════════════════════════
# 用途: 提供更高质量的搜索结果重排序
# 获取: https://dashboard.cohere.com/api-keys
# 说明: 如不配置，系统自动使用本地BM25算法（免费但质量稍低）

COHERE_API_KEY=在此填入您的Cohere_API_Key


# ═══════════════════════════════════════════════════════════════════════════════
# 应用程序设置
# ═══════════════════════════════════════════════════════════════════════════════

# 项目名称
PROJECT_NAME="Canvas Learning System API"

# 项目描述
PROJECT_DESCRIPTION="基于费曼学习法的多Agent学习系统"

# 版本
VERSION="1.0.0"

# 调试模式 (True=开发环境, False=生产环境)
DEBUG=True

# 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO


# ═══════════════════════════════════════════════════════════════════════════════
# CORS 跨域设置
# ═══════════════════════════════════════════════════════════════════════════════

# 允许的来源 (JSON数组格式)
CORS_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000","app://obsidian.md"]


# ═══════════════════════════════════════════════════════════════════════════════
# Canvas 文件设置
# ═══════════════════════════════════════════════════════════════════════════════

# Canvas 文件所在目录 (您的 Obsidian 笔记库路径)
CANVAS_BASE_PATH=../笔记库


# ═══════════════════════════════════════════════════════════════════════════════
# API 设置
# ═══════════════════════════════════════════════════════════════════════════════

# API 版本前缀
API_V1_PREFIX=/api/v1

# 最大并发请求数
MAX_CONCURRENT_REQUESTS=100


# ═══════════════════════════════════════════════════════════════════════════════
# Agentic RAG 设置
# ═══════════════════════════════════════════════════════════════════════════════

# 检索批次大小 (每次返回的Top-K结果数)
RETRIEVAL_BATCH_SIZE=10

# 融合策略: rrf (默认), weighted, cascade
FUSION_STRATEGY=rrf

# 重排序策略: local (本地BM25), cohere (API), hybrid_auto (自动选择)
RERANKING_STRATEGY=hybrid_auto

# 质量阈值 (0.7=高质量, 0.5=中等, <0.5=低)
QUALITY_THRESHOLD=0.7

# 最大Query重写次数
MAX_REWRITE_ITERATIONS=2

# Cohere API 月度调用限额
COHERE_MONTHLY_LIMIT=50

# 检索超时时间(秒)
RETRIEVAL_TIMEOUT=10.0

# 是否启用结果缓存
ENABLE_CACHING=True

# 是否启用成本监控
ENABLE_COST_MONITORING=True


# ═══════════════════════════════════════════════════════════════════════════════
# LangSmith 可观测性 (可选)
# ═══════════════════════════════════════════════════════════════════════════════
# 用途: 追踪和调试 LangGraph 工作流
# 获取: https://smith.langchain.com/

LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=在此填入您的LangSmith_API_Key
LANGCHAIN_PROJECT=canvas-learning-system
