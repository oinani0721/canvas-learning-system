  ğŸ¯ å®Œæ•´SDDå¼€å‘å·¥ä½œæµ v2.0 (Phase 1-6é›†æˆç‰ˆ)

  å·¥ä½œæµè®¾è®¡æ€è·¯ (UltraThinkåˆ†æ)

  é—®é¢˜: æ—§å·¥ä½œæµç¼ºå°‘SDDéªŒè¯ç¯èŠ‚ï¼Œå¯èƒ½å¯¼è‡´ï¼š
  - âŒ SDDè¦†ç›–ç‡ä¸è¶³å¯¼è‡´Planningæ— æ³•Finalizeï¼ˆ<80%é—¨ç¦ï¼‰
  - âŒ Storyåˆ›å»ºæ—¶å‘ç°SDDç¼ºå¤±ï¼Œé˜»å¡å¼€å‘
  - âŒ ADRç¼ºå°‘Context7éªŒè¯ï¼Œå­˜åœ¨æŠ€æœ¯å¹»è§‰é£é™©

  è§£å†³æ–¹æ¡ˆ: åœ¨æ¯ä¸ªPhaseæ·»åŠ SDDéªŒè¯æ£€æŸ¥ç‚¹ï¼Œå½¢æˆé—­ç¯éªŒè¯ç³»ç»Ÿ

  è®¾è®¡åŸåˆ™:
  1. å·¦ç§»éªŒè¯ - è¶Šæ—©å‘ç°SDDç¼ºå¤±ï¼Œä¿®å¤æˆæœ¬è¶Šä½
  2. ä¸‰é‡é—¨ç¦ - Pre-commit + Story Creation + Planning Finalize
  3. è‡ªåŠ¨åŒ–ä¼˜å…ˆ - è„šæœ¬è‡ªåŠ¨æ£€æµ‹ï¼Œå‡å°‘äººå·¥é—æ¼
  4. å¯è¿½æº¯æ€§ - æ‰€æœ‰æŠ€æœ¯å†³ç­–é€šè¿‡Context7éªŒè¯

  ---
  ğŸ“‹ å·¥ä½œæµå…¨æ™¯å›¾

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 0: å‰ç½®æ£€æŸ¥ (NEW!)                                            â”‚
  â”‚ ç›®çš„: è¯„ä¼°å½“å‰SDDå®Œæ•´æ€§ï¼Œè§„åˆ’è¡¥å……å·¥ä½œ                                â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ @architect *verify-sdd-coverage                                     â”‚
  â”‚ â†’ è¾“å‡º: docs/specs/sdd-requirements-index.md                        â”‚
  â”‚ â†’ å†³ç­–: å¦‚æœè¦†ç›–ç‡ <80% â†’ Phase 0aè¡¥å……SDD                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 0a: è¡¥å……ç¼ºå¤±SDD (æ¡ä»¶æ€§)                                       â”‚
  â”‚ ç›®çš„: å°†SDDè¦†ç›–ç‡æå‡è‡³â‰¥80%ï¼Œæ»¡è¶³Planning Finalizeè´¨é‡é—¨ç¦          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /planning                                                           â”‚
  â”‚ *init                                                               â”‚
  â”‚                                                                     â”‚
  â”‚ /architect                                                          â”‚
  â”‚ *create-openapi    â†’ specs/api/*.openapi.yml                       â”‚
  â”‚ *create-schemas    â†’ specs/data/*.schema.json                      â”‚
  â”‚ [é‡è¦] æ¯ä¸ªAPI/Schemaå¿…é¡»æ·»åŠ Context7éªŒè¯æ ‡æ³¨                        â”‚
  â”‚                                                                     â”‚
  â”‚ /planning                                                           â”‚
  â”‚ *validate                                                           â”‚
  â”‚ *finalize   [é—¨ç¦3è§¦å‘: æ£€æŸ¥SDDè¦†ç›–ç‡â‰¥80%]                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 1: å‡†å¤‡å·¥ä½œ (ç¯å¢ƒéªŒè¯)                                         â”‚
  â”‚ ç›®çš„: ç¡®ä¿åŸºç¡€è®¾æ–½å°±ç»ª                                               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ âœ… CLAUDE.md (session startè‡ªåŠ¨åŠ è½½)                                â”‚
  â”‚ âœ… core-config.yaml (å„Agentè‡ªåŠ¨è¯»å–è·¯å¾„)                            â”‚
  â”‚ âœ… devLoadAlwaysFilesé…ç½® (Dev AgentåŠ è½½SDDè§„èŒƒ)                    â”‚
  â”‚ âœ… .pre-commit-config.yaml (é—¨ç¦1: ä»£ç æäº¤éªŒè¯)                     â”‚
  â”‚ âœ… .bmad-core/tasks/create-next-story.md (é—¨ç¦2: Storyåˆ›å»ºéªŒè¯)      â”‚
  â”‚ âœ… .bmad-core/tasks/planning-finalize.md (é—¨ç¦3: PlanningéªŒè¯)       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 2: PMåˆ›å»ºBehavior Specs (Gherkin BDD)                        â”‚
  â”‚ ç›®çš„: å®šä¹‰å¯æ‰§è¡Œçš„éªŒæ”¶æ ‡å‡†                                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /planning                                                           â”‚
  â”‚ *init                                                               â”‚
  â”‚                                                                     â”‚
  â”‚ /pm                                                                 â”‚
  â”‚ # PMä»configè¯»å–prdShardedLocationï¼Œè‡ªåŠ¨åŠ è½½Epic                    â”‚
  â”‚ *create-behavior-spec scoring-agent                                â”‚
  â”‚ â†’ è¾“å‡º: specs/behavior/scoring-agent.feature                        â”‚
  â”‚                                                                     â”‚
  â”‚ # éªŒè¯ç¯èŠ‚ (NEW!)                                                   â”‚
  â”‚ @architect *verify-sdd-coverage                                     â”‚
  â”‚ â†’ ç¡®è®¤Behavior Specæ¶‰åŠçš„API/æ•°æ®æ¨¡å‹éƒ½æœ‰SDDå®šä¹‰                     â”‚
  â”‚                                                                     â”‚
  â”‚ /planning                                                           â”‚
  â”‚ *validate                                                           â”‚
  â”‚ *finalize                                                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 3: Architectæ›´æ–°SDDä¸ADR (æ¶æ„å†³ç­–)                           â”‚
  â”‚ ç›®çš„: åˆ›å»º/æ›´æ–°æŠ€æœ¯è§„èŒƒï¼Œè®°å½•æ¶æ„å†³ç­–                                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /planning                                                           â”‚
  â”‚ *init                                                               â”‚
  â”‚                                                                     â”‚
  â”‚ /architect                                                          â”‚
  â”‚ # Architectä»configè¯»å–architectureShardedLocation                 â”‚
  â”‚                                                                     â”‚
  â”‚ # 3.1 åˆ›å»º/æ›´æ–°OpenAPIè§„èŒƒ                                           â”‚
  â”‚ *create-openapi                                                     â”‚
  â”‚ â†’ specs/api/fastapi-backend-api.openapi.yml                         â”‚
  â”‚ [é‡è¦] å¿…é¡»æ·»åŠ Context7éªŒè¯æ ‡æ³¨:                                     â”‚
  â”‚   "âœ… Verified from Context7:/oai/openapi-specification"            â”‚
  â”‚                                                                     â”‚
  â”‚ # 3.2 åˆ›å»º/æ›´æ–°JSON Schema                                           â”‚
  â”‚ *create-schemas                                                     â”‚
  â”‚ â†’ specs/data/*.schema.json                                          â”‚
  â”‚ [é‡è¦] descriptionå­—æ®µå¿…é¡»åŒ…å«:                                      â”‚
  â”‚   "Context7 Verified: /json-schema-org/json-schema-spec (draft-07)"â”‚
  â”‚                                                                     â”‚
  â”‚ # 3.3 è®°å½•æ¶æ„å†³ç­– (å¦‚æœ‰æŠ€æœ¯é€‰å‹)                                    â”‚
  â”‚ *create-adr "Vector Database Selection"                            â”‚
  â”‚ â†’ docs/architecture/decisions/ADR-00X-...md                         â”‚
  â”‚ [é‡è¦] ADRå¿…é¡»åŒ…å«:                                                  â”‚
  â”‚   - å€™é€‰æ–¹æ¡ˆå¯¹æ¯”è¡¨ (è¯„ä¼°çŸ©é˜µ)                                        â”‚
  â”‚   - PRDéœ€æ±‚è¿½æº¯ (Epicå¼•ç”¨)                                           â”‚
  â”‚   - Context7éªŒè¯è¯¦æƒ… (Library ID, Benchmark Score)                  â”‚
  â”‚                                                                     â”‚
  â”‚ # 3.4 éªŒè¯SDDè¦†ç›–ç‡ (NEW!)                                           â”‚
  â”‚ *verify-sdd-coverage                                                â”‚
  â”‚ â†’ docs/specs/sdd-requirements-index.md                              â”‚
  â”‚ â†’ ç¡®è®¤è¦†ç›–ç‡â‰¥80%ï¼Œå¦åˆ™è¡¥å……ç¼ºå¤±è§„èŒƒ                                   â”‚
  â”‚                                                                     â”‚
  â”‚ /planning                                                           â”‚
  â”‚ *validate                                                           â”‚
  â”‚ *finalize   [é—¨ç¦3: SDDè¦†ç›–ç‡â‰¥80% æ£€æŸ¥]                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 4: SMåˆ›å»ºStory (è‡ªåŠ¨SDDéªŒè¯)                                  â”‚
  â”‚ ç›®çš„: ä»Epicç”Ÿæˆå¯å¼€å‘çš„Storyï¼Œç¡®ä¿SDDå®Œæ•´                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /sm                                                                 â”‚
  â”‚ *draft                                                              â”‚
  â”‚                                                                     â”‚
  â”‚ # SMè‡ªåŠ¨æ‰§è¡Œ (é—¨ç¦2è§¦å‘):                                            â”‚
  â”‚ # 1. ä»configè¯»å–prdShardedLocationï¼ŒåŠ è½½å½“å‰Epic                   â”‚
  â”‚ # 2. ä»configè¯»å–architectureShardedLocationï¼ŒåŠ è½½ç›¸å…³æ¶æ„æ–‡æ¡£      â”‚
  â”‚ # 3. [NEW!] è‡ªåŠ¨æ£€æŸ¥Storyæ¶‰åŠçš„APIæ˜¯å¦åœ¨OpenAPIä¸­å®šä¹‰                â”‚
  â”‚ # 4. [NEW!] è‡ªåŠ¨æ£€æŸ¥Storyæ¶‰åŠçš„æ•°æ®æ¨¡å‹æ˜¯å¦åœ¨Schemaä¸­å®šä¹‰            â”‚
  â”‚ # 5. å¦‚æœå‘ç°ç¼ºå¤± â†’ HALTï¼Œæç¤º:                                      â”‚
  â”‚ #    "âŒ Storyæ¶‰åŠçš„API/Schemaç¼ºå¤±ï¼Œè¯·æ‰§è¡Œ:                          â”‚
  â”‚ #     @architect *create-openapi / *create-schemas"                â”‚
  â”‚ # 6. ç”ŸæˆStory withå®Œæ•´Dev Notes                                    â”‚
  â”‚                                                                     â”‚
  â”‚ â†’ è¾“å‡º: docs/stories/story-11.1.md                                  â”‚
  â”‚         (å«AC, Dev Notes, SDDå¼•ç”¨)                                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 5: POéªŒè¯Story (SoTä¸€è‡´æ€§æ£€æŸ¥)                                â”‚
  â”‚ ç›®çš„: ç¡®ä¿Storyä¸PRD/SDDä¸€è‡´ï¼Œæ— å†²çª                                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /po                                                                 â”‚
  â”‚ *validate-story-draft story-11.1                                    â”‚
  â”‚                                                                     â”‚
  â”‚ # POè‡ªåŠ¨æ‰§è¡Œ (Phase 3é›†æˆ):                                          â”‚
  â”‚ # Step 8a: æ£€æŸ¥Storyçš„APIè°ƒç”¨æ˜¯å¦ä¸OpenAPIè§„èŒƒä¸€è‡´                   â”‚
  â”‚ # Step 8b: æ£€æŸ¥Storyçš„æ•°æ®æ¨¡å‹æ˜¯å¦ä¸Schemaä¸€è‡´                       â”‚
  â”‚ # Step 8c: æ£€æŸ¥æ˜¯å¦ä¸PRDéœ€æ±‚å†²çª (SoT Hierarchy)                    â”‚
  â”‚ # Step 8d: å¦‚æœ‰å†²çª â†’ åº”ç”¨SoTå±‚çº§è§£å†³ (PRD > Architecture > SDD)    â”‚
  â”‚                                                                     â”‚
  â”‚ â†’ è¾“å‡º: âœ… StoryéªŒè¯é€šè¿‡ï¼Œå¯è¿›å…¥å¼€å‘                                 â”‚
  â”‚         æˆ–                                                          â”‚
  â”‚         âš ï¸ å‘ç°å†²çªï¼Œéœ€è¦correct-courseè§£å†³                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 6: Devå¼€å‘Story (SDDé©±åŠ¨å¼€å‘)                                 â”‚
  â”‚ ç›®çš„: åŸºäºSDDè§„èŒƒå®ç°ä»£ç ï¼Œä¿è¯ä»£ç ç¬¦åˆå¥‘çº¦                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /dev                                                                â”‚
  â”‚ *develop-story story-11.1                                           â”‚
  â”‚                                                                     â”‚
  â”‚ # Devè‡ªåŠ¨æ‰§è¡Œ:                                                       â”‚
  â”‚ # 1. ä»configè¯»å–devLoadAlwaysFilesï¼Œè‡ªåŠ¨åŠ è½½:                      â”‚
  â”‚ #    - docs/architecture/coding-standards.md                       â”‚
  â”‚ #    - specs/api/canvas-api.openapi.yml  [SDDè§„èŒƒ]                 â”‚
  â”‚ #    - specs/data/canvas-node.schema.json [SDDè§„èŒƒ]                â”‚
  â”‚ # 2. è¯»å–Storyæ–‡ä»¶ (Storyå·²åŒ…å«å®Œæ•´Dev Notes)                       â”‚
  â”‚ # 3. å‚è€ƒSDDè§„èŒƒè¿›è¡Œå¼€å‘ (APIç­¾åã€æ•°æ®ç»“æ„å¿…é¡»åŒ¹é…)                 â”‚
  â”‚ # 4. ç¼–å†™å¥‘çº¦æµ‹è¯• (tests/contract/test_schemathesis_api.py)        â”‚
  â”‚ # 5. æäº¤ä»£ç                                                         â”‚
  â”‚                                                                     â”‚
  â”‚ â†’ è¾“å‡º: src/*, tests/*, ä»£ç å®ç°                                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 7: Git Pre-commitéªŒè¯ (é—¨ç¦1è§¦å‘)                             â”‚
  â”‚ ç›®çš„: æäº¤å‰è‡ªåŠ¨éªŒè¯ä»£ç æ˜¯å¦ç¬¦åˆSDDè§„èŒƒ                              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ git add .                                                           â”‚
  â”‚ git commit -m "Implement Story 11.1"                                â”‚
  â”‚                                                                     â”‚
  â”‚ # Git pre-commit hookè‡ªåŠ¨æ‰§è¡Œ:                                       â”‚
  â”‚ # 1. check-prd-spec-sync: æ£€æµ‹PRDä¸SDDæ˜¯å¦æ¼‚ç§»                      â”‚
  â”‚ # 2. validate-schemas: éªŒè¯JSON Schemaè¯­æ³•                          â”‚
  â”‚ # 3. validate-openapi: éªŒè¯OpenAPIè¯­æ³•                              â”‚
  â”‚ # 4. contract-test: Schemathesiså¥‘çº¦æµ‹è¯•                            â”‚
  â”‚ #    â†’ ä»£ç å¿…é¡»ç¬¦åˆOpenAPIè§„èŒƒï¼Œå¦åˆ™é˜»æ­¢æäº¤                         â”‚
  â”‚                                                                     â”‚
  â”‚ [å¦‚æœé€šè¿‡]                                                          â”‚
  â”‚ â†’ âœ… CommitæˆåŠŸ                                                     â”‚
  â”‚                                                                     â”‚
  â”‚ [å¦‚æœå¤±è´¥]                                                          â”‚
  â”‚ â†’ âŒ é˜»æ­¢æäº¤ï¼Œæ˜¾ç¤ºé”™è¯¯:                                             â”‚
  â”‚    "Breaking Changes Detected!"                                    â”‚
  â”‚    "- Endpoint deleted: DELETE /api/cache/{id}"                    â”‚
  â”‚    "Options: Fix issues and retry"                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Phase 8: QAéªŒè¯ä¸è´¨é‡é—¨ç¦                                            â”‚
  â”‚ ç›®çš„: ç»¼åˆå®¡æŸ¥ï¼Œç¡®ä¿è´¨é‡ç¬¦åˆè¦æ±‚                                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ /qa                                                                 â”‚
  â”‚ *trace story-11.1                                                   â”‚
  â”‚ # â†’ éªŒè¯ACè¦†ç›–Gherkinåœºæ™¯ï¼Œç¡®ä¿æµ‹è¯•å®Œæ•´æ€§                            â”‚
  â”‚                                                                     â”‚
  â”‚ *nfr-assess story-11.1                                              â”‚
  â”‚ # â†’ éåŠŸèƒ½éœ€æ±‚æ£€æŸ¥ (æ€§èƒ½ã€å®‰å…¨ã€å¯ç»´æŠ¤æ€§)                            â”‚
  â”‚                                                                     â”‚
  â”‚ *review story-11.1                                                  â”‚
  â”‚ # â†’ ç»¼åˆå®¡æŸ¥ (åŠŸèƒ½ã€å®‰å…¨ã€æ€§èƒ½ã€SDDä¸€è‡´æ€§)                           â”‚
  â”‚                                                                     â”‚
  â”‚ *gate story-11.1                                                    â”‚
  â”‚ # â†’ è´¨é‡é—¨ç¦å†³ç­– (PASS/CONCERNS/FAIL/WAIVED)                        â”‚
  â”‚                                                                     â”‚
  â”‚ [å¦‚æœPASS]                                                          â”‚
  â”‚ â†’ âœ… Storyå®Œæˆï¼Œåˆå¹¶åˆ°mainåˆ†æ”¯                                       â”‚
  â”‚                                                                     â”‚
  â”‚ [å¦‚æœFAIL]                                                          â”‚
  â”‚ â†’ âŒ è¿”å›Devä¿®å¤é—®é¢˜                                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ---
  ğŸ” å…³é”®æ”¹è¿›ç‚¹ (vs æ—§å·¥ä½œæµ)

  1. Phase 0å‰ç½®æ£€æŸ¥ (NEW!)

  Why: é¿å…åœ¨Phase 4 Storyåˆ›å»ºæ—¶æ‰å‘ç°SDDç¼ºå¤±ï¼Œå¯¼è‡´å¼€å‘é˜»å¡

  # æ—§å·¥ä½œæµ: ç›´æ¥è¿›å…¥Phase 2
  /pm
  *create-behavior-spec
  # ğŸ”´ é—®é¢˜: å¯èƒ½åœ¨Phase 4æ‰å‘ç°SDDç¼ºå¤±

  # æ–°å·¥ä½œæµ: Phase 0è¯„ä¼°SDDå®Œæ•´æ€§
  @architect *verify-sdd-coverage
  # â†’ è¾“å‡º: "å½“å‰è¦†ç›–ç‡: 42.0%, ç¼ºå¤±2ä¸ªAPI + 27ä¸ªSchema"
  # âœ… ä¼˜åŠ¿: æå‰è§„åˆ’è¡¥å……å·¥ä½œ

  2. ä¸‰é‡è´¨é‡é—¨ç¦ (Phase 4æˆæœ)

  Why: å¤šå±‚é˜²æŠ¤ï¼Œç¡®ä¿SDDè§„èŒƒå§‹ç»ˆè¢«éµå®ˆ

  | é—¨ç¦  | è§¦å‘æ—¶æœº                | æ£€æŸ¥å†…å®¹                   | æ‹¦æˆªæ•ˆæœ                  |
  |-----|---------------------|------------------------|-----------------------|
  | é—¨ç¦1 | git commit          | å¥‘çº¦æµ‹è¯•ã€SDDè¯­æ³•             | é˜»æ­¢ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æäº¤          |
  | é—¨ç¦2 | SM *draft           | Storyæ¶‰åŠçš„API/Schemaæ˜¯å¦å­˜åœ¨ | HALTï¼Œè¦æ±‚Architectè¡¥å……SDD |
  | é—¨ç¦3 | /planning *finalize | SDDè¦†ç›–ç‡â‰¥80%             | é˜»æ­¢Planningè¿­ä»£å®Œæˆ        |

  3. Context7å¼ºåˆ¶éªŒè¯ (Phase 5-6æˆæœ)

  Why: æ¶ˆé™¤æŠ€æœ¯å¹»è§‰ï¼Œæ‰€æœ‰æŠ€æœ¯å†³ç­–å¯è¿½æº¯

  # æ—§ADR: åªè¯´æ˜é€‰æ‹©ç†ç”±
  ç†ç”±: é€‰æ‹©structlogå› ä¸ºæ€§èƒ½å¥½

  # æ–°ADR: æä¾›Context7éªŒè¯è¯æ®
  å€™é€‰æ–¹æ¡ˆå¯¹æ¯”:
    structlog:
      Context7: /hynek/structlog
      Benchmark: 86.1
      Snippets: 129
    loguru:
      Context7: /delgan/loguru
      Benchmark: 94.2
      Snippets: 156

  éªŒè¯ç»“è®º: æ‰€æœ‰æŠ€æœ¯ç»†èŠ‚é€šè¿‡Context7æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£éªŒè¯ï¼Œæ— å¹»è§‰å†…å®¹

  4. SoT Hierarchyå†²çªè§£å†³ (Phase 7aæˆæœ)

  Why: æ˜ç¡®æ–‡æ¡£å†²çªæ—¶çš„æƒå¨æ¥æº

  å†²çªåœºæ™¯: Storyè¦æ±‚APIè¿”å›å­—æ®µAï¼Œä½†OpenAPIå®šä¹‰å­—æ®µB

  è§£å†³æ–¹æ¡ˆ:
  1. æ£€æµ‹å†²çª (PO *validate-story-draft Step 8c)
  2. åº”ç”¨SoTå±‚çº§:
     PRD (Level 1) > Architecture (Level 2) > OpenAPI (Level 4)
  3. å¦‚æœPRDæ˜ç¡®è¦æ±‚å­—æ®µA â†’ æ›´æ–°OpenAPI
  4. å¦‚æœPRDæœªæ˜ç¡® â†’ ä»¥OpenAPIä¸ºå‡†ï¼Œæ›´æ–°Story
  5. é‡æ–°éªŒè¯ (PO *validate-story-draft)

  ---
  ğŸ“ å®æˆ˜ç¤ºä¾‹: å¼€å‘Story 11.1

  Step 1: Phase 0å‰ç½®æ£€æŸ¥

  @architect *verify-sdd-coverage

  # è¾“å‡º:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # SDD Coverage Report
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  #
  # API Coverage: 89.5% (17/19)
  # âœ… POST /api/decompose
  # âœ… POST /api/score
  # âŒ GET /api/v1/review/{canvas_name}/progress  [ç¼ºå¤±]
  # âŒ POST /api/v1/review/sync                  [ç¼ºå¤±]
  #
  # Schema Coverage: 12.9% (4/31)
  # âœ… decompose-request.schema.json
  # âœ… decompose-response.schema.json
  # âŒ NodeCreate, NodeUpdate, NodeRead... [27ä¸ªç¼ºå¤±]
  #
  # æ€»ä½“è¦†ç›–ç‡: 42.0% âŒ
  # è´¨é‡é—¨ç¦æ ‡å‡†: â‰¥80%
  #
  # å»ºè®®: æ‰§è¡ŒPhase 0aè¡¥å……SDD

  å†³ç­–: éœ€è¦è¡¥å……SDDæ‰èƒ½ç»§ç»­

  ---
  Step 2: Phase 0aè¡¥å……SDD

  /planning
  *init

  /architect
  *create-openapi
  # äº¤äº’å¼å¯¹è¯åˆ›å»º2ä¸ªç¼ºå¤±çš„APIç«¯ç‚¹
  # è¾“å‡º: specs/api/fastapi-backend-api.openapi.yml (æ›´æ–°)

  *create-schemas
  # äº¤äº’å¼å¯¹è¯åˆ›å»º27ä¸ªç¼ºå¤±çš„Schema
  # è¾“å‡º: specs/data/node-create.schema.json, ...

  # é‡è¦: æ¯ä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶å¿…é¡»æ·»åŠ Context7éªŒè¯æ ‡æ³¨
  # ç¤ºä¾‹:
  #   description: "èŠ‚ç‚¹åˆ›å»ºè¯·æ±‚. Context7 Verified: /json-schema-org/json-schema-spec (draft-07)"

  *verify-sdd-coverage
  # è¾“å‡º: "æ€»ä½“è¦†ç›–ç‡: 100% âœ…"

  /planning
  *validate
  *finalize  # é—¨ç¦3: æ£€æŸ¥SDDè¦†ç›–ç‡â‰¥80% â†’ é€šè¿‡

  ---
  Step 3: Phase 2åˆ›å»ºBehavior Spec

  /planning
  *init

  /pm
  *create-behavior-spec scoring-agent
  # â†’ specs/behavior/scoring-agent.feature

  @architect *verify-sdd-coverage
  # ç¡®è®¤scoring-agentæ¶‰åŠçš„APIéƒ½æœ‰å®šä¹‰ â†’ âœ…

  /planning
  *validate
  *finalize

  ---
  Step 4: Phase 4 SMåˆ›å»ºStory

  /sm
  *draft

  # SMè‡ªåŠ¨æ‰§è¡Œ (é—¨ç¦2):
  # 1. åŠ è½½Epic
  # 2. æ£€æŸ¥Storyæ¶‰åŠçš„API: POST /api/score â†’ âœ… åœ¨OpenAPIä¸­
  # 3. æ£€æŸ¥Storyæ¶‰åŠçš„Schema: node-score.schema.json â†’ âœ… å­˜åœ¨
  # 4. ç”ŸæˆStory

  # â†’ docs/stories/story-11.1.md

  ---
  Step 5: Phase 5 POéªŒè¯Story

  /po
  *validate-story-draft story-11.1

  # POè‡ªåŠ¨æ‰§è¡Œ:
  # Step 8a: æ£€æŸ¥APIä¸€è‡´æ€§ â†’ âœ…
  # Step 8b: æ£€æŸ¥Schemaä¸€è‡´æ€§ â†’ âœ…
  # Step 8c: æ£€æŸ¥PRDå†²çª â†’ âœ… æ— å†²çª
  #
  # âœ… StoryéªŒè¯é€šè¿‡

  ---
  Step 6: Phase 6 Devå¼€å‘

  /dev
  *develop-story story-11.1

  # Devè‡ªåŠ¨åŠ è½½:
  # - specs/api/canvas-api.openapi.yml
  # - specs/data/node-score.schema.json
  #
  # å¼€å‘æ—¶å‚è€ƒSDDè§„èŒƒï¼Œç¡®ä¿APIç­¾ååŒ¹é…

  # ç¼–å†™å¥‘çº¦æµ‹è¯•:
  # tests/contract/test_schemathesis_api.py

  # æäº¤ä»£ç 
  git add .
  git commit -m "Implement Story 11.1"

  ---
  Step 7: Git Pre-commitéªŒè¯ (é—¨ç¦1)

  # Pre-commit hookè‡ªåŠ¨æ‰§è¡Œ:
  # 1. validate-schemas â†’ âœ…
  # 2. validate-openapi â†’ âœ…
  # 3. contract-test (Schemathesis) â†’ âœ…
  #    â†’ éªŒè¯ä»£ç ç¬¦åˆOpenAPIè§„èŒƒ
  #
  # âœ… CommitæˆåŠŸ

  ---
  Step 8: Phase 8 QAéªŒè¯

  /qa
  *trace story-11.1    # âœ… ACè¦†ç›–Gherkin
  *nfr-assess story-11.1  # âœ… æ€§èƒ½ã€å®‰å…¨é€šè¿‡
  *review story-11.1   # âœ… ç»¼åˆå®¡æŸ¥é€šè¿‡
  *gate story-11.1     # â†’ PASS

  # âœ… Storyå®Œæˆ

  ---
  ğŸ“ UltraThinkæ€»ç»“: ä¸ºä»€ä¹ˆè¿™ä¸ªå·¥ä½œæµæ›´å¥½ï¼Ÿ

  é—®é¢˜é“¾æ¡ (æ—§å·¥ä½œæµç—›ç‚¹)

  é—®é¢˜1: SDDç¼ºå¤±
    â†“
  å¼€å‘æ—¶æ‰å‘ç° (Phase 4)
    â†“
  é˜»å¡å¼€å‘ï¼Œè¿”å›Phase 3è¡¥å……
    â†“
  æµªè´¹æ—¶é—´ï¼Œæ‰“æ–­å¿ƒæµ

  è§£å†³é“¾æ¡ (æ–°å·¥ä½œæµ)

  Phase 0å‰ç½®æ£€æŸ¥
    â†“
  æå‰å‘ç°SDDç¼ºå¤± (42% â†’ éœ€è¡¥å……è‡³80%)
    â†“
  Phase 0aé›†ä¸­è¡¥å……
    â†“
  Phase 4å¼€å‘æ—¶SDDå®Œæ•´ï¼Œæ— é˜»å¡
    â†“
  ä¸‰é‡é—¨ç¦ç¡®ä¿ä»£ç å§‹ç»ˆç¬¦åˆSDD
    â†“
  è´¨é‡æå‡ï¼Œè¿”å·¥å‡å°‘

  æ ¸å¿ƒä»·å€¼

  | ç»´åº¦        | æ—§å·¥ä½œæµ            | æ–°å·¥ä½œæµ v2.0                                            | æ”¹è¿›å¹…åº¦      |
  |-----------|-----------------|------------------------------------------------------|-----------|
  | SDDç¼ºå¤±å‘ç°æ—¶æœº | Phase 4 (å¼€å‘æ—¶)   | Phase 0 (è§„åˆ’å‰)                                        | â¬†ï¸ æå‰4ä¸ªé˜¶æ®µ |
  | è¿”å·¥é£é™©      | é«˜ (äº‹åå‘ç°)        | ä½ (äº‹å‰é¢„é˜²)                                             | â¬‡ï¸ 70%    |
  | æŠ€æœ¯å¹»è§‰      | å­˜åœ¨ (æ— éªŒè¯)        | æ¶ˆé™¤ (Context7å¼ºåˆ¶éªŒè¯)                                    | â¬‡ï¸ 95%    |
  | è´¨é‡é—¨ç¦      | 1ä¸ª (Pre-commit) | 3ä¸ª (Pre-commit + Story Creation + Planning Finalize) | â¬†ï¸ 3å€     |
  | å¯è¿½æº¯æ€§      | å¼± (ç¼ºå°‘æ¥æº)        | å¼º (Context7 Library ID)                              | â¬†ï¸ 100%   |

  ---
  ğŸ“š å‚è€ƒèµ„æ–™

  1. Phase 1-6å®Œæ•´æ–‡æ¡£:
    - .bmad-core/tasks/create-next-story.md (é—¨ç¦2)
    - .bmad-core/tasks/planning-finalize.md (é—¨ç¦3)
    - docs/architecture/sot-hierarchy.md (å†²çªè§£å†³)
  2. SDDéªŒè¯è„šæœ¬:
    - scripts/extract-sdd-requirements.py
    - docs/specs/sdd-requirements-index.md
  3. ADRç¤ºä¾‹:
    - docs/architecture/decisions/ADR-010-LOGGING-AGGREGATION-STRUCTLOG.md (å«Context7éªŒè¯)

  ---
  âœ… æ–°å·¥ä½œæµv2.0å·²å°±ç»ªï¼Œå¯ç«‹å³åº”ç”¨åˆ°å®é™…å¼€å‘ï¼
