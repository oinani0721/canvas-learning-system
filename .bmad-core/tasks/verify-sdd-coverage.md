# Verify SDD Coverage Task

**Purpose**: æ£€æŸ¥SDDè§„èŒƒè¦†ç›–ç‡ï¼Œè¯†åˆ«ç¼ºå¤±çš„OpenAPIç«¯ç‚¹å’ŒJSON Schema
**Output**: è¦†ç›–ç‡æŠ¥å‘Šå’Œç¼ºå¤±é¡¹æ¸…å•

---

## æ‰§è¡Œæ­¥éª¤

### Step 1: è¿è¡ŒSDDéœ€æ±‚æå–è„šæœ¬

**è‡ªåŠ¨åŒ–æå–**:
```bash
python scripts/extract-sdd-requirements.py
```

**è¾“å‡º**: `docs/specs/sdd-requirements-index.md`

**è„šæœ¬åŠŸèƒ½**:
1. ä»PRD Epicæ–‡ä»¶ä¸­æå–æ‰€æœ‰APIç«¯ç‚¹å®šä¹‰
2. ä»PRD Epicæ–‡ä»¶ä¸­æå–æ‰€æœ‰æ•°æ®æ¨¡å‹å®šä¹‰
3. æ£€æŸ¥OpenAPIè§„èŒƒè¦†ç›–ç‡
4. æ£€æŸ¥JSON Schemaè¦†ç›–ç‡
5. ç”Ÿæˆå®Œæ•´çš„è¿½æº¯çŸ©é˜µ

### Step 2: è¯»å–å¹¶åˆ†æè¦†ç›–ç‡æŠ¥å‘Š

**è¯»å–Indexæ–‡ä»¶**:
```
Read: docs/specs/sdd-requirements-index.md
```

**æå–å…³é”®æŒ‡æ ‡**:
- APIç«¯ç‚¹æ€»æ•° / å·²è¦†ç›–æ•° / è¦†ç›–ç‡
- æ•°æ®æ¨¡å‹æ€»æ•° / å·²è¦†ç›–æ•° / è¦†ç›–ç‡
- æ€»ä½“è¦†ç›–ç‡
- è´¨é‡é—¨ç¦çŠ¶æ€ (â‰¥80% required)

### Step 3: è¯†åˆ«ç¼ºå¤±é¡¹

**ä»Indexä¸­æå–**:

1. **ç¼ºå¤±çš„OpenAPIç«¯ç‚¹**:
   - ä» `## ğŸ“‹ å¾…åˆ›å»ºSDDæ¸…å•` â†’ `### ç¼ºå¤±çš„OpenAPIç«¯ç‚¹` section
   - è®°å½•æ¯ä¸ªç¼ºå¤±ç«¯ç‚¹çš„æ–¹æ³•ã€è·¯å¾„ã€PRDä½ç½®

2. **ç¼ºå¤±çš„JSON Schema**:
   - ä» `### ç¼ºå¤±çš„JSON Schema` section
   - è®°å½•æ¯ä¸ªç¼ºå¤±æ¨¡å‹çš„åç§°ã€åˆ†ç±»ã€å»ºè®®æ–‡ä»¶è·¯å¾„

### Step 4: ç”Ÿæˆä¼˜å…ˆçº§å»ºè®®

**åŸºäºPRD Epicä¼˜å…ˆçº§**:

| ä¼˜å…ˆçº§ | Epic | ç¼ºå¤±SDD | å»ºè®®è¡ŒåŠ¨ |
|--------|------|---------|----------|
| P0 | Epic 15 (FastAPIåç«¯) | 2 APIç«¯ç‚¹, 27 Schema | **ç«‹å³è¡¥å……** |
| P1 | Epic 12 (ä¸‰å±‚è®°å¿†) | å¾…è¯„ä¼° | ä¸‹ä¸€è¿­ä»£ |
| P2 | å…¶ä»–Epic | å¾…è¯„ä¼° | æŒ‰éœ€è¡¥å…… |

### Step 5: è¾“å‡ºæŠ¥å‘Š

**æ ¼å¼**:
```markdown
# SDDè¦†ç›–ç‡éªŒè¯æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: {timestamp}
**éªŒè¯å·¥å…·**: scripts/extract-sdd-requirements.py

---

## ğŸ“Š è¦†ç›–ç‡æ€»è§ˆ

| ç±»åˆ« | æ€»æ•° | å·²è¦†ç›– | è¦†ç›–ç‡ | è´¨é‡é—¨ç¦ |
|------|------|--------|--------|----------|
| APIç«¯ç‚¹ | {total} | {covered} | {percentage}% | {status} |
| æ•°æ®æ¨¡å‹ | {total} | {covered} | {percentage}% | {status} |
| **æ€»ä½“** | {total} | {covered} | {percentage}% | {status} |

**è´¨é‡é—¨ç¦æ ‡å‡†**: â‰¥80% è¦†ç›–ç‡

---

## ğŸ”´ ç¼ºå¤±çš„OpenAPIç«¯ç‚¹ ({count}ä¸ª)

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° | PRDä½ç½® | ä¼˜å…ˆçº§ |
|------|------|------|---------|--------|
| {path} | {method} | {desc} | {prd_ref} | {priority} |

---

## ğŸ”´ ç¼ºå¤±çš„JSON Schema ({count}ä¸ª)

| æ¨¡å‹åç§° | åˆ†ç±» | å»ºè®®æ–‡ä»¶è·¯å¾„ | PRDä½ç½® | ä¼˜å…ˆçº§ |
|----------|------|--------------|---------|--------|
| {name} | {category} | specs/data/{file} | {prd_ref} | {priority} |

---

## ğŸ’¡ è¡ŒåŠ¨å»ºè®®

### ç«‹å³è¡ŒåŠ¨ (P0)
1. åˆ›å»ºç¼ºå¤±çš„OpenAPIç«¯ç‚¹:
   ```
   @architect *create-openapi "{endpoint}"
   ```

2. åˆ›å»ºç¼ºå¤±çš„JSON Schema:
   ```
   @architect *create-schemas "{model_name}"
   ```

### åç»­è¡ŒåŠ¨
- Planning Finalizeè´¨é‡é—¨ç¦å°†æ£€æŸ¥è¦†ç›–ç‡ â‰¥80%
- Storyåˆ›å»ºæ—¶SMå°†æ£€æŸ¥ç›¸å…³SDDæ˜¯å¦å­˜åœ¨
- Pre-commit hookå°†é˜»æ­¢æäº¤ç¼ºå¤±SDDçš„ä»£ç 

---

## ğŸ”— è¿½æº¯çŸ©é˜µ

è¯¦è§: `docs/specs/sdd-requirements-index.md#è¿½æº¯çŸ©é˜µ`

PRDéœ€æ±‚ â†’ OpenAPIç«¯ç‚¹ â†’ JSON Schema â†’ Storyå¼•ç”¨

```

### Step 6: ç”¨æˆ·äº¤äº’

**å‘ç”¨æˆ·å‘ˆç°**:
1. è¦†ç›–ç‡æ‘˜è¦
2. ç¼ºå¤±é¡¹æ¸…å•
3. ä¼˜å…ˆçº§å»ºè®®

**è¯¢é—®ç”¨æˆ·**:
```
â“ **ä¸‹ä¸€æ­¥è¡ŒåŠ¨**:

å½“å‰SDDè¦†ç›–ç‡: {percentage}% ({status})

1. ç«‹å³è¡¥å……ç¼ºå¤±çš„SDD (æ¨è)
2. æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Š (docs/specs/sdd-requirements-index.md)
3. ç»§ç»­å…¶ä»–å·¥ä½œ (ç¨åè¡¥å……)

è¯·é€‰æ‹© (1-3):
```

---

## ğŸ”´ Quality Gates é›†æˆ

**æ­¤ä»»åŠ¡ä¼šè¢«ä»¥ä¸‹æµç¨‹è°ƒç”¨**:

1. **Planning Finalize**:
   - `@planning-orchestrator *finalize` ä¼šè‡ªåŠ¨è¿è¡Œæ­¤ä»»åŠ¡
   - å¦‚æœè¦†ç›–ç‡ < 80% â†’ HALTå¹¶è¦æ±‚è¡¥å……

2. **Story Creation**:
   - `@sm *draft` åˆ›å»ºStoryå‰ä¼šæ£€æŸ¥ç›¸å…³SDDæ˜¯å¦å­˜åœ¨
   - ç¼ºå¤±åˆ™é€šçŸ¥Architectè¡¥å……

3. **Pre-commit Hook**:
   - Gitæäº¤æ—¶è‡ªåŠ¨è¿è¡Œè„šæœ¬
   - å‘ç°æ–°å¢API/Modelä½†æ— SDD â†’ é˜»æ­¢æäº¤

---

## å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] SDD Indexå·²ç”Ÿæˆ
- [ ] è¦†ç›–ç‡ç»Ÿè®¡å·²æå–
- [ ] ç¼ºå¤±é¡¹å·²è¯†åˆ«
- [ ] ä¼˜å…ˆçº§å»ºè®®å·²æä¾›
- [ ] ç”¨æˆ·å·²çŸ¥æ™“ä¸‹ä¸€æ­¥è¡ŒåŠ¨
